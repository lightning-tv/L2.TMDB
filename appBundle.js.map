{
  "version": 3,
  "sources": ["../node_modules/deepmerge/dist/cjs.js", "../src/index.js", "../node_modules/@lightningjs/sdk/src/Settings/index.js", "../node_modules/@lightningjs/sdk/src/Log/index.js", "../node_modules/@michieljs/execute-as-promise/src/execute-as-promise.js", "../node_modules/@lightningjs/sdk/src/Metrics/index.js", "../node_modules/@lightningjs/sdk/src/VideoPlayer/events.js", "../node_modules/@lightningjs/sdk/src/helpers/autoSetupMixin.js", "../node_modules/@lightningjs/sdk/src/helpers/easeExecution.js", "../node_modules/@lightningjs/sdk/src/Utils/index.js", "../node_modules/@lightningjs/sdk/src/Profile/helpers.js", "../node_modules/@lightningjs/sdk/src/Profile/defaults.js", "../node_modules/@lightningjs/sdk/src/Profile/index.js", "../../../../../.nvm/versions/node/v22.2.0/lib/node_modules/@lightningjs/cli/src/alias/lightningjs-core.js", "../node_modules/@lightningjs/sdk/src/Lightning/index.js", "../node_modules/@lightningjs/sdk/src/MediaPlayer/index.js", "../node_modules/localCookie/module/localCookie.js", "../node_modules/@lightningjs/sdk/src/Storage/index.js", "../node_modules/@lightningjs/sdk/src/Router/utils/regex.js", "../node_modules/@lightningjs/sdk/src/Router/utils/register.js", "../node_modules/@lightningjs/sdk/src/Router/model/Request.js", "../node_modules/@lightningjs/sdk/src/Router/model/Route.js", "../node_modules/@lightningjs/sdk/src/Router/utils/route.js", "../node_modules/@lightningjs/sdk/src/Router/utils/emit.js", "../node_modules/@lightningjs/sdk/src/Router/utils/widgets.js", "../node_modules/@lightningjs/sdk/src/Router/utils/components.js", "../node_modules/@lightningjs/sdk/src/Router/utils/history.js", "../node_modules/@lightningjs/sdk/src/Application/index.js", "../node_modules/@lightningjs/sdk/src/Locale/index.js", "../node_modules/@lightningjs/sdk/src/VersionLabel/index.js", "../node_modules/@lightningjs/sdk/src/FpsCounter/index.js", "../node_modules/@lightningjs/sdk/src/Language/index.js", "../node_modules/@lightningjs/sdk/src/Registry/index.js", "../node_modules/@lightningjs/sdk/src/Colors/utils.js", "../node_modules/@lightningjs/sdk/src/Colors/index.js", "../node_modules/@lightningjs/sdk/src/Router/utils/router.js", "../node_modules/@lightningjs/sdk/src/Router/utils/helpers.js", "../node_modules/@lightningjs/sdk/src/Router/utils/provider.js", "../node_modules/@lightningjs/sdk/src/Router/transitions.js", "../node_modules/@lightningjs/sdk/src/Router/utils/transition.js", "../node_modules/@lightningjs/sdk/src/Router/utils/loader.js", "../node_modules/@lightningjs/sdk/src/Router/base.js", "../node_modules/@lightningjs/sdk/src/Router/index.js", "../node_modules/@lightningjs/sdk/src/TV/defaults.js", "../node_modules/@lightningjs/sdk/src/TV/index.js", "../node_modules/@lightningjs/sdk/src/Purchase/index.js", "../node_modules/@lightningjs/sdk/src/Pin/dialog.js", "../node_modules/@lightningjs/sdk/src/Pin/index.js", "../node_modules/@lightningjs/sdk/src/Metadata/index.js", "../node_modules/@lightningjs/sdk/src/Launch/index.js", "../node_modules/@lightningjs/sdk/src/VideoPlayer/VideoTexture.js", "../node_modules/@lightningjs/sdk/src/VideoPlayer/index.js", "../node_modules/@lightningjs/sdk/src/Ads/index.js", "../node_modules/@lightningjs/sdk/src/Img/ScaledImageTexture.js", "../node_modules/@lightningjs/sdk/src/Img/index.js", "../src/lib/endpoints.js", "../src/lib/tools.js", "../src/shader/PerspectiveShader.js", "../src/components/item/ItemConfigs.js", "../src/components/item/Item.js", "../src/components/item/Actor.js", "../src/components/item/ItemWrapper.js", "../src/components/lists/FlipList.js", "../src/components/lists/List.js", "../src/components/content/Title.js", "../src/shader/CircleProgressShader.js", "../src/components/content/Rating.js", "../src/components/content/MovieInfo.js", "../src/components/Button.js", "../src/components/Background.js", "../src/pages/popular/Content.js", "../src/pages/popular/index.js", "../src/pages/popular/Movie.js", "../src/pages/popular/Tv.js", "../src/pages/details/Logo.js", "../src/pages/details/index.js", "../src/pages/Cast.js", "../src/pages/Similar.js", "../src/pages/People.js", "../src/pages/MovieCredits.js", "../src/pages/Error.js", "../src/pages/NotFound.js", "../src/pages/Splash.js", "../src/lib/models/Container.js", "../src/lib/models/Movie.js", "../src/lib/models/Tv.js", "../src/lib/models/Details.js", "../src/lib/models/Cast.js", "../src/lib/models/People.js", "../src/lib/factory.js", "../src/pages/TvCredits.js", "../src/pages/Accessibility.js", "../src/lib/routes.js", "../src/widgets/Menu.js", "../src/shader/ColorShift.js", "../src/shader/ProtanopiaShader.js", "../src/shader/DeuteranopiaShader.js", "../src/shader/TritanopiaShader.js", "../src/shader/AchromatopsiaShader.js", "../src/App.js"],
  "sourcesContent": ["'use strict';\n\nvar isMergeableObject = function isMergeableObject(value) {\n  return isNonNullObject(value) && !isSpecial(value);\n};\nfunction isNonNullObject(value) {\n  return !!value && typeof value === 'object';\n}\nfunction isSpecial(value) {\n  var stringValue = Object.prototype.toString.call(value);\n  return stringValue === '[object RegExp]' || stringValue === '[object Date]' || isReactElement(value);\n}\n\n// see https://github.com/facebook/react/blob/b5ac963fb791d1298e7f396236383bc955f916c1/src/isomorphic/classic/element/ReactElement.js#L21-L25\nvar canUseSymbol = typeof Symbol === 'function' && Symbol.for;\nvar REACT_ELEMENT_TYPE = canUseSymbol ? Symbol.for('react.element') : 0xeac7;\nfunction isReactElement(value) {\n  return value.$$typeof === REACT_ELEMENT_TYPE;\n}\nfunction emptyTarget(val) {\n  return Array.isArray(val) ? [] : {};\n}\nfunction cloneUnlessOtherwiseSpecified(value, options) {\n  return options.clone !== false && options.isMergeableObject(value) ? deepmerge(emptyTarget(value), value, options) : value;\n}\nfunction defaultArrayMerge(target, source, options) {\n  return target.concat(source).map(function (element) {\n    return cloneUnlessOtherwiseSpecified(element, options);\n  });\n}\nfunction getMergeFunction(key, options) {\n  if (!options.customMerge) {\n    return deepmerge;\n  }\n  var customMerge = options.customMerge(key);\n  return typeof customMerge === 'function' ? customMerge : deepmerge;\n}\nfunction getEnumerableOwnPropertySymbols(target) {\n  return Object.getOwnPropertySymbols ? Object.getOwnPropertySymbols(target).filter(function (symbol) {\n    return target.propertyIsEnumerable(symbol);\n  }) : [];\n}\nfunction getKeys(target) {\n  return Object.keys(target).concat(getEnumerableOwnPropertySymbols(target));\n}\nfunction propertyIsOnObject(object, property) {\n  try {\n    return property in object;\n  } catch (_) {\n    return false;\n  }\n}\n\n// Protects from prototype poisoning and unexpected merging up the prototype chain.\nfunction propertyIsUnsafe(target, key) {\n  return propertyIsOnObject(target, key) // Properties are safe to merge if they don't exist in the target yet,\n  && !(Object.hasOwnProperty.call(target, key) // unsafe if they exist up the prototype chain,\n  && Object.propertyIsEnumerable.call(target, key)); // and also unsafe if they're nonenumerable.\n}\nfunction mergeObject(target, source, options) {\n  var destination = {};\n  if (options.isMergeableObject(target)) {\n    getKeys(target).forEach(function (key) {\n      destination[key] = cloneUnlessOtherwiseSpecified(target[key], options);\n    });\n  }\n  getKeys(source).forEach(function (key) {\n    if (propertyIsUnsafe(target, key)) {\n      return;\n    }\n    if (propertyIsOnObject(target, key) && options.isMergeableObject(source[key])) {\n      destination[key] = getMergeFunction(key, options)(target[key], source[key], options);\n    } else {\n      destination[key] = cloneUnlessOtherwiseSpecified(source[key], options);\n    }\n  });\n  return destination;\n}\nfunction deepmerge(target, source, options) {\n  options = options || {};\n  options.arrayMerge = options.arrayMerge || defaultArrayMerge;\n  options.isMergeableObject = options.isMergeableObject || isMergeableObject;\n  // cloneUnlessOtherwiseSpecified is added to `options` so that custom arrayMerge()\n  // implementations can use it. The caller may not replace it.\n  options.cloneUnlessOtherwiseSpecified = cloneUnlessOtherwiseSpecified;\n  var sourceIsArray = Array.isArray(source);\n  var targetIsArray = Array.isArray(target);\n  var sourceAndTargetTypesMatch = sourceIsArray === targetIsArray;\n  if (!sourceAndTargetTypesMatch) {\n    return cloneUnlessOtherwiseSpecified(source, options);\n  } else if (sourceIsArray) {\n    return options.arrayMerge(target, source, options);\n  } else {\n    return mergeObject(target, source, options);\n  }\n}\ndeepmerge.all = function deepmergeAll(array, options) {\n  if (!Array.isArray(array)) {\n    throw new Error('first argument should be an array');\n  }\n  return array.reduce(function (prev, next) {\n    return deepmerge(prev, next, options);\n  }, {});\n};\nvar deepmerge_1 = deepmerge;\nmodule.exports = deepmerge_1;", "import { Launch } from '@lightningjs/sdk';\nimport App from './App.js';\nexport default function () {\n  return Launch(App, ...arguments);\n}", "/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst settings = {};\nconst subscribers = {};\nexport const initSettings = (appSettings, platformSettings) => {\n  settings['app'] = appSettings;\n  settings['platform'] = platformSettings;\n  settings['user'] = {};\n};\nconst publish = (key, value) => {\n  subscribers[key] && subscribers[key].forEach(subscriber => subscriber(value));\n};\nconst dotGrab = function () {\n  let obj = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  let key = arguments.length > 1 ? arguments[1] : undefined;\n  if (obj === null) return undefined;\n  const keys = key.split('.');\n  for (let i = 0; i < keys.length; i++) {\n    obj = obj[keys[i]] = obj[keys[i]] !== undefined ? obj[keys[i]] : {};\n  }\n  return typeof obj === 'object' && obj !== null ? Object.keys(obj).length ? obj : undefined : obj;\n};\nexport default {\n  get(type, key) {\n    let fallback = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : undefined;\n    const val = dotGrab(settings[type], key);\n    return val !== undefined ? val : fallback;\n  },\n  has(type, key) {\n    return !!this.get(type, key);\n  },\n  set(key, value) {\n    settings['user'][key] = value;\n    publish(key, value);\n  },\n  subscribe(key, callback) {\n    subscribers[key] = subscribers[key] || [];\n    subscribers[key].push(callback);\n  },\n  unsubscribe(key, callback) {\n    if (callback) {\n      const index = subscribers[key] && subscribers[key].findIndex(cb => cb === callback);\n      index > -1 && subscribers[key].splice(index, 1);\n    } else {\n      if (key in subscribers) {\n        subscribers[key] = [];\n      }\n    }\n  },\n  clearSubscribers() {\n    for (const key of Object.getOwnPropertyNames(subscribers)) {\n      delete subscribers[key];\n    }\n  }\n};", "/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Settings from '../Settings';\nconst prepLog = (type, args) => {\n  const colors = {\n    Info: 'green',\n    Debug: 'gray',\n    Warn: 'orange',\n    Error: 'red'\n  };\n  args = Array.from(args);\n  return ['%c' + (args.length > 1 && typeof args[0] === 'string' ? args.shift() : type), 'background-color: ' + colors[type] + '; color: white; padding: 2px 4px; border-radius: 2px', args];\n};\nexport default {\n  info() {\n    Settings.get('platform', 'log') && console.log.apply(console, prepLog('Info', arguments));\n  },\n  debug() {\n    Settings.get('platform', 'log') && console.debug.apply(console, prepLog('Debug', arguments));\n  },\n  error() {\n    Settings.get('platform', 'log') && console.error.apply(console, prepLog('Error', arguments));\n  },\n  warn() {\n    Settings.get('platform', 'log') && console.warn.apply(console, prepLog('Warn', arguments));\n  }\n};", "export default (function (method) {\n  let args = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n  let context = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n  let result;\n  if (method && typeof method === 'function') {\n    try {\n      result = method.apply(context, args);\n    } catch (e) {\n      result = e;\n    }\n  } else {\n    result = method;\n  }\n\n  // if it looks like a duck .. ehm ... promise and talks like a promise, let's assume it's a promise\n  if (result !== null && typeof result === 'object' && result.then && typeof result.then === 'function') {\n    return result;\n  }\n  // otherwise make it into a promise\n  else {\n    return new Promise((resolve, reject) => {\n      if (result instanceof Error) {\n        reject(result);\n      } else {\n        resolve(result);\n      }\n    });\n  }\n});", "/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Log from '../Log';\nlet sendMetric = (type, event, params) => {\n  Log.info('Sending metric', type, event, params);\n};\nexport const initMetrics = config => {\n  sendMetric = config.sendMetric;\n};\n\n// available metric per category\nconst metrics = {\n  app: ['launch', 'loaded', 'ready', 'close'],\n  page: ['view', 'leave'],\n  user: ['click', 'input'],\n  media: ['abort', 'canplay', 'ended', 'pause', 'play',\n  // with some videos there occur almost constant suspend events ... should investigate\n  // 'suspend',\n  'volumechange', 'waiting', 'seeking', 'seeked']\n};\n\n// error metric function (added to each category)\nconst errorMetric = function (type, message, code, visible) {\n  let params = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};\n  params = {\n    params,\n    ...{\n      message,\n      code,\n      visible\n    }\n  };\n  sendMetric(type, 'error', params);\n};\nconst Metric = function (type, events) {\n  let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  return events.reduce((obj, event) => {\n    obj[event] = function (name) {\n      let params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      params = {\n        ...options,\n        ...(name ? {\n          name\n        } : {}),\n        ...params\n      };\n      sendMetric(type, event, params);\n    };\n    return obj;\n  }, {\n    error(message, code, params) {\n      errorMetric(type, message, code, params);\n    },\n    event(name, params) {\n      sendMetric(type, name, params);\n    }\n  });\n};\nconst Metrics = types => {\n  return Object.keys(types).reduce((obj, type) => {\n    // media metric works a bit different!\n    // it's a function that accepts a url and returns an object with the available metrics\n    // url is automatically passed as a param in every metric\n    type === 'media' ? obj[type] = url => Metric(type, types[type], {\n      url\n    }) : obj[type] = Metric(type, types[type]);\n    return obj;\n  }, {\n    error: errorMetric,\n    event: sendMetric\n  });\n};\nexport default Metrics(metrics);", "/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport default {\n  abort: 'Abort',\n  canplay: 'CanPlay',\n  canplaythrough: 'CanPlayThrough',\n  durationchange: 'DurationChange',\n  emptied: 'Emptied',\n  encrypted: 'Encrypted',\n  ended: 'Ended',\n  error: 'Error',\n  interruptbegin: 'InterruptBegin',\n  interruptend: 'InterruptEnd',\n  loadeddata: 'LoadedData',\n  loadedmetadata: 'LoadedMetadata',\n  loadstart: 'LoadStart',\n  pause: 'Pause',\n  play: 'Play',\n  playing: 'Playing',\n  progress: 'Progress',\n  ratechange: 'Ratechange',\n  seeked: 'Seeked',\n  seeking: 'Seeking',\n  stalled: 'Stalled',\n  // suspend: 'Suspend', // this one is called a looooot for some videos\n  timeupdate: 'TimeUpdate',\n  volumechange: 'VolumeChange',\n  waiting: 'Waiting'\n};", "/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport default (function (sourceObject) {\n  let setup = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : () => {};\n  let ready = false;\n  const doSetup = () => {\n    if (ready === false) {\n      setup();\n      ready = true;\n    }\n  };\n  return Object.keys(sourceObject).reduce((obj, key) => {\n    if (typeof sourceObject[key] === 'function') {\n      obj[key] = function () {\n        doSetup();\n        return sourceObject[key].apply(sourceObject, arguments);\n      };\n    } else if (typeof Object.getOwnPropertyDescriptor(sourceObject, key).get === 'function') {\n      obj.__defineGetter__(key, function () {\n        doSetup();\n        return Object.getOwnPropertyDescriptor(sourceObject, key).get.apply(sourceObject);\n      });\n    } else if (typeof Object.getOwnPropertyDescriptor(sourceObject, key).set === 'function') {\n      obj.__defineSetter__(key, function () {\n        doSetup();\n        return Object.getOwnPropertyDescriptor(sourceObject, key).set.sourceObject[key].apply(sourceObject, arguments);\n      });\n    } else {\n      obj[key] = sourceObject[key];\n    }\n    return obj;\n  }, {});\n});", "/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nlet timeout = null;\nexport default (cb, delay) => {\n  clearTimeout(timeout);\n  timeout = setTimeout(() => {\n    cb();\n  }, delay);\n};", "/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nlet basePath;\nlet proxyUrl;\nexport const initUtils = config => {\n  basePath = ensureUrlWithProtocol(makeFullStaticPath(window.location.pathname, config.path || '/'));\n  if (config.proxyUrl) {\n    proxyUrl = ensureUrlWithProtocol(config.proxyUrl);\n  }\n};\nexport default {\n  asset(relPath) {\n    return basePath + relPath;\n  },\n  proxyUrl(url) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    return proxyUrl ? proxyUrl + '?' + makeQueryString(url, options) : url;\n  },\n  makeQueryString() {\n    return makeQueryString(...arguments);\n  },\n  // since imageworkers don't work without protocol\n  ensureUrlWithProtocol() {\n    return ensureUrlWithProtocol(...arguments);\n  }\n};\nexport const ensureUrlWithProtocol = url => {\n  if (/^\\/\\//.test(url)) {\n    return window.location.protocol + url;\n  }\n  if (!/^(?:https?:)/i.test(url)) {\n    return window.location.origin + url;\n  }\n  return url;\n};\nexport const makeFullStaticPath = function () {\n  let pathname = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '/';\n  let path = arguments.length > 1 ? arguments[1] : undefined;\n  // ensure path has traling slash\n  path = path.charAt(path.length - 1) !== '/' ? path + '/' : path;\n\n  // if path is URL, we assume it's already the full static path, so we just return it\n  if (/^(?:https?:)?(?:\\/\\/)/.test(path)) {\n    return path;\n  }\n  if (path.charAt(0) === '/') {\n    return path;\n  } else {\n    // cleanup the pathname (i.e. remove possible index.html)\n    pathname = cleanUpPathName(pathname);\n\n    // remove possible leading dot from path\n    path = path.charAt(0) === '.' ? path.substr(1) : path;\n    // ensure path has leading slash\n    path = path.charAt(0) !== '/' ? '/' + path : path;\n    return pathname + path;\n  }\n};\nexport const cleanUpPathName = pathname => {\n  if (pathname.slice(-1) === '/') return pathname.slice(0, -1);\n  const parts = pathname.split('/');\n  if (parts[parts.length - 1].indexOf('.') > -1) parts.pop();\n  return parts.join('/');\n};\nconst makeQueryString = function (url) {\n  let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  let type = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'url';\n  // add operator as an option\n  options.operator = 'metrological'; // Todo: make this configurable (via url?)\n  // add type (= url or qr) as an option, with url as the value\n  options[type] = url;\n  return Object.keys(options).map(key => {\n    return encodeURIComponent(key) + '=' + encodeURIComponent('' + options[key]);\n  }).join('&');\n};", "/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Settings from '../Settings';\nconst formatLocale = locale => {\n  if (locale && locale.length === 2) {\n    return \"\".concat(locale.toLowerCase(), \"-\").concat(locale.toUpperCase());\n  } else {\n    return locale;\n  }\n};\nexport const getLocale = defaultValue => {\n  if ('language' in navigator) {\n    const locale = formatLocale(navigator.language);\n    return Promise.resolve(locale);\n  } else {\n    return Promise.resolve(defaultValue);\n  }\n};\nexport const getLanguage = defaultValue => {\n  if ('language' in navigator) {\n    const language = formatLocale(navigator.language).slice(0, 2);\n    return Promise.resolve(language);\n  } else {\n    return Promise.resolve(defaultValue);\n  }\n};\nexport const getCountryCode = defaultValue => {\n  if ('language' in navigator) {\n    const countryCode = formatLocale(navigator.language).slice(3, 5);\n    return Promise.resolve(countryCode);\n  } else {\n    return Promise.resolve(defaultValue);\n  }\n};\nconst hasOrAskForGeoLocationPermission = () => {\n  return new Promise(resolve => {\n    // force to prompt for location permission\n    if (Settings.get('platform', 'forceBrowserGeolocation') === true) resolve(true);\n    if ('permissions' in navigator && typeof navigator.permissions.query === 'function') {\n      navigator.permissions.query({\n        name: 'geolocation'\n      }).then(status => {\n        resolve(status.state === 'granted' || status.status === 'granted');\n      });\n    } else {\n      resolve(false);\n    }\n  });\n};\nexport const getLatLon = defaultValue => {\n  return new Promise(resolve => {\n    hasOrAskForGeoLocationPermission().then(granted => {\n      if (granted === true) {\n        if ('geolocation' in navigator) {\n          navigator.geolocation.getCurrentPosition(\n          // success\n          result => result && result.coords && resolve([result.coords.latitude, result.coords.longitude]),\n          // error\n          () => resolve(defaultValue),\n          // options\n          {\n            enableHighAccuracy: true,\n            timeout: 5000,\n            maximumAge: 0\n          });\n        } else {\n          return queryForLatLon().then(result => resolve(result || defaultValue));\n        }\n      } else {\n        return queryForLatLon().then(result => resolve(result || defaultValue));\n      }\n    });\n  });\n};\nconst queryForLatLon = () => {\n  return new Promise(resolve => {\n    fetch('https://geolocation-db.com/json/').then(response => response.json()).then(_ref => {\n      let {\n        latitude,\n        longitude\n      } = _ref;\n      return latitude && longitude ? resolve([latitude, longitude]) : resolve(false);\n    }).catch(() => resolve(false));\n  });\n};", "/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { getLocale, getLanguage, getCountryCode, getLatLon } from './helpers';\nexport const defaultProfile = {\n  ageRating: 'adult',\n  city: 'New York',\n  zipCode: '27505',\n  countryCode: () => getCountryCode('US'),\n  ip: '127.0.0.1',\n  household: 'b2244e9d4c04826ccd5a7b2c2a50e7d4',\n  language: () => getLanguage('en'),\n  latlon: () => getLatLon([40.7128, 74.006]),\n  locale: () => getLocale('en-US'),\n  mac: '00:00:00:00:00:00',\n  operator: 'metrological',\n  platform: 'metrological',\n  packages: [],\n  uid: 'ee6723b8-7ab3-462c-8d93-dbf61227998e',\n  stbType: 'metrological'\n};", "/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Settings from '../Settings';\nimport { defaultProfile } from './defaults';\nlet getInfo = key => {\n  const profile = {\n    ...defaultProfile,\n    ...Settings.get('platform', 'profile')\n  };\n  return Promise.resolve(typeof profile[key] === 'function' ? profile[key]() : profile[key]);\n};\nlet setInfo = (key, params) => {\n  if (key in defaultProfile) defaultProfile[key] = params;\n};\nexport const initProfile = config => {\n  getInfo = config.getInfo;\n  setInfo = config.setInfo;\n};\nconst getOrSet = (key, params) => params ? setInfo(key, params) : getInfo(key);\n\n// public API\nexport default {\n  ageRating(params) {\n    return getOrSet('ageRating', params);\n  },\n  city(params) {\n    return getOrSet('city', params);\n  },\n  zipCode(params) {\n    return getOrSet('zipCode', params);\n  },\n  countryCode(params) {\n    return getOrSet('countryCode', params);\n  },\n  ip(params) {\n    return getOrSet('ip', params);\n  },\n  household(params) {\n    return getOrSet('household', params);\n  },\n  language(params) {\n    return getOrSet('language', params);\n  },\n  latlon(params) {\n    return getOrSet('latlon', params);\n  },\n  locale(params) {\n    return getOrSet('locale', params);\n  },\n  mac(params) {\n    return getOrSet('mac', params);\n  },\n  operator(params) {\n    return getOrSet('operator', params);\n  },\n  platform(params) {\n    return getOrSet('platform', params);\n  },\n  packages(params) {\n    return getOrSet('packages', params);\n  },\n  uid(params) {\n    return getOrSet('uid', params);\n  },\n  stbType(params) {\n    return getOrSet('stbType', params);\n  }\n};", "/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport default window.lng;", "/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Lightning from '@lightningjs/core';\nexport default Lightning;", "/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Lightning from '../Lightning';\nimport Metrics from '../Metrics';\nimport Settings from '../Settings';\nimport Log from '../Log';\nconst events = ['timeupdate', 'error', 'ended', 'loadeddata', 'canplay', 'play', 'playing', 'pause', 'loadstart', 'seeking', 'seeked', 'encrypted'];\nlet mediaUrl = url => url;\nexport const initMediaPlayer = config => {\n  if (config.mediaUrl) {\n    mediaUrl = config.mediaUrl;\n  }\n};\nexport default class Mediaplayer extends Lightning.Component {\n  _construct() {\n    this._skipRenderToTexture = false;\n    this._metrics = null;\n    this._textureMode = Settings.get('platform', 'textureMode') || false;\n    Log.info('Texture mode: ' + this._textureMode);\n    console.warn([\"The 'MediaPlayer'-plugin in the Lightning-SDK is deprecated and will be removed in future releases.\", \"Please consider using the new 'VideoPlayer'-plugin instead.\", 'https://rdkcentral.github.io/Lightning-SDK/#/plugins/videoplayer'].join('\\n\\n'));\n  }\n  static _template() {\n    return {\n      Video: {\n        VideoWrap: {\n          VideoTexture: {\n            visible: false,\n            pivot: 0.5,\n            texture: {\n              type: Lightning.textures.StaticTexture,\n              options: {}\n            }\n          }\n        }\n      }\n    };\n  }\n  set skipRenderToTexture(v) {\n    this._skipRenderToTexture = v;\n  }\n  get textureMode() {\n    return this._textureMode;\n  }\n  get videoView() {\n    return this.tag('Video');\n  }\n  _init() {\n    //re-use videotag if already there\n    const videoEls = document.getElementsByTagName('video');\n    if (videoEls && videoEls.length > 0) this.videoEl = videoEls[0];else {\n      this.videoEl = document.createElement('video');\n      this.videoEl.setAttribute('id', 'video-player');\n      this.videoEl.style.position = 'absolute';\n      this.videoEl.style.zIndex = '1';\n      this.videoEl.style.display = 'none';\n      this.videoEl.setAttribute('width', '100%');\n      this.videoEl.setAttribute('height', '100%');\n      this.videoEl.style.visibility = this.textureMode ? 'hidden' : 'visible';\n      document.body.appendChild(this.videoEl);\n    }\n    if (this.textureMode && !this._skipRenderToTexture) {\n      this._createVideoTexture();\n    }\n    this.eventHandlers = [];\n  }\n  _registerListeners() {\n    events.forEach(event => {\n      const handler = e => {\n        if (this._metrics && this._metrics[event] && typeof this._metrics[event] === 'function') {\n          this._metrics[event]({\n            currentTime: this.videoEl.currentTime\n          });\n        }\n        this.fire(event, {\n          videoElement: this.videoEl,\n          event: e\n        });\n      };\n      this.eventHandlers.push(handler);\n      this.videoEl.addEventListener(event, handler);\n    });\n  }\n  _deregisterListeners() {\n    Log.info('Deregistering event listeners MediaPlayer');\n    events.forEach((event, index) => {\n      this.videoEl.removeEventListener(event, this.eventHandlers[index]);\n    });\n    this.eventHandlers = [];\n  }\n  _attach() {\n    this._registerListeners();\n  }\n  _detach() {\n    this._deregisterListeners();\n    this.close();\n  }\n  _createVideoTexture() {\n    const stage = this.stage;\n    const gl = stage.gl;\n    const glTexture = gl.createTexture();\n    gl.bindTexture(gl.TEXTURE_2D, glTexture);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n    this.videoTexture.options = {\n      source: glTexture,\n      w: this.videoEl.width,\n      h: this.videoEl.height\n    };\n  }\n  _startUpdatingVideoTexture() {\n    if (this.textureMode && !this._skipRenderToTexture) {\n      const stage = this.stage;\n      if (!this._updateVideoTexture) {\n        this._updateVideoTexture = () => {\n          if (this.videoTexture.options.source && this.videoEl.videoWidth && this.active) {\n            const gl = stage.gl;\n            const currentTime = new Date().getTime();\n\n            // When BR2_PACKAGE_GST1_PLUGINS_BAD_PLUGIN_DEBUGUTILS is not set in WPE, webkitDecodedFrameCount will not be available.\n            // We'll fallback to fixed 30fps in this case.\n            const frameCount = this.videoEl.webkitDecodedFrameCount;\n            const mustUpdate = frameCount ? this._lastFrame !== frameCount : this._lastTime < currentTime - 30;\n            if (mustUpdate) {\n              this._lastTime = currentTime;\n              this._lastFrame = frameCount;\n              try {\n                gl.bindTexture(gl.TEXTURE_2D, this.videoTexture.options.source);\n                gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, false);\n                gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, this.videoEl);\n                this._lastFrame = this.videoEl.webkitDecodedFrameCount;\n                this.videoTextureView.visible = true;\n                this.videoTexture.options.w = this.videoEl.videoWidth;\n                this.videoTexture.options.h = this.videoEl.videoHeight;\n                const expectedAspectRatio = this.videoTextureView.w / this.videoTextureView.h;\n                const realAspectRatio = this.videoEl.videoWidth / this.videoEl.videoHeight;\n                if (expectedAspectRatio > realAspectRatio) {\n                  this.videoTextureView.scaleX = realAspectRatio / expectedAspectRatio;\n                  this.videoTextureView.scaleY = 1;\n                } else {\n                  this.videoTextureView.scaleY = expectedAspectRatio / realAspectRatio;\n                  this.videoTextureView.scaleX = 1;\n                }\n              } catch (e) {\n                Log.error('texImage2d video', e);\n                this._stopUpdatingVideoTexture();\n                this.videoTextureView.visible = false;\n              }\n              this.videoTexture.source.forceRenderUpdate();\n            }\n          }\n        };\n      }\n      if (!this._updatingVideoTexture) {\n        stage.on('frameStart', this._updateVideoTexture);\n        this._updatingVideoTexture = true;\n      }\n    }\n  }\n  _stopUpdatingVideoTexture() {\n    if (this.textureMode) {\n      const stage = this.stage;\n      stage.removeListener('frameStart', this._updateVideoTexture);\n      this._updatingVideoTexture = false;\n      this.videoTextureView.visible = false;\n      if (this.videoTexture.options.source) {\n        const gl = stage.gl;\n        gl.bindTexture(gl.TEXTURE_2D, this.videoTexture.options.source);\n        gl.clearColor(0, 0, 0, 1);\n        gl.clear(gl.COLOR_BUFFER_BIT);\n      }\n    }\n  }\n  updateSettings() {\n    let settings = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    // The Component that 'consumes' the media player.\n    this._consumer = settings.consumer;\n    if (this._consumer && this._consumer.getMediaplayerSettings) {\n      // Allow consumer to add settings.\n      settings = Object.assign(settings, this._consumer.getMediaplayerSettings());\n    }\n    if (!Lightning.Utils.equalValues(this._stream, settings.stream)) {\n      if (settings.stream && settings.stream.keySystem) {\n        navigator.requestMediaKeySystemAccess(settings.stream.keySystem.id, settings.stream.keySystem.config).then(keySystemAccess => {\n          return keySystemAccess.createMediaKeys();\n        }).then(createdMediaKeys => {\n          return this.videoEl.setMediaKeys(createdMediaKeys);\n        }).then(() => {\n          if (settings.stream && settings.stream.src) this.open(settings.stream.src);\n        }).catch(() => {\n          console.error('Failed to set up MediaKeys');\n        });\n      } else if (settings.stream && settings.stream.src) {\n        // This is here to be backwards compatible, will be removed\n        // in future sdk release\n        if (Settings.get('app', 'hls')) {\n          if (!window.Hls) {\n            window.Hls = class Hls {\n              static isSupported() {\n                console.warn('hls-light not included');\n                return false;\n              }\n            };\n          }\n          if (window.Hls.isSupported()) {\n            if (!this._hls) this._hls = new window.Hls({\n              liveDurationInfinity: true\n            });\n            this._hls.loadSource(settings.stream.src);\n            this._hls.attachMedia(this.videoEl);\n            this.videoEl.style.display = 'block';\n          }\n        } else {\n          this.open(settings.stream.src);\n        }\n      } else {\n        this.close();\n      }\n      this._stream = settings.stream;\n    }\n    this._setHide(settings.hide);\n    this._setVideoArea(settings.videoPos);\n  }\n  _setHide(hide) {\n    if (this.textureMode) {\n      this.tag('Video').setSmooth('alpha', hide ? 0 : 1);\n    } else {\n      this.videoEl.style.visibility = hide ? 'hidden' : 'visible';\n    }\n  }\n  open(url) {\n    let settings = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n      hide: false,\n      videoPosition: null\n    };\n    // prep the media url to play depending on platform (mediaPlayerplugin)\n    url = mediaUrl(url);\n    this._metrics = Metrics.media(url);\n    Log.info('Playing stream', url);\n    if (this.application.noVideo) {\n      Log.info('noVideo option set, so ignoring: ' + url);\n      return;\n    }\n    // close the video when opening same url as current (effectively reloading)\n    if (this.videoEl.getAttribute('src') === url) {\n      this.close();\n    }\n    this.videoEl.setAttribute('src', url);\n\n    // force hide, then force show (in next tick!)\n    // (fixes comcast playback rollover issue)\n    this.videoEl.style.visibility = 'hidden';\n    this.videoEl.style.display = 'none';\n    setTimeout(() => {\n      this.videoEl.style.display = 'block';\n      this.videoEl.style.visibility = 'visible';\n    });\n    this._setHide(settings.hide);\n    this._setVideoArea(settings.videoPosition || [0, 0, 1920, 1080]);\n  }\n  close() {\n    // We need to pause first in order to stop sound.\n    this.videoEl.pause();\n    this.videoEl.removeAttribute('src');\n\n    // force load to reset everything without errors\n    this.videoEl.load();\n    this._clearSrc();\n    this.videoEl.style.display = 'none';\n  }\n  playPause() {\n    if (this.isPlaying()) {\n      this.doPause();\n    } else {\n      this.doPlay();\n    }\n  }\n  get muted() {\n    return this.videoEl.muted;\n  }\n  set muted(v) {\n    this.videoEl.muted = v;\n  }\n  get loop() {\n    return this.videoEl.loop;\n  }\n  set loop(v) {\n    this.videoEl.loop = v;\n  }\n  isPlaying() {\n    return this._getState() === 'Playing';\n  }\n  doPlay() {\n    this.videoEl.play();\n  }\n  doPause() {\n    this.videoEl.pause();\n  }\n  reload() {\n    var url = this.videoEl.getAttribute('src');\n    this.close();\n    this.videoEl.src = url;\n  }\n  getPosition() {\n    return Promise.resolve(this.videoEl.currentTime);\n  }\n  setPosition(pos) {\n    this.videoEl.currentTime = pos;\n  }\n  getDuration() {\n    return Promise.resolve(this.videoEl.duration);\n  }\n  seek(time) {\n    let absolute = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    if (absolute) {\n      this.videoEl.currentTime = time;\n    } else {\n      this.videoEl.currentTime += time;\n    }\n  }\n  get videoTextureView() {\n    return this.tag('Video').tag('VideoTexture');\n  }\n  get videoTexture() {\n    return this.videoTextureView.texture;\n  }\n  _setVideoArea(videoPos) {\n    if (Lightning.Utils.equalValues(this._videoPos, videoPos)) {\n      return;\n    }\n    this._videoPos = videoPos;\n    if (this.textureMode) {\n      this.videoTextureView.patch({\n        smooth: {\n          x: videoPos[0],\n          y: videoPos[1],\n          w: videoPos[2] - videoPos[0],\n          h: videoPos[3] - videoPos[1]\n        }\n      });\n    } else {\n      const precision = this.stage.getRenderPrecision();\n      this.videoEl.style.left = Math.round(videoPos[0] * precision) + 'px';\n      this.videoEl.style.top = Math.round(videoPos[1] * precision) + 'px';\n      this.videoEl.style.width = Math.round((videoPos[2] - videoPos[0]) * precision) + 'px';\n      this.videoEl.style.height = Math.round((videoPos[3] - videoPos[1]) * precision) + 'px';\n    }\n  }\n  _fireConsumer(event, args) {\n    if (this._consumer) {\n      this._consumer.fire(event, args);\n    }\n  }\n  _equalInitData(buf1, buf2) {\n    if (!buf1 || !buf2) return false;\n    if (buf1.byteLength != buf2.byteLength) return false;\n    const dv1 = new Int8Array(buf1);\n    const dv2 = new Int8Array(buf2);\n    for (let i = 0; i != buf1.byteLength; i++) if (dv1[i] != dv2[i]) return false;\n    return true;\n  }\n  error(args) {\n    this._fireConsumer('$mediaplayerError', args);\n    this._setState('');\n    return '';\n  }\n  loadeddata(args) {\n    this._fireConsumer('$mediaplayerLoadedData', args);\n  }\n  play(args) {\n    this._fireConsumer('$mediaplayerPlay', args);\n  }\n  playing(args) {\n    this._fireConsumer('$mediaplayerPlaying', args);\n    this._setState('Playing');\n  }\n  canplay(args) {\n    this.videoEl.play();\n    this._fireConsumer('$mediaplayerStart', args);\n  }\n  loadstart(args) {\n    this._fireConsumer('$mediaplayerLoad', args);\n  }\n  seeked() {\n    this._fireConsumer('$mediaplayerSeeked', {\n      currentTime: this.videoEl.currentTime,\n      duration: this.videoEl.duration || 1\n    });\n  }\n  seeking() {\n    this._fireConsumer('$mediaplayerSeeking', {\n      currentTime: this.videoEl.currentTime,\n      duration: this.videoEl.duration || 1\n    });\n  }\n  durationchange(args) {\n    this._fireConsumer('$mediaplayerDurationChange', args);\n  }\n  encrypted(args) {\n    const video = args.videoElement;\n    const event = args.event;\n    // FIXME: Double encrypted events need to be properly filtered by Gstreamer\n    if (video.mediaKeys && !this._equalInitData(this._previousInitData, event.initData)) {\n      this._previousInitData = event.initData;\n      this._fireConsumer('$mediaplayerEncrypted', args);\n    }\n  }\n  static _states() {\n    return [class Playing extends this {\n      $enter() {\n        this._startUpdatingVideoTexture();\n      }\n      $exit() {\n        this._stopUpdatingVideoTexture();\n      }\n      timeupdate() {\n        this._fireConsumer('$mediaplayerProgress', {\n          currentTime: this.videoEl.currentTime,\n          duration: this.videoEl.duration || 1\n        });\n      }\n      ended(args) {\n        this._fireConsumer('$mediaplayerEnded', args);\n        this._setState('');\n      }\n      pause(args) {\n        this._fireConsumer('$mediaplayerPause', args);\n        this._setState('Playing.Paused');\n      }\n      _clearSrc() {\n        this._fireConsumer('$mediaplayerStop', {});\n        this._setState('');\n      }\n      static _states() {\n        return [class Paused extends this {}];\n      }\n    }];\n  }\n}", "class localCookie {\n  constructor(e) {\n    return e = e || {}, this.forceCookies = e.forceCookies || !1, !0 === this._checkIfLocalStorageWorks() && !0 !== e.forceCookies ? {\n      getItem: this._getItemLocalStorage,\n      setItem: this._setItemLocalStorage,\n      removeItem: this._removeItemLocalStorage,\n      clear: this._clearLocalStorage\n    } : {\n      getItem: this._getItemCookie,\n      setItem: this._setItemCookie,\n      removeItem: this._removeItemCookie,\n      clear: this._clearCookies\n    };\n  }\n  _checkIfLocalStorageWorks() {\n    if (\"undefined\" == typeof localStorage) return !1;\n    try {\n      return localStorage.setItem(\"feature_test\", \"yes\"), \"yes\" === localStorage.getItem(\"feature_test\") && (localStorage.removeItem(\"feature_test\"), !0);\n    } catch (e) {\n      return !1;\n    }\n  }\n  _getItemLocalStorage(e) {\n    return window.localStorage.getItem(e);\n  }\n  _setItemLocalStorage(e, t) {\n    return window.localStorage.setItem(e, t);\n  }\n  _removeItemLocalStorage(e) {\n    return window.localStorage.removeItem(e);\n  }\n  _clearLocalStorage() {\n    return window.localStorage.clear();\n  }\n  _getItemCookie(e) {\n    var t = document.cookie.match(RegExp(\"(?:^|;\\\\s*)\" + function (e) {\n      return e.replace(/([.*+?\\^${}()|\\[\\]\\/\\\\])/g, \"\\\\$1\");\n    }(e) + \"=([^;]*)\"));\n    return t && \"\" === t[1] && (t[1] = null), t ? t[1] : null;\n  }\n  _setItemCookie(e, t) {\n    var o = new Date(),\n      r = new Date(o.getTime() + 15768e7);\n    document.cookie = \"\".concat(e, \"=\").concat(t, \"; expires=\").concat(r.toUTCString(), \";\");\n  }\n  _removeItemCookie(e) {\n    document.cookie = \"\".concat(e, \"=;Max-Age=-99999999;\");\n  }\n  _clearCookies() {\n    document.cookie.split(\";\").forEach(e => {\n      document.cookie = e.replace(/^ +/, \"\").replace(/=.*/, \"=;expires=Max-Age=-99999999\");\n    });\n  }\n}\nexport default localCookie;", "/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Settings from '../Settings';\nimport localCookie from 'localCookie/module/localCookie.js';\nlet namespace;\nlet lc;\nexport const initStorage = () => {\n  namespace = Settings.get('platform', 'id');\n  // todo: pass options (for example to force the use of cookies)\n  lc = new localCookie();\n};\nconst namespacedKey = key => namespace ? [namespace, key].join('.') : key;\nexport default {\n  get(key) {\n    try {\n      return JSON.parse(lc.getItem(namespacedKey(key)));\n    } catch (e) {\n      return null;\n    }\n  },\n  set(key, value) {\n    try {\n      lc.setItem(namespacedKey(key), JSON.stringify(value));\n      return true;\n    } catch (e) {\n      return false;\n    }\n  },\n  remove(key) {\n    lc.removeItem(namespacedKey(key));\n  },\n  clear() {\n    if (namespace) {\n      lc.keys().forEach(key => {\n        // remove the item if in the namespace\n        key.indexOf(namespace + '.') === 0 ? lc.removeItem(key) : null;\n      });\n    } else {\n      lc.clear();\n    }\n  }\n};", "/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport const hasRegex = /\\{\\/(.*?)\\/([igm]{0,3})\\}/g;\nexport const isWildcard = /^[!*$]$/;\nexport const hasLookupId = /\\/:\\w+?@@([0-9]+?)@@/;\nexport const isNamedGroup = /^\\/:/;\n\n/**\n * Test if a route is part regular expressed\n * and replace it for a simple character\n * @param route\n * @returns {*}\n */\nexport const stripRegex = function (route) {\n  let char = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'R';\n  // if route is part regular expressed we replace\n  // the regular expression for a character to\n  // simplify floor calculation and backtracking\n  if (hasRegex.test(route)) {\n    route = route.replace(hasRegex, char);\n  }\n  return route;\n};", "/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Create a local request register\n * @param flags\n * @returns {Map<any, any>}\n */\nexport const createRegister = flags => {\n  const reg = new Map()\n  // store user defined and router\n  // defined flags in register\n  ;\n  [...Object.keys(flags), ...Object.getOwnPropertySymbols(flags)].forEach(key => {\n    reg.set(key, flags[key]);\n  });\n  return reg;\n};", "/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { isBoolean, isObject, symbols } from '../utils/helpers';\nimport { createRegister } from '../utils/register';\nimport Log from '../../Log';\nexport default class Request {\n  constructor() {\n    let hash = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n    let navArgs = arguments.length > 1 ? arguments[1] : undefined;\n    let storeCaller = arguments.length > 2 ? arguments[2] : undefined;\n    /**\n     * Hash we navigate to\n     * @type {string}\n     * @private\n     */\n    this._hash = hash;\n\n    /**\n     * Do we store previous hash in history\n     * @type {boolean}\n     * @private\n     */\n    this._storeCaller = storeCaller;\n\n    /**\n     * Request and navigate data\n     * @type {Map}\n     * @private\n     */\n    this._register = new Map();\n\n    /**\n     * Flag if the instance is created due to\n     * this request\n     * @type {boolean}\n     * @private\n     */\n    this._isCreated = false;\n\n    /**\n     * Flag if the instance is shared between\n     * previous and current request\n     * @type {boolean}\n     * @private\n     */\n    this._isSharedInstance = false;\n\n    /**\n     * Flag if the request has been cancelled\n     * @type {boolean}\n     * @private\n     */\n    this._cancelled = false;\n\n    /**\n     * if instance is shared between requests we copy state object\n     * from instance before the new request overrides state\n     * @type {null}\n     * @private\n     */\n    this._copiedHistoryState = null;\n\n    // if there are arguments attached to navigate()\n    // we store them in new request\n    if (isObject(navArgs)) {\n      this._register = createRegister(navArgs);\n    } else if (isBoolean(navArgs)) {\n      // if second navigate() argument is explicitly\n      // set to false we prevent the calling page\n      // from ending up in history\n      this._storeCaller = navArgs;\n    }\n    // @todo: remove because we can simply check\n    // ._storeCaller property\n    this._register.set(symbols.store, this._storeCaller);\n  }\n  cancel() {\n    Log.debug('[router]:', \"cancelled \".concat(this._hash));\n    this._cancelled = true;\n  }\n  get url() {\n    return this._hash;\n  }\n  get register() {\n    return this._register;\n  }\n  get hash() {\n    return this._hash;\n  }\n  set hash(args) {\n    this._hash = args;\n  }\n  get route() {\n    return this._route;\n  }\n  set route(args) {\n    this._route = args;\n  }\n  get provider() {\n    return this._provider;\n  }\n  set provider(args) {\n    this._provider = args;\n  }\n  get providerType() {\n    return this._providerType;\n  }\n  set providerType(args) {\n    this._providerType = args;\n  }\n  set page(args) {\n    this._page = args;\n  }\n  get page() {\n    return this._page;\n  }\n  set isCreated(args) {\n    this._isCreated = args;\n  }\n  get isCreated() {\n    return this._isCreated;\n  }\n  get isSharedInstance() {\n    return this._isSharedInstance;\n  }\n  set isSharedInstance(args) {\n    this._isSharedInstance = args;\n  }\n  get isCancelled() {\n    return this._cancelled;\n  }\n  set copiedHistoryState(v) {\n    this._copiedHistoryState = v;\n  }\n  get copiedHistoryState() {\n    return this._copiedHistoryState;\n  }\n}", "/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { isFunction } from '../utils/helpers';\nexport default class Route {\n  constructor() {\n    let config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    // keep backwards compatible\n    let type = ['on', 'before', 'after'].reduce((acc, type) => {\n      return isFunction(config[type]) ? type : acc;\n    }, undefined);\n    this._cfg = config;\n    if (type) {\n      this._provider = {\n        type,\n        request: config[type]\n      };\n    }\n  }\n  get path() {\n    return this._cfg.path;\n  }\n  get component() {\n    return this._cfg.component;\n  }\n  get options() {\n    return this._cfg.options;\n  }\n  get widgets() {\n    return this._cfg.widgets;\n  }\n  get cache() {\n    return this._cfg.cache;\n  }\n  get hook() {\n    return this._cfg.hook;\n  }\n  get beforeNavigate() {\n    return this._cfg.beforeNavigate;\n  }\n  get provider() {\n    return this._provider;\n  }\n}", "/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { hasRegex, hasLookupId, isNamedGroup, stripRegex } from './regex';\nimport { routes, routeExists, bootRequest, getRoutes } from './router';\nimport Request from '../model/Request';\nimport Route from '../model/Route';\nimport { objectToQueryString, isObject, isString } from './helpers';\n\n/**\n * Simple route length calculation\n * @param route {string}\n * @returns {number} - floor\n */\nexport const getFloor = route => {\n  return stripRegex(route).split('/').length;\n};\n\n/**\n * return all stored routes that live on the same floor\n * @param floor\n * @returns {Array}\n */\nconst getRoutesByFloor = floor => {\n  const matches = [];\n  // simple filter of level candidates\n  for (let [route] of routes.entries()) {\n    if (getFloor(route) === floor) {\n      matches.push(route);\n    }\n  }\n  return matches;\n};\n\n/**\n * return a matching route by provided hash\n * hash: home/browse/12 will match:\n * route: home/browse/:categoryId\n * @param hash {string}\n * @returns {boolean|{}} - route\n */\nexport const getRouteByHash = hash => {\n  // @todo: clean up on handleHash\n  hash = hash.replace(/^#/, '');\n  const getUrlParts = /(\\/?:?[^/]+)/g;\n  // grab possible candidates from stored routes\n  const candidates = getRoutesByFloor(getFloor(hash));\n  // break hash down in chunks\n  const hashParts = hash.match(getUrlParts) || [];\n\n  // to simplify the route matching and prevent look around\n  // in our getUrlParts regex we get the regex part from\n  // route candidate and store them so that we can reference\n  // them when we perform the actual regex against hash\n  let regexStore = [];\n  let matches = candidates.filter(route => {\n    let isMatching = true;\n    // replace regex in route with lookup id => @@{storeId}@@\n    if (hasRegex.test(route)) {\n      const regMatches = route.match(hasRegex);\n      if (regMatches && regMatches.length) {\n        route = regMatches.reduce((fullRoute, regex) => {\n          const lookupId = regexStore.length;\n          fullRoute = fullRoute.replace(regex, \"@@\".concat(lookupId, \"@@\"));\n          regexStore.push(regex.substring(1, regex.length - 1));\n          return fullRoute;\n        }, route);\n      }\n    }\n    const routeParts = route.match(getUrlParts) || [];\n    for (let i = 0, j = routeParts.length; i < j; i++) {\n      const routePart = routeParts[i];\n      const hashPart = hashParts[i];\n\n      // Since we support catch-all and regex driven name groups\n      // we first test for regex lookup id and see if the regex\n      // matches the value from the hash\n      if (hasLookupId.test(routePart)) {\n        const routeMatches = hasLookupId.exec(routePart);\n        const storeId = routeMatches[1];\n        const routeRegex = regexStore[storeId];\n\n        // split regex and modifiers so we can use both\n        // to create a new RegExp\n        // eslint-disable-next-line\n        const regMatches = /\\/([^\\/]+)\\/([igm]{0,3})/.exec(routeRegex);\n        if (regMatches && regMatches.length) {\n          const expression = regMatches[1];\n          const modifiers = regMatches[2];\n          const regex = new RegExp(\"^/\".concat(expression, \"$\"), modifiers);\n          if (!regex.test(hashPart)) {\n            isMatching = false;\n          }\n        }\n      } else if (isNamedGroup.test(routePart)) {\n        // we kindly skip namedGroups because this is dynamic\n        // we only need to the static and regex drive parts\n        continue;\n      } else if (hashPart && routePart.toLowerCase() !== hashPart.toLowerCase()) {\n        isMatching = false;\n      }\n    }\n    return isMatching;\n  });\n  if (matches.length) {\n    if (matches.indexOf(hash) !== -1) {\n      const match = matches[matches.indexOf(hash)];\n      return routes.get(match);\n    } else {\n      // we give prio to static routes over dynamic\n      matches = matches.sort(a => {\n        return isNamedGroup.test(a) ? -1 : 1;\n      });\n      // would be strange if this fails\n      // but still we test\n      if (routeExists(matches[0])) {\n        return routes.get(matches[0]);\n      }\n    }\n  }\n  return false;\n};\nexport const getValuesFromHash = function () {\n  let hash = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  let path = arguments.length > 1 ? arguments[1] : undefined;\n  // replace the regex definition from the route because\n  // we already did the matching part\n  path = stripRegex(path, '');\n  const getUrlParts = /(\\/?:?[\\w%\\s:.-]+)/g;\n  const hashParts = hash.match(getUrlParts) || [];\n  const routeParts = path.match(getUrlParts) || [];\n  const getNamedGroup = /^\\/:([\\w-]+)\\/?/;\n  return routeParts.reduce((storage, value, index) => {\n    const match = getNamedGroup.exec(value);\n    if (match && match.length) {\n      storage.set(match[1], decodeURIComponent(hashParts[index].replace(/^\\//, '')));\n    }\n    return storage;\n  }, new Map());\n};\nexport const getOption = (stack, prop) => {\n  // eslint-disable-next-line\n  if (stack && stack.hasOwnProperty(prop)) {\n    return stack[prop];\n  }\n  // we explicitly return undefined since we're testing\n  // for explicit test values\n};\n\n/**\n * create and return new Route instance\n * @param config\n */\nexport const createRoute = config => {\n  // we need to provide a bit of additional logic\n  // for the bootComponent\n  if (config.path === '$') {\n    let options = {\n      preventStorage: true\n    };\n    if (isObject(config.options)) {\n      options = {\n        ...config.options,\n        ...options\n      };\n    }\n    config.options = options;\n    // if configured add reference to bootRequest\n    // as router after provider\n    if (bootRequest) {\n      config.after = bootRequest;\n    }\n  }\n  return new Route(config);\n};\n\n/**\n * Create a new Router request object\n * @param url\n * @param args\n * @param store\n * @returns {*}\n */\nexport const createRequest = (url, args, store) => {\n  return new Request(url, args, store);\n};\nexport const getHashByName = obj => {\n  if (!obj.to && !obj.name) {\n    return false;\n  }\n  const route = getRouteByName(obj.to || obj.name);\n  const hasDynamicGroup = /\\/:([\\w-]+)\\/?/;\n  let hash = route;\n\n  // if route contains dynamic group\n  // we replace them with the provided params\n  if (hasDynamicGroup.test(route)) {\n    if (obj.params) {\n      const keys = Object.keys(obj.params);\n      hash = keys.reduce((acc, key) => {\n        return acc.replace(\":\".concat(key), obj.params[key]);\n      }, route);\n    }\n    if (obj.query) {\n      return \"\".concat(hash).concat(objectToQueryString(obj.query));\n    }\n  }\n  return hash;\n};\nconst getRouteByName = name => {\n  for (let [path, route] of routes.entries()) {\n    if (route.name === name) {\n      return path;\n    }\n  }\n  return false;\n};\nexport const keepActivePageAlive = (route, request) => {\n  if (isString(route)) {\n    const routes = getRoutes();\n    if (routes.has(route)) {\n      route = routes.get(route);\n    } else {\n      return false;\n    }\n  }\n  const register = request.register;\n  const routeOptions = route.options;\n  if (register.has('keepAlive')) {\n    return register.get('keepAlive');\n  } else if (routeOptions && routeOptions.keepAlive) {\n    return routeOptions.keepAlive;\n  }\n  return false;\n};", "/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { isArray, isFunction, ucfirst } from './helpers';\nexport default (function (page) {\n  let events = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  let params = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  if (!isArray(events)) {\n    events = [events];\n  }\n  events.forEach(e => {\n    const event = \"_on\".concat(ucfirst(e));\n    if (isFunction(page[event])) {\n      page[event](params);\n    }\n  });\n});", "/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { app, widgetsHost } from './router';\nimport { ucfirst } from './helpers';\nimport emit from './emit';\nlet activeWidget = null;\nexport const getReferences = () => {\n  if (!widgetsHost) {\n    return;\n  }\n  return widgetsHost.get().reduce((storage, widget) => {\n    const key = widget.ref.toLowerCase();\n    storage[key] = widget;\n    return storage;\n  }, {});\n};\n\n/**\n * update the visibility of the available widgets\n * for the current page / route\n * @param page\n */\nexport const updateWidgets = (widgets, page) => {\n  // force lowercase lookup\n  const configured = (widgets || []).map(ref => ref.toLowerCase());\n  widgetsHost.forEach(widget => {\n    widget.visible = configured.indexOf(widget.ref.toLowerCase()) !== -1;\n    if (widget.visible) {\n      emit(widget, ['activated'], page);\n    }\n  });\n  if (app.state === 'Widgets' && activeWidget && !activeWidget.visible) {\n    app._setState('');\n  }\n};\nconst getWidgetByName = name => {\n  name = ucfirst(name);\n  return widgetsHost.getByRef(name) || false;\n};\n\n/**\n * delegate app focus to a on-screen widget\n * @param name - {string}\n */\nexport const focusWidget = name => {\n  const widget = getWidgetByName(name);\n  if (widget) {\n    setActiveWidget(widget);\n\n    // if app is already in 'Widgets' state we can assume that\n    // focus has been delegated from one widget to another so\n    // we need to set the new widget reference and trigger a\n    // new focus calculation of Lightning's focuspath\n    if (app.state === 'Widgets') {\n      app.reload(activeWidget);\n    } else {\n      app._setState('Widgets', [activeWidget]);\n    }\n  }\n};\nexport const handleRemote = (type, name) => {\n  if (type === 'widget') {\n    focusWidget(name);\n  } else if (type === 'page') {\n    restoreFocus();\n  }\n};\nexport const restoreFocus = () => {\n  activeWidget = null;\n  app._setState('');\n};\nexport const getActiveWidget = () => {\n  return activeWidget;\n};\nexport const setActiveWidget = instance => {\n  activeWidget = instance;\n};", "/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { getReferences } from './widgets';\nexport const createComponent = (stage, type) => {\n  return stage.c({\n    type,\n    visible: false,\n    widgets: getReferences()\n  });\n};", "/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { getActiveHash, getActivePage } from './router';\nimport { getOption, getRouteByHash } from './route';\nimport { isFunction, isObject, isArray, isBoolean, symbols } from './helpers';\nimport { getRouterConfig } from './router';\n\n/**\n * Simple flat array that holds the visited hashes + state Object\n * so the router can navigate back to them\n * @type {Array}\n */\nlet history = [];\nexport const updateHistory = request => {\n  const hash = getActiveHash();\n  if (!hash) {\n    return;\n  }\n\n  // navigate storage flag\n  const register = request.register;\n  const forceNavigateStore = register.get(symbols.store);\n\n  // test preventStorage on route configuration\n  const activeRoute = getRouteByHash(hash);\n  const preventStorage = getOption(activeRoute.options, 'preventStorage');\n\n  // we give prio to navigate storage flag\n  let store = isBoolean(forceNavigateStore) ? forceNavigateStore : !preventStorage;\n  if (store) {\n    const toStore = hash.replace(/^\\//, '');\n    const location = locationInHistory(toStore);\n    const stateObject = getStateObject(getActivePage(), request);\n    const routerConfig = getRouterConfig();\n\n    // store hash if it's not a part of history or flag for\n    // storage of same hash is true\n    if (location === -1 || routerConfig.get('storeSameHash')) {\n      history.push({\n        hash: toStore,\n        state: stateObject\n      });\n    } else {\n      // if we visit the same route we want to sync history\n      const prev = history.splice(location, 1)[0];\n      history.push({\n        hash: prev.hash,\n        state: stateObject\n      });\n    }\n  }\n};\nconst locationInHistory = hash => {\n  for (let i = 0; i < history.length; i++) {\n    if (history[i].hash === hash) {\n      return i;\n    }\n  }\n  return -1;\n};\nexport const getHistoryState = hash => {\n  let state = null;\n  if (history.length) {\n    // if no hash is provided we get the last\n    // pushed history record\n    if (!hash) {\n      const record = history[history.length - 1];\n      // could be null\n      state = record.state;\n    } else {\n      if (locationInHistory(hash) !== -1) {\n        const record = history[locationInHistory(hash)];\n        state = record.state;\n      }\n    }\n  }\n  return state;\n};\nexport const replaceHistoryState = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n  let hash = arguments.length > 1 ? arguments[1] : undefined;\n  if (!history.length) {\n    return;\n  }\n  const location = hash ? locationInHistory(hash) : history.length - 1;\n  if (location !== -1 && isObject(state)) {\n    history[location].state = state;\n  }\n};\nconst getStateObject = (page, request) => {\n  // if the new request shared instance with the\n  // previous request we used the copied state object\n  if (request.isSharedInstance) {\n    if (request.copiedHistoryState) {\n      return request.copiedHistoryState;\n    }\n  } else if (page && isFunction(page.historyState)) {\n    return page.historyState();\n  }\n  return null;\n};\nexport const getHistory = () => {\n  return history.slice(0);\n};\nexport const setHistory = function () {\n  let arr = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  if (isArray(arr)) {\n    history = arr;\n  }\n};", "/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Deepmerge from 'deepmerge';\nimport Lightning from '../Lightning';\nimport Locale from '../Locale';\nimport Metrics from '../Metrics';\nimport VersionLabel from '../VersionLabel';\nimport FpsCounter from '../FpsCounter';\nimport Log from '../Log';\nimport Settings from '../Settings';\nimport { initLanguage } from '../Language';\nimport Utils from '../Utils';\nimport Registry from '../Registry';\nimport { initColors } from '../Colors';\nconst packageInfo = {\n  name: \"@lightningjs/sdk\",\n  version: \"4.8.1\",\n  license: \"Apache-2.0\",\n  scripts: {\n    postinstall: \"node ./scripts/postinstall.js\",\n    lint: \"eslint '**/*.js'\",\n    release: \"npm publish --access public\"\n  },\n  \"lint-staged\": {\n    \"*.js\": [\"eslint --fix\"],\n    \"src/startApp.js\": [\"rollup -c ./rollup.config.js\"]\n  },\n  husky: {\n    hooks: {\n      \"pre-commit\": \"lint-staged\"\n    }\n  },\n  dependencies: {\n    \"@babel/polyfill\": \"^7.11.5\",\n    \"@lightningjs/core\": \"*\",\n    \"@michieljs/execute-as-promise\": \"^1.0.0\",\n    deepmerge: \"^4.2.2\",\n    localCookie: \"github:WebPlatformForEmbedded/localCookie\",\n    shelljs: \"^0.8.4\",\n    \"url-polyfill\": \"^1.1.10\",\n    \"whatwg-fetch\": \"^3.0.0\"\n  },\n  devDependencies: {\n    \"@babel/core\": \"^7.11.6\",\n    \"@babel/plugin-transform-parameters\": \"^7.10.5 \",\n    \"@babel/plugin-transform-spread\": \"^7.11.0\",\n    \"@babel/preset-env\": \"^7.11.5\",\n    \"babel-eslint\": \"^10.1.0\",\n    eslint: \"^7.10.0\",\n    \"eslint-config-prettier\": \"^6.12.0\",\n    \"eslint-plugin-prettier\": \"^3.1.4\",\n    husky: \"^4.3.0\",\n    \"lint-staged\": \"^10.4.0\",\n    prettier: \"^1.19.1\",\n    rollup: \"^1.32.1\",\n    \"rollup-plugin-babel\": \"^4.4.0\"\n  },\n  repository: {\n    type: \"git\",\n    url: \"git@github.com:rdkcentral/Lightning-SDK.git\"\n  },\n  bugs: {\n    url: \"https://github.com/rdkcentral/Lightning-SDK/issues\"\n  }\n};\nexport let AppInstance;\nexport let AppData;\nconst defaultOptions = {\n  stage: {\n    w: 1920,\n    h: 1080,\n    clearColor: 0x00000000,\n    canvas2d: false\n  },\n  debug: false,\n  defaultFontFace: 'RobotoRegular',\n  keys: {\n    8: 'Back',\n    13: 'Enter',\n    27: 'Menu',\n    37: 'Left',\n    38: 'Up',\n    39: 'Right',\n    40: 'Down',\n    174: 'ChannelDown',\n    175: 'ChannelUp',\n    178: 'Stop',\n    250: 'PlayPause',\n    191: 'Search',\n    // Use \"/\" for keyboard\n    409: 'Search'\n  }\n};\nconst customFontFaces = [];\nconst fontLoader = (fonts, store) => new Promise((resolve, reject) => {\n  fonts.map(_ref => {\n    let {\n      family,\n      url,\n      urls,\n      descriptors\n    } = _ref;\n    return () => {\n      const src = urls ? urls.map(url => {\n        return 'url(' + url + ')';\n      }) : 'url(' + url + ')';\n      const fontFace = new FontFace(family, src, descriptors || {});\n      store.push(fontFace);\n      Log.info('Loading font', family);\n      document.fonts.add(fontFace);\n      return fontFace.load();\n    };\n  }).reduce((promise, method) => {\n    return promise.then(() => method());\n  }, Promise.resolve(null)).then(resolve).catch(reject);\n});\nexport default function (App, appData, platformSettings) {\n  const {\n    width,\n    height\n  } = platformSettings;\n  if (width && height) {\n    defaultOptions.stage['w'] = width;\n    defaultOptions.stage['h'] = height;\n    defaultOptions.stage['precision'] = width / 1920;\n  }\n\n  // support for 720p browser\n  if (!width && !height && window.innerHeight === 720) {\n    defaultOptions.stage['w'] = 1280;\n    defaultOptions.stage['h'] = 720;\n    defaultOptions.stage['precision'] = 1280 / 1920;\n  }\n  return class Application extends Lightning.Application {\n    constructor(options) {\n      const config = Deepmerge(defaultOptions, options);\n      // Deepmerge breaks HTMLCanvasElement, so restore the passed in canvas.\n      if (options.stage.canvas) {\n        config.stage.canvas = options.stage.canvas;\n      }\n      super(config);\n      this.config = config;\n    }\n    static _template() {\n      return {\n        w: 1920,\n        h: 1080\n      };\n    }\n    _setup() {\n      Promise.all([this.loadFonts(App.config && App.config.fonts || App.getFonts && App.getFonts() || []),\n      // to be deprecated\n      Locale.load(App.config && App.config.locale || App.getLocale && App.getLocale()), App.language && this.loadLanguage(App.language()), App.colors && this.loadColors(App.colors())]).then(() => {\n        Metrics.app.loaded();\n        AppData = appData;\n        AppInstance = this.stage.c({\n          ref: 'App',\n          type: App,\n          zIndex: 1,\n          forceZIndexContext: !!platformSettings.showVersion || !!platformSettings.showFps\n        });\n        this.childList.a(AppInstance);\n        this._refocus();\n        Log.info('App version', this.config.version);\n        Log.info('SDK version', packageInfo.version);\n        if (platformSettings.showVersion) {\n          this.childList.a({\n            ref: 'VersionLabel',\n            type: VersionLabel,\n            version: this.config.version,\n            sdkVersion: packageInfo.version,\n            zIndex: 1\n          });\n        }\n        if (platformSettings.showFps) {\n          this.childList.a({\n            ref: 'FpsCounter',\n            type: FpsCounter,\n            zIndex: 1\n          });\n        }\n        super._setup();\n      }).catch(console.error);\n    }\n    _handleBack() {\n      this.closeApp();\n    }\n    _handleExit() {\n      this.closeApp();\n    }\n    closeApp() {\n      Log.info('Signaling App Close');\n      if (platformSettings.onClose && typeof platformSettings.onClose === 'function') {\n        platformSettings.onClose(...arguments);\n      } else {\n        this.close();\n      }\n    }\n    close() {\n      Log.info('Closing App');\n      Settings.clearSubscribers();\n      Registry.clear();\n      this.childList.remove(this.tag('App'));\n      this.cleanupFonts();\n      // force texture garbage collect\n      this.stage.gc();\n      this.destroy();\n    }\n    loadFonts(fonts) {\n      return platformSettings.fontLoader && typeof platformSettings.fontLoader === 'function' ? platformSettings.fontLoader(fonts, customFontFaces) : fontLoader(fonts, customFontFaces);\n    }\n    cleanupFonts() {\n      if ('delete' in document.fonts) {\n        customFontFaces.forEach(fontFace => {\n          Log.info('Removing font', fontFace.family);\n          document.fonts.delete(fontFace);\n        });\n      } else {\n        Log.info('No support for removing manually-added fonts');\n      }\n    }\n    loadLanguage(config) {\n      let file = Utils.asset('translations.json');\n      let language = config;\n      if (typeof language === 'object') {\n        language = config.language || null;\n        file = config.file || file;\n      }\n      return initLanguage(file, language);\n    }\n    loadColors(config) {\n      let file = Utils.asset('colors.json');\n      if (config && (typeof config === 'string' || typeof config === 'object')) {\n        file = config;\n      }\n      return initColors(file);\n    }\n    set focus(v) {\n      this._focussed = v;\n      this._refocus();\n    }\n    _getFocused() {\n      return this._focussed || this.tag('App');\n    }\n  };\n}", "/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Simple module for localization of strings.\n *\n * How to use:\n * 1. Create localization file with following JSON format:\n * {\n *   \"en\" :{\n *     \"how\": \"How do you want your egg today?\",\n *     \"boiledEgg\": \"Boiled egg\",\n *     \"softBoiledEgg\": \"Soft-boiled egg\",\n *     \"choice\": \"How to choose the egg\",\n *     \"buyQuestion\": \"I'd like to buy {0} eggs, {1} dollars each.\"\n *   },\n *\n *   \"it\": {\n *     \"how\": \"Come vuoi il tuo uovo oggi?\",\n *     \"boiledEgg\": \"Uovo sodo\",\n *     \"softBoiledEgg\": \"Uovo alla coque\",\n *     \"choice\": \"Come scegliere l'uovo\",\n *     \"buyQuestion\": \"Mi piacerebbe comprare {0} uova, {1} dollari ciascuna.\"\n *   }\n * }\n *\n * 2. Use Locale's module load method, specifying path to your localization file and set chosen language, e.g.:\n *    > Locale.load('static/locale/locale.json');\n *    > Locale.setLanguage('en');\n *\n * 3. Use localization strings:\n *    > console.log(Locale.tr.how);\n *    How do you want your egg today?\n *    > console.log(Locale.tr.boiledEgg);\n *    Boiled egg\n *\n * 4. String formatting\n *    > console.log(Locale.tr.buyQuestion.format(10, 0.5));\n *    I'd like to buy 10 eggs, 0.5 dollars each.\n */\n\nimport Log from '../Log';\nlet warned = false;\nconst deprecated = function () {\n  let force = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n  if (force === true || warned === false) {\n    console.warn([\"The 'Locale'-plugin in the Lightning-SDK is deprecated and will be removed in future releases.\", \"Please consider using the new 'Language'-plugin instead.\", 'https://rdkcentral.github.io/Lightning-SDK/#/plugins/language'].join('\\n\\n'));\n  }\n  warned = true;\n};\nclass Locale {\n  constructor() {\n    this.__enabled = false;\n  }\n\n  /**\n   * Loads translation object from external json file.\n   *\n   * @param {String} path Path to resource.\n   * @return {Promise}\n   */\n  async load(path) {\n    if (!this.__enabled) {\n      return;\n    }\n    await fetch(path).then(resp => resp.json()).then(resp => {\n      this.loadFromObject(resp);\n    });\n  }\n\n  /**\n   * Sets language used by module.\n   *\n   * @param {String} lang\n   */\n  setLanguage(lang) {\n    deprecated();\n    this.__enabled = true;\n    this.language = lang;\n  }\n\n  /**\n   * Returns reference to translation object for current language.\n   *\n   * @return {Object}\n   */\n  get tr() {\n    deprecated(true);\n    return this.__trObj[this.language];\n  }\n\n  /**\n   * Loads translation object from existing object (binds existing object).\n   *\n   * @param {Object} trObj\n   */\n  loadFromObject(trObj) {\n    deprecated();\n    const fallbackLanguage = 'en';\n    if (Object.keys(trObj).indexOf(this.language) === -1) {\n      Log.warn('No translations found for: ' + this.language);\n      if (Object.keys(trObj).indexOf(fallbackLanguage) > -1) {\n        Log.warn('Using fallback language: ' + fallbackLanguage);\n        this.language = fallbackLanguage;\n      } else {\n        const error = 'No translations found for fallback language: ' + fallbackLanguage;\n        Log.error(error);\n        throw Error(error);\n      }\n    }\n    this.__trObj = trObj;\n    for (const lang of Object.values(this.__trObj)) {\n      for (const str of Object.keys(lang)) {\n        lang[str] = new LocalizedString(lang[str]);\n      }\n    }\n  }\n}\n\n/**\n * Extended string class used for localization.\n */\nclass LocalizedString extends String {\n  /**\n   * Returns formatted LocalizedString.\n   * Replaces each placeholder value (e.g. {0}, {1}) with corresponding argument.\n   *\n   * E.g.:\n   * > new LocalizedString('{0} and {1} and {0}').format('A', 'B');\n   * A and B and A\n   *\n   * @param  {...any} args List of arguments for placeholders.\n   */\n  format() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    const sub = args.reduce((string, arg, index) => string.split(\"{\".concat(index, \"}\")).join(arg), this);\n    return new LocalizedString(sub);\n  }\n}\nexport default new Locale();", "/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Lightning from '../Lightning';\nexport default class VersionLabel extends Lightning.Component {\n  static _template() {\n    return {\n      rect: true,\n      color: 0xbb0078ac,\n      h: 40,\n      w: 100,\n      x: w => w - 50,\n      y: h => h - 50,\n      mount: 1,\n      Text: {\n        w: w => w,\n        h: h => h,\n        y: 5,\n        x: 20,\n        text: {\n          fontSize: 22,\n          lineHeight: 26\n        }\n      }\n    };\n  }\n  _firstActive() {\n    this.tag('Text').text = \"APP - v\".concat(this.version, \"\\nSDK - v\").concat(this.sdkVersion);\n    this.tag('Text').loadTexture();\n    this.w = this.tag('Text').renderWidth + 40;\n    this.h = this.tag('Text').renderHeight + 5;\n  }\n}", "/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Lightning from '../Lightning';\nimport Settings from '../Settings';\nimport Log from '../Log';\nexport default class FpsIndicator extends Lightning.Component {\n  static _template() {\n    return {\n      rect: true,\n      color: 0xffffffff,\n      texture: Lightning.Tools.getRoundRect(80, 80, 40),\n      h: 80,\n      w: 80,\n      x: 100,\n      y: 100,\n      mount: 1,\n      Background: {\n        x: 3,\n        y: 3,\n        texture: Lightning.Tools.getRoundRect(72, 72, 36),\n        color: 0xff008000\n      },\n      Counter: {\n        w: w => w,\n        h: h => h,\n        y: 10,\n        text: {\n          fontSize: 32,\n          textAlign: 'center'\n        }\n      },\n      Text: {\n        w: w => w,\n        h: h => h,\n        y: 48,\n        text: {\n          fontSize: 15,\n          textAlign: 'center',\n          text: 'FPS'\n        }\n      }\n    };\n  }\n  _setup() {\n    this.config = {\n      ...{\n        log: false,\n        interval: 500,\n        threshold: 1\n      },\n      ...Settings.get('platform', 'showFps')\n    };\n    this.fps = 0;\n    this.lastFps = this.fps - this.config.threshold;\n    const fpsCalculator = () => {\n      this.fps = ~~(1 / this.stage.dt);\n    };\n    this.stage.on('frameStart', fpsCalculator);\n    this.stage.off('framestart', fpsCalculator);\n    this.interval = setInterval(this.showFps.bind(this), this.config.interval);\n  }\n  _firstActive() {\n    this.showFps();\n  }\n  _detach() {\n    clearInterval(this.interval);\n  }\n  showFps() {\n    if (Math.abs(this.lastFps - this.fps) <= this.config.threshold) return;\n    this.lastFps = this.fps;\n    // green\n    let bgColor = 0xff008000;\n    // orange\n    if (this.fps <= 40 && this.fps > 20) bgColor = 0xffffa500;\n    // red\n    else if (this.fps <= 20) bgColor = 0xffff0000;\n    this.tag('Background').setSmooth('color', bgColor);\n    this.tag('Counter').text = \"\".concat(this.fps);\n    this.config.log && Log.info('FPS', this.fps);\n  }\n}", "/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Log from '../Log';\nimport Utils from '../Utils';\nlet meta = {};\nlet translations = {};\nlet language = null;\nlet dictionary = null;\nexport const initLanguage = function (file) {\n  let language = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n  return new Promise((resolve, reject) => {\n    fetch(file).then(response => response.json()).then(json => {\n      setTranslations(json);\n      // set language (directly or in a promise)\n      typeof language === 'object' && 'then' in language && typeof language.then === 'function' ? language.then(lang => setLanguage(lang).then(resolve).catch(reject)).catch(e => {\n        Log.error(e);\n        reject(e);\n      }) : setLanguage(language).then(resolve).catch(reject);\n    }).catch(() => {\n      const error = 'Language file ' + file + ' not found';\n      Log.error(error);\n      reject(error);\n    });\n  });\n};\nconst setTranslations = obj => {\n  if ('meta' in obj) {\n    meta = {\n      ...obj.meta\n    };\n    delete obj.meta;\n  }\n  translations = obj;\n};\nconst getLanguage = () => {\n  return language;\n};\nconst setLanguage = lng => {\n  language = null;\n  dictionary = null;\n  return new Promise((resolve, reject) => {\n    if (lng in translations) {\n      language = lng;\n    } else {\n      if ('map' in meta && lng in meta.map && meta.map[lng] in translations) {\n        language = meta.map[lng];\n      } else if ('default' in meta && meta.default in translations) {\n        const error = 'Translations for Language ' + language + ' not found. Using default language ' + meta.default;\n        Log.warn(error);\n        language = meta.default;\n      } else {\n        const error = 'Translations for Language ' + language + ' not found.';\n        Log.error(error);\n        reject(error);\n      }\n    }\n    if (language) {\n      Log.info('Setting language to', language);\n      const translationsObj = translations[language];\n      if (typeof translationsObj === 'object') {\n        dictionary = translationsObj;\n        resolve();\n      } else if (typeof translationsObj === 'string') {\n        const url = Utils.asset(translationsObj);\n        fetch(url).then(response => response.json()).then(json => {\n          // save the translations for this language (to prevent loading twice)\n          translations[language] = json;\n          dictionary = json;\n          resolve();\n        }).catch(e => {\n          const error = 'Error while fetching ' + url;\n          Log.error(error, e);\n          reject(error);\n        });\n      }\n    }\n  });\n};\nexport default {\n  translate(key) {\n    let replacements = [...arguments].slice(1);\n\n    // no replacements so just translated string\n    if (replacements.length === 0) {\n      return dictionary && dictionary[key] || key;\n    } else {\n      if (replacements.length === 1 && typeof replacements[0] === 'object') {\n        replacements = replacements.pop();\n      }\n      return Object.keys(\n      // maps array input to an object {0: 'item1', 1: 'item2'}\n      Array.isArray(replacements) ? Object.assign({}, replacements) : replacements).reduce((text, replacementKey) => {\n        return text.replace(new RegExp('{\\\\s?' + replacementKey + '\\\\s?}', 'g'), replacements[replacementKey]);\n      }, dictionary && dictionary[key] || key);\n    }\n  },\n  translations(obj) {\n    setTranslations(obj);\n  },\n  set(language) {\n    return setLanguage(language);\n  },\n  get() {\n    return getLanguage();\n  },\n  available() {\n    const languageKeys = Object.keys(translations);\n    return languageKeys.map(key => ({\n      code: key,\n      name: meta.names && meta.names[key] || key\n    }));\n  }\n};", "/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Log from '../Log';\nconst registry = {\n  eventListeners: [],\n  timeouts: [],\n  intervals: [],\n  targets: []\n};\nexport default {\n  // Timeouts\n  setTimeout(cb, timeout) {\n    for (var _len = arguments.length, params = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n      params[_key - 2] = arguments[_key];\n    }\n    const timeoutId = setTimeout(() => {\n      registry.timeouts = registry.timeouts.filter(id => id !== timeoutId);\n      cb.apply(null, params);\n    }, timeout, params);\n    Log.info('Set Timeout', 'ID: ' + timeoutId);\n    registry.timeouts.push(timeoutId);\n    return timeoutId;\n  },\n  clearTimeout(timeoutId) {\n    if (registry.timeouts.indexOf(timeoutId) > -1) {\n      registry.timeouts = registry.timeouts.filter(id => id !== timeoutId);\n      Log.info('Clear Timeout', 'ID: ' + timeoutId);\n      clearTimeout(timeoutId);\n    } else {\n      Log.error('Clear Timeout', 'ID ' + timeoutId + ' not found');\n    }\n  },\n  clearTimeouts() {\n    registry.timeouts.forEach(timeoutId => {\n      this.clearTimeout(timeoutId);\n    });\n  },\n  // Intervals\n  setInterval(cb, interval) {\n    for (var _len2 = arguments.length, params = new Array(_len2 > 2 ? _len2 - 2 : 0), _key2 = 2; _key2 < _len2; _key2++) {\n      params[_key2 - 2] = arguments[_key2];\n    }\n    const intervalId = setInterval(() => {\n      registry.intervals.filter(id => id !== intervalId);\n      cb.apply(null, params);\n    }, interval, params);\n    Log.info('Set Interval', 'ID: ' + intervalId);\n    registry.intervals.push(intervalId);\n    return intervalId;\n  },\n  clearInterval(intervalId) {\n    if (registry.intervals.indexOf(intervalId) > -1) {\n      registry.intervals = registry.intervals.filter(id => id !== intervalId);\n      Log.info('Clear Interval', 'ID: ' + intervalId);\n      clearInterval(intervalId);\n    } else {\n      Log.error('Clear Interval', 'ID ' + intervalId + ' not found');\n    }\n  },\n  clearIntervals() {\n    registry.intervals.forEach(intervalId => {\n      this.clearInterval(intervalId);\n    });\n  },\n  // Event listeners\n  addEventListener(target, event, handler) {\n    target.addEventListener(event, handler);\n    const targetIndex = registry.targets.indexOf(target) > -1 ? registry.targets.indexOf(target) : registry.targets.push(target) - 1;\n    registry.eventListeners[targetIndex] = registry.eventListeners[targetIndex] || {};\n    registry.eventListeners[targetIndex][event] = registry.eventListeners[targetIndex][event] || [];\n    registry.eventListeners[targetIndex][event].push(handler);\n    Log.info('Add eventListener', 'Target:', target, 'Event: ' + event, 'Handler:', handler.toString());\n  },\n  removeEventListener(target, event, handler) {\n    const targetIndex = registry.targets.indexOf(target);\n    if (targetIndex > -1 && registry.eventListeners[targetIndex] && registry.eventListeners[targetIndex][event] && registry.eventListeners[targetIndex][event].indexOf(handler) > -1) {\n      registry.eventListeners[targetIndex][event] = registry.eventListeners[targetIndex][event].filter(fn => fn !== handler);\n      Log.info('Remove eventListener', 'Target:', target, 'Event: ' + event, 'Handler:', handler.toString());\n      target.removeEventListener(event, handler);\n    } else {\n      Log.error('Remove eventListener', 'Not found', 'Target', target, 'Event: ' + event, 'Handler', handler.toString());\n    }\n  },\n  // if `event` is omitted, removes all registered event listeners for target\n  // if `target` is also omitted, removes all registered event listeners\n  removeEventListeners(target, event) {\n    if (target && event) {\n      const targetIndex = registry.targets.indexOf(target);\n      if (targetIndex > -1) {\n        registry.eventListeners[targetIndex][event].forEach(handler => {\n          this.removeEventListener(target, event, handler);\n        });\n      }\n    } else if (target) {\n      const targetIndex = registry.targets.indexOf(target);\n      if (targetIndex > -1) {\n        Object.keys(registry.eventListeners[targetIndex]).forEach(_event => {\n          this.removeEventListeners(target, _event);\n        });\n      }\n    } else {\n      Object.keys(registry.eventListeners).forEach(targetIndex => {\n        this.removeEventListeners(registry.targets[targetIndex]);\n      });\n    }\n  },\n  // Clear everything (to be called upon app close for proper cleanup)\n  clear() {\n    this.clearTimeouts();\n    this.clearIntervals();\n    this.removeEventListeners();\n    registry.eventListeners = [];\n    registry.timeouts = [];\n    registry.intervals = [];\n    registry.targets = [];\n  }\n};", "/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport const isObject = v => {\n  return typeof v === 'object' && v !== null;\n};\nexport const isString = v => {\n  return typeof v === 'string';\n};\nexport const getRgbaComponents = argb => {\n  return {\n    r: (argb / 65536 | 0) % 256,\n    g: (argb / 256 | 0) % 256,\n    b: argb * 1 % 256,\n    a: argb / 16777216 | 0\n  };\n};\nexport const limitWithinRange = (num, min, max) => {\n  return Math.min(Math.max(num, min), max);\n};\nexport const mergeColors = (c1, c2, p) => {\n  let r1 = (c1 / 65536 | 0) % 256;\n  let g1 = (c1 / 256 | 0) % 256;\n  let b1 = c1 % 256;\n  let a1 = c1 / 16777216 | 0;\n  let r2 = (c2 / 65536 | 0) % 256;\n  let g2 = (c2 / 256 | 0) % 256;\n  let b2 = c2 % 256;\n  let a2 = c2 / 16777216 | 0;\n  let r = r1 * p + r2 * (1 - p);\n  let g = g1 * p + g2 * (1 - p);\n  let b = b1 * p + b2 * (1 - p);\n  let a = a1 * p + a2 * (1 - p);\n  return Math.round(a) * 16777216 + Math.round(r) * 65536 + Math.round(g) * 256 + Math.round(b);\n};\nexport const calculateAlpha = (argb, p) => {\n  if (p > 1) {\n    p /= 100;\n  } else if (p < 0) {\n    p = 0;\n  }\n  let r = (argb / 65536 | 0) % 256;\n  let g = (argb / 256 | 0) % 256;\n  let b = argb % 256;\n  return (r << 16) + (g << 8) + b + (p * 255 | 0) * 16777216;\n};\nexport const mergeColorAlpha = (c, alpha) => {\n  let a = (c / 16777216 | 0) * alpha | 0;\n  return ((c >> 16 & 0xff) * a / 255 & 0xff) + ((c & 0xff00) * a / 255 & 0xff00) + (((c & 0xff) << 16) * a / 255 & 0xff0000) + (a << 24);\n};\nconst getArgbNumber = rgba => {\n  rgba[0] = Math.max(0, Math.min(255, rgba[0]));\n  rgba[1] = Math.max(0, Math.min(255, rgba[1]));\n  rgba[2] = Math.max(0, Math.min(255, rgba[2]));\n  rgba[3] = Math.max(0, Math.min(255, rgba[3]));\n  let v = ((rgba[3] | 0) << 24) + ((rgba[0] | 0) << 16) + ((rgba[1] | 0) << 8) + (rgba[2] | 0);\n  if (v < 0) {\n    v = 0xffffffff + v + 1;\n  }\n  return v;\n};\nexport const argbToHsva = argb => {\n  const color = getRgbaComponents(argb);\n  let r = color.r / 255;\n  let g = color.g / 255;\n  let b = color.b / 255;\n  let h = 0;\n  let s = 0;\n  const cMax = Math.max(r, g, b);\n  const cMin = Math.min(r, g, b);\n  const delta = cMax - cMin;\n\n  //calculate hue\n  if (delta < 0.00001) {\n    h = 0;\n  } else if (cMax !== 0 || cMin !== 0) {\n    if (r === cMax) {\n      h = (60 * ((g - b) / delta) + 360) % 360;\n    } else if (g === cMax) {\n      h = (60 * ((b - r) / delta) + 120) % 360;\n    } else if (b === cMax) {\n      h = (60 * ((r - g) / delta) + 240) % 360;\n    }\n  }\n\n  //calc saturation\n  if (cMax > 0) {\n    s = delta / cMax;\n  }\n  return {\n    h,\n    s,\n    v: cMax,\n    a: color.a / 255\n  };\n};\nexport const hsvaToArgb = color => {\n  const h = color.h;\n  const c = color.v * color.s;\n  const m = color.v - c;\n  const x = c * (1.0 - Math.abs(h / 60 % 2 - 1));\n  let r = 0;\n  let g = 0;\n  let b = 0;\n  if (0 <= h && h < 60) {\n    r = c;\n    g = x;\n  } else if (60 <= h && h < 120) {\n    r = x;\n    g = c;\n  } else if (120 <= h && h < 180) {\n    g = c;\n    b = x;\n  } else if (180 <= h && h < 240) {\n    g = x;\n    b = c;\n  } else if (240 <= h && h < 300) {\n    r = x;\n    b = c;\n  } else if (300 <= h && h < 360) {\n    r = c;\n    b = x;\n  }\n  r = Math.round((r + m) * 255.0);\n  g = Math.round((g + m) * 255.0);\n  b = Math.round((b + m) * 255.0);\n  return getArgbNumber([r, g, b, color.a * 255]);\n};\nexport const argbToHSLA = argb => {\n  const col = getRgbaComponents(argb);\n  const r = col.r / 255;\n  const g = col.g / 255;\n  const b = col.b / 255;\n  const max = Math.max(r, g, b);\n  const min = Math.min(r, g, b);\n  let h = 0;\n  let s = 0;\n  const l = (min + max) * 0.5;\n  if (l > 0) {\n    const maxMin = max - min;\n    if (maxMin > 0) {\n      const r2 = (max - r) / maxMin;\n      const g2 = (max - g) / maxMin;\n      const b2 = (max - b) / maxMin;\n      if (l < 0.5) {\n        s = max + min;\n      } else {\n        s = 2 - max - min;\n      }\n      if (r === max && g === min) {\n        h = 5.0 + b2;\n      } else if (r === max) {\n        h = 1.0 - g2;\n      } else if (g === max && b === min) {\n        h = 1.0 + r2;\n      } else if (g === max) {\n        h = 3.0 - b2;\n      } else if (b === max) {\n        h = 3.0 + g2;\n      } else {\n        h = 5.0 - r2;\n      }\n      h = h / 6;\n    }\n  }\n  return {\n    h: h % 1,\n    s,\n    l,\n    a: col.a\n  };\n};\nexport const hslaToARGB = hsla => {\n  let r = 1;\n  let g = 1;\n  let b = 1;\n  let h = hsla.h;\n  let s = hsla.s;\n  let l = hsla.l;\n  if (h < 0) {\n    h += 1;\n  }\n  let max = 0;\n  if (l <= 0.5) {\n    max = l * (1.0 + s);\n  } else {\n    max = l + s - l * s;\n  }\n  if (max > 0) {\n    h *= 6.0;\n    const min = l + l - max;\n    const minMax = (max - min) / max;\n    const sextant = Math.floor(h);\n    const fract = h - sextant;\n    const minMaxFract = max * minMax * fract;\n    const mid1 = min + minMaxFract;\n    const mid2 = max - minMaxFract;\n    if (sextant === 0) {\n      r = max;\n      g = mid1;\n      b = min;\n    }\n    if (sextant === 1) {\n      r = mid2;\n      g = max;\n      b = min;\n    }\n    if (sextant === 2) {\n      r = min;\n      g = max;\n      b = mid1;\n    }\n    if (sextant === 3) {\n      r = min;\n      g = mid2;\n      b = max;\n    }\n    if (sextant === 4) {\n      r = mid1;\n      g = min;\n      b = max;\n    }\n    if (sextant === 5) {\n      r = max;\n      g = min;\n      b = mid2;\n    }\n  }\n  return getArgbNumber([Math.floor(r * 255), Math.floor(g * 255), Math.floor(b * 255), hsla.a]);\n};", "/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Log from '../Log';\nimport { mergeColors, calculateAlpha, isObject, isString, argbToHSLA, hslaToARGB } from './utils.js';\nlet colors = {\n  white: '#ffffff',\n  black: '#000000',\n  red: '#ff0000',\n  green: '#00ff00',\n  blue: '#0000ff',\n  yellow: '#feff00',\n  cyan: '#00feff',\n  magenta: '#ff00ff'\n};\nconst normalizedColors = {\n  //store for normalized colors\n};\nconst addColors = (colorsToAdd, value) => {\n  if (isObject(colorsToAdd)) {\n    // clean up normalizedColors if they exist in the to be added colors\n    Object.keys(colorsToAdd).forEach(color => cleanUpNormalizedColors(color));\n    colors = Object.assign({}, colors, colorsToAdd);\n  } else if (isString(colorsToAdd) && value) {\n    cleanUpNormalizedColors(colorsToAdd);\n    colors[colorsToAdd] = value;\n  }\n};\nconst cleanUpNormalizedColors = color => {\n  for (let c in normalizedColors) {\n    if (c.indexOf(color) > -1) {\n      delete normalizedColors[c];\n    }\n  }\n};\nexport const initColors = file => {\n  return new Promise((resolve, reject) => {\n    if (typeof file === 'object') {\n      addColors(file);\n      resolve();\n    }\n    fetch(file).then(response => response.json()).then(json => {\n      addColors(json);\n      resolve();\n    }).catch(() => {\n      const error = 'Colors file ' + file + ' not found';\n      Log.error(error);\n      reject(error);\n    });\n  });\n};\nconst normalizeColorToARGB = color => {\n  let targetColor = normalizedColors[color] || colors[color] || color;\n  if (!targetColor) {\n    targetColor = color;\n  }\n  const check = /^#([0-9A-F]{3}|[0-9A-F]{6})$/i;\n  if (isString(targetColor) && check.test(targetColor)) {\n    let hex = check.exec(targetColor)[1];\n    if (hex.length === 3) {\n      hex = hex.split('').map(value => {\n        return value + value;\n      }).join('');\n    }\n    targetColor = \"0xff\".concat(hex) * 1;\n  }\n  if (!normalizedColors[color]) {\n    normalizedColors[color] = targetColor;\n  }\n  return targetColor || 0xffffffff;\n};\nexport default color => {\n  return Color.generate(color);\n};\nconst Color = {\n  color: null,\n  generate: function () {\n    let value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.color;\n    if (normalizedColors[value]) {\n      this.color = normalizedColors[value];\n    } else {\n      this.color = normalizeColorToARGB(value);\n    }\n    return this;\n  },\n  get() {\n    return this.color;\n  },\n  alpha: function (percentage) {\n    this.color = calculateAlpha(this.color, Math.abs(percentage));\n    return this;\n  },\n  darker(percentage) {\n    const hsl = argbToHSLA(this.color);\n    hsl.l = hsl.l * (1 - percentage);\n    this.color = hslaToARGB(hsl);\n    return this;\n  },\n  lighter(percentage) {\n    const hsl = argbToHSLA(this.color);\n    hsl.l = hsl.l + (1 - hsl.l) * percentage;\n    this.color = hslaToARGB(hsl);\n    return this;\n  },\n  saturation(percentage) {\n    const hsl = argbToHSLA(this.color);\n    hsl.s = percentage;\n    this.color = hslaToARGB(hsl);\n    return this;\n  },\n  lightness(percentage) {\n    const hsl = argbToHSLA(this.color);\n    hsl.l = percentage;\n    this.color = hslaToARGB(hsl);\n    return this;\n  },\n  hue(degrees) {\n    const hsl = argbToHSLA(this.color);\n    hsl.h = degrees;\n    this.color = hslaToARGB(hsl);\n    return this;\n  },\n  mix(argb, p) {\n    this.color = mergeColors(this.color, argb, p);\n    return this;\n  }\n};", "/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { getConfigMap, isArray, isBoolean, isComponentConstructor, isFunction, isPage, symbols, cleanHash } from './helpers';\nimport { step, navigateQueue } from '../index';\nimport { createRoute, getOption } from './route';\nimport { createComponent } from './components';\nimport Log from '../../Log';\nimport { isWildcard } from './regex';\nimport emit from './emit';\nimport { updateWidgets } from './widgets';\nimport { setHistory, updateHistory } from './history';\nimport { AppInstance } from '../../Application';\n\n/**\n * @type {Lightning.Application}\n */\nexport let application;\n\n/**\n * Actual instance of the app\n * @type {Lightning.Component}\n */\nexport let app;\n\n/**\n * Component that hosts all routed pages\n * @type {Lightning.Component}\n */\nexport let pagesHost;\n\n/**\n * @type {Lightning.Stage}\n */\nexport let stage;\n\n/**\n * Platform driven Router configuration\n * @type {Map<string>}\n */\nexport let routerConfig;\n\n/**\n * Component that hosts all attached widgets\n * @type {Lightning.Component}\n */\nexport let widgetsHost;\n\n/**\n * Hash we point the browser to when we boot the app\n * and there is no deep-link provided\n * @type {string|Function}\n */\nlet rootHash;\n\n/**\n * Boot request will fire before app start\n * can be used to execute some global logic\n * and can be configured\n */\nexport let bootRequest;\n\n/**\n * Flag if we need to update the browser location hash.\n * Router can work without.\n * @type {boolean}\n */\nexport let updateHash = true;\n\n/**\n * Will be called before a route starts, can be overridden\n * via routes config\n * @param from - route we came from\n * @param to - route we navigate to\n * @returns {Promise<*>}\n */\n// eslint-disable-next-line\nexport let beforeEachRoute = async (from, to) => {\n  return true;\n};\n\n/**\n *  * Will be called after a navigate successfully resolved,\n * can be overridden via routes config\n */\nexport let afterEachRoute = () => {};\n\n/**\n * All configured routes\n * @type {Map<string, object>}\n */\nexport let routes = new Map();\n\n/**\n * Store all page components per route\n * @type {Map<string, object>}\n */\nexport let components = new Map();\n\n/**\n * Flag if router has been initialised\n * @type {boolean}\n */\nlet initialised = false;\n\n/**\n * Current page being rendered on screen\n * @type {null}\n */\nlet activePage = null;\nlet activeHash;\nlet activeRoute;\n\n/**\n *  During the process of a navigation request a new\n *  request can start, to prevent unwanted behaviour\n *  the navigate()-method stores the last accepted hash\n *  so we can invalidate any prior requests\n */\nlet lastAcceptedHash;\n\n/**\n * With on()-data providing behaviour the Router forced the App\n * in a Loading state. When the data-provider resolves we want to\n * change the state back to where we came from\n */\nlet previousState;\nconst mixin = app => {\n  // by default the Router Baseclass provides the component\n  // reference in which we store our pages\n  if (app.pages) {\n    pagesHost = app.pages.childList;\n  }\n  // if the app is using widgets we grab refs\n  // and hide all the widgets\n  if (app.widgets && app.widgets.children) {\n    widgetsHost = app.widgets.childList;\n    // hide all widgets on boot\n    widgetsHost.forEach(w => w.visible = false);\n  }\n  app._handleBack = e => {\n    step(-1);\n    e.preventDefault();\n  };\n};\nexport const bootRouter = (config, instance) => {\n  let {\n    appInstance,\n    routes\n  } = config;\n\n  // if instance is provided and it's and Lightning Component instance\n  if (instance && isPage(instance)) {\n    app = instance;\n  }\n  if (!app) {\n    app = appInstance || AppInstance;\n  }\n  application = app.application;\n  pagesHost = application.childList;\n  stage = app.stage;\n  routerConfig = getConfigMap();\n  mixin(app);\n  if (isArray(routes)) {\n    setup(config);\n  } else if (isFunction(routes)) {\n    console.warn('[Router]: Calling Router.route() directly is deprecated.');\n    console.warn('Use object config: https://rdkcentral.github.io/Lightning-SDK/#/plugins/router/configuration');\n  }\n};\nconst setup = config => {\n  if (!initialised) {\n    init(config);\n  }\n  config.routes.forEach(r => {\n    const path = cleanHash(r.path);\n    if (!routeExists(path)) {\n      const route = createRoute(r);\n      routes.set(path, route);\n      // if route has a configured component property\n      // we store it in a different map to simplify\n      // the creating and destroying per route\n      if (route.component) {\n        let type = route.component;\n        if (isComponentConstructor(type)) {\n          if (!routerConfig.get('lazyCreate')) {\n            type = createComponent(stage, type);\n            pagesHost.a(type);\n          }\n        }\n        components.set(path, type);\n      }\n    } else {\n      console.error(\"\".concat(path, \" already exists in routes configuration\"));\n    }\n  });\n};\nconst init = config => {\n  rootHash = config.root;\n  if (isFunction(config.boot)) {\n    bootRequest = config.boot;\n  }\n  if (isBoolean(config.updateHash)) {\n    updateHash = config.updateHash;\n  }\n  if (isFunction(config.beforeEachRoute)) {\n    beforeEachRoute = config.beforeEachRoute;\n  }\n  if (isFunction(config.afterEachRoute)) {\n    afterEachRoute = config.afterEachRoute;\n  }\n  if (config.bootComponent) {\n    console.warn('[Router]: Boot Component is now available as a special router: https://rdkcentral.github.io/Lightning-SDK/#/plugins/router/configuration?id=special-routes');\n    console.warn('[Router]: setting { bootComponent } property will be deprecated in a future release');\n    if (isPage(config.bootComponent)) {\n      config.routes.push({\n        path: '$',\n        component: config.bootComponent,\n        // we try to assign the bootRequest as after data-provider\n        // so it will behave as any other component\n        after: bootRequest || null,\n        options: {\n          preventStorage: true\n        }\n      });\n    } else {\n      console.error(\"[Router]: \".concat(config.bootComponent, \" is not a valid boot component\"));\n    }\n  }\n  initialised = true;\n};\nexport const storeComponent = (route, type) => {\n  if (components.has(route)) {\n    components.set(route, type);\n  }\n};\nexport const getComponent = route => {\n  if (components.has(route)) {\n    return components.get(route);\n  }\n  return null;\n};\n/**\n * Test if router needs to update browser location hash\n * @returns {boolean}\n */\nexport const mustUpdateLocationHash = () => {\n  if (!routerConfig || !routerConfig.size) {\n    return false;\n  }\n  // we need support to either turn change hash off\n  // per platform or per app\n  const updateConfig = routerConfig.get('updateHash');\n  return !(isBoolean(updateConfig) && !updateConfig || isBoolean(updateHash) && !updateHash);\n};\n\n/**\n * Will be called when a new navigate() request has completed\n * and has not been expired due to it's async nature\n * @param request\n */\nexport const onRequestResolved = request => {\n  const hash = request.hash;\n  const route = request.route;\n  const register = request.register;\n  const page = request.page;\n\n  // clean up history if modifier is set\n  if (getOption(route.options, 'clearHistory')) {\n    setHistory([]);\n  } else if (hash && !isWildcard.test(route.path)) {\n    updateHistory(request);\n  }\n\n  // we only update the stackLocation if a route\n  // is not expired before it resolves\n  storeComponent(route.path, page);\n  if (request.isSharedInstance || !request.isCreated) {\n    emit(page, 'changed');\n  } else if (request.isCreated) {\n    emit(page, 'mounted');\n  }\n\n  // only update widgets if we have a host\n  if (widgetsHost) {\n    updateWidgets(route.widgets, page);\n  }\n\n  // we want to clean up if there is an\n  // active page that is not being shared\n  // between current and previous route\n  if (getActivePage() && !request.isSharedInstance) {\n    cleanUp(activePage, request);\n  }\n\n  // provide history object to active page\n  if (register.get(symbols.historyState) && isFunction(page.historyState)) {\n    page.historyState(register.get(symbols.historyState));\n  }\n  setActivePage(page);\n  activeHash = request.hash;\n  activeRoute = route.path;\n\n  // cleanup all cancelled requests\n  for (let request of navigateQueue.values()) {\n    if (request.isCancelled && request.hash) {\n      navigateQueue.delete(request.hash);\n    }\n  }\n  afterEachRoute(request);\n  Log.info('[route]:', route.path);\n  Log.info('[hash]:', hash);\n};\nconst cleanUp = (page, request) => {\n  const route = activeRoute;\n  const register = request.register;\n  const lazyDestroy = routerConfig.get('lazyDestroy');\n  const destroyOnBack = routerConfig.get('destroyOnHistoryBack');\n  const keepAlive = register.get('keepAlive');\n  const isFromHistory = register.get(symbols.backtrack);\n  let doCleanup = false;\n\n  // if this request is executed due to a step back in history\n  // and we have configured to destroy active page when we go back\n  // in history or lazyDestory is enabled\n  if (isFromHistory && (destroyOnBack || lazyDestroy)) {\n    doCleanup = true;\n  }\n\n  // clean up if lazyDestroy is enabled and the keepAlive flag\n  // in navigation register is false\n  if (lazyDestroy && !keepAlive) {\n    doCleanup = true;\n  }\n\n  // if the current and new request share the same route blueprint\n  if (activeRoute === request.route.path) {\n    doCleanup = true;\n  }\n  if (doCleanup) {\n    // grab original class constructor if\n    // statemachine routed else store constructor\n    storeComponent(route, page._routedType || page.constructor);\n\n    // actual remove of page from memory\n    pagesHost.remove(page);\n\n    // force texture gc() if configured\n    // so we can cleanup textures in the same tick\n    if (routerConfig.get('gcOnUnload')) {\n      stage.gc();\n    }\n  } else {\n    // If we're not removing the page we need to\n    // reset it's properties\n    page.patch({\n      x: 0,\n      y: 0,\n      scale: 1,\n      alpha: 1,\n      visible: false\n    });\n  }\n};\nexport const getActiveHash = () => {\n  return activeHash;\n};\nexport const setActiveHash = hash => {\n  activeHash = hash;\n};\nexport const setActivePage = page => {\n  activePage = page;\n};\nexport const getActivePage = () => {\n  return activePage;\n};\nexport const getActiveRoute = () => {\n  return activeRoute;\n};\nexport const getLastHash = () => {\n  return lastAcceptedHash;\n};\nexport const setLastHash = hash => {\n  lastAcceptedHash = hash;\n};\nexport const setPreviousState = state => {\n  previousState = state;\n};\nexport const getPreviousState = () => {\n  return previousState;\n};\nexport const routeExists = key => {\n  return routes.has(key);\n};\nexport const getRootHash = () => {\n  return rootHash;\n};\nexport const getBootRequest = () => {\n  return bootRequest;\n};\nexport const getRouterConfig = () => {\n  return routerConfig;\n};\nexport const getRoutes = () => {\n  return routes;\n};", "/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Lightning from '../../Lightning';\nimport Settings from '../../Settings';\nimport { getActiveHash } from './router';\nimport { getResumeHash } from '../index';\nexport const isFunction = v => {\n  return typeof v === 'function';\n};\nexport const isObject = v => {\n  return typeof v === 'object' && v !== null;\n};\nexport const isBoolean = v => {\n  return typeof v === 'boolean';\n};\nexport const isPage = v => {\n  if (v instanceof Lightning.Element || isComponentConstructor(v)) {\n    return true;\n  }\n  return false;\n};\nexport const isComponentConstructor = type => {\n  return type.prototype && 'isComponent' in type.prototype;\n};\nexport const isArray = v => {\n  return Array.isArray(v);\n};\nexport const ucfirst = v => {\n  return \"\".concat(v.charAt(0).toUpperCase()).concat(v.slice(1));\n};\nexport const isString = v => {\n  return typeof v === 'string';\n};\nexport const isPromise = method => {\n  let result;\n  if (isFunction(method)) {\n    try {\n      result = method.apply(null);\n    } catch (e) {\n      result = e;\n    }\n  } else {\n    result = method;\n  }\n  return isObject(result) && isFunction(result.then);\n};\nexport const cleanHash = function () {\n  let hash = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  return hash.replace(/^#/, '').replace(/\\/+$/, '');\n};\nexport const getConfigMap = () => {\n  const routerSettings = Settings.get('platform', 'router');\n  const isObj = isObject(routerSettings);\n  return ['backtrack', 'gcOnUnload', 'destroyOnHistoryBack', 'lazyCreate', 'lazyDestroy', 'reuseInstance', 'autoRestoreRemote', 'numberNavigation', 'updateHash', 'storeSameHash'].reduce((config, key) => {\n    config.set(key, isObj ? routerSettings[key] : Settings.get('platform', key));\n    return config;\n  }, new Map());\n};\nexport const incorrectParams = (cb, route) => {\n  const isIncorrect = /^\\w*?\\s?\\(\\s?\\{.*?\\}\\s?\\)/i;\n  if (isIncorrect.test(cb.toString())) {\n    console.warn([\"DEPRECATION: The data-provider for route: \".concat(route, \" is not correct.\"), '\"page\" is no longer a property of the params object but is now the first function parameter: ', 'https://github.com/rdkcentral/Lightning-SDK/blob/feature/router/docs/plugins/router/dataproviding.md#data-providing', \"It's supported for now but will be removed in a future release.\"].join('\\n'));\n    return true;\n  }\n  return false;\n};\nexport const getQueryStringParams = function () {\n  let hash = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : getActiveHash();\n  const resumeHash = getResumeHash();\n  if ((hash === '$' || !hash) && resumeHash) {\n    if (isString(resumeHash)) {\n      hash = resumeHash;\n    }\n  }\n  let parse = '';\n  const getQuery = /([?&].*)/;\n  const matches = getQuery.exec(hash);\n  const params = {};\n  if (document.location && document.location.search) {\n    parse = document.location.search;\n  }\n  if (matches && matches.length) {\n    let hashParams = matches[1];\n    if (parse) {\n      // if location.search is not empty we\n      // remove the leading ? to create a\n      // valid string\n      hashParams = hashParams.replace(/^\\?/, '');\n      // we parse hash params last so they we can always\n      // override search params with hash params\n      parse = \"\".concat(parse, \"&\").concat(hashParams);\n    } else {\n      parse = hashParams;\n    }\n  }\n  if (parse) {\n    const urlParams = new URLSearchParams(parse);\n    for (const [key, value] of urlParams.entries()) {\n      params[key] = value;\n    }\n    return params;\n  } else {\n    return false;\n  }\n};\nexport const objectToQueryString = obj => {\n  if (!isObject(obj)) {\n    return '';\n  }\n  return '?' + Object.keys(obj).map(key => {\n    return \"\".concat(key, \"=\").concat(obj[key]);\n  }).join('&');\n};\nexport const symbols = {\n  route: Symbol('route'),\n  hash: Symbol('hash'),\n  store: Symbol('store'),\n  fromHistory: Symbol('fromHistory'),\n  expires: Symbol('expires'),\n  resume: Symbol('resume'),\n  backtrack: Symbol('backtrack'),\n  historyState: Symbol('historyState'),\n  queryParams: Symbol('queryParams')\n};", "/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { symbols, getQueryStringParams } from './helpers';\nimport { app, routes, routeExists } from './router';\nimport { getValuesFromHash } from './route';\nimport emit from './emit';\nexport let previousState;\nexport const dataHooks = {\n  on: request => {\n    previousState = app.state || '';\n    app._setState('Loading');\n    return execProvider(request);\n  },\n  before: request => {\n    return execProvider(request);\n  },\n  after: request => {\n    try {\n      execProvider(request, true);\n    } catch (e) {\n      // for now we fail silently\n    }\n    return Promise.resolve();\n  }\n};\nconst execProvider = (request, emitProvided) => {\n  const route = request.route;\n  const provider = route.provider;\n  const expires = route.cache ? route.cache * 1000 : 0;\n  const params = addPersistData(request);\n  return provider.request(request.page, {\n    ...params\n  }).then(() => {\n    request.page[symbols.expires] = Date.now() + expires;\n    if (emitProvided) {\n      emit(request.page, 'dataProvided');\n    }\n  });\n};\nexport const addPersistData = _ref => {\n  let {\n    page,\n    route,\n    hash,\n    register = new Map()\n  } = _ref;\n  const urlValues = getValuesFromHash(hash, route.path);\n  const queryParams = getQueryStringParams(hash);\n  const pageData = new Map([...urlValues, ...register]);\n  const params = {};\n\n  // make dynamic url data available to the page\n  // as instance properties\n  for (let [name, value] of pageData) {\n    params[name] = value;\n  }\n  if (queryParams) {\n    params[symbols.queryParams] = queryParams;\n  }\n\n  // check navigation register for persistent data\n  if (register.size) {\n    const obj = {};\n    for (let [k, v] of register) {\n      obj[k] = v;\n    }\n    page.persist = obj;\n  }\n\n  // make url data and persist data available\n  // via params property\n  page.params = params;\n  emit(page, ['urlParams'], params);\n  return params;\n};\n\n/**\n * Test if page passed cache-time\n * @param page\n * @returns {boolean}\n */\nexport const isPageExpired = page => {\n  if (!page[symbols.expires]) {\n    return false;\n  }\n  const expires = page[symbols.expires];\n  const now = Date.now();\n  return now >= expires;\n};\nexport const hasProvider = path => {\n  if (routeExists(path)) {\n    const record = routes.get(path);\n    return !!record.provider;\n  }\n  return false;\n};\nexport const getProvider = route => {\n  // @todo: fix, route already is passed in\n  if (routeExists(route.path)) {\n    const {\n      provider\n    } = routes.get(route.path);\n    return {\n      type: provider.type,\n      provider: provider.request\n    };\n  }\n};", "/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst fade = (i, o) => {\n  return new Promise(resolve => {\n    i.patch({\n      alpha: 0,\n      visible: true,\n      smooth: {\n        alpha: [1, {\n          duration: 0.5,\n          delay: 0.1\n        }]\n      }\n    });\n    // resolve on y finish\n    i.transition('alpha').on('finish', () => {\n      if (o) {\n        o.visible = false;\n      }\n      resolve();\n    });\n  });\n};\nconst crossFade = (i, o) => {\n  return new Promise(resolve => {\n    i.patch({\n      alpha: 0,\n      visible: true,\n      smooth: {\n        alpha: [1, {\n          duration: 0.5,\n          delay: 0.1\n        }]\n      }\n    });\n    if (o) {\n      o.patch({\n        smooth: {\n          alpha: [0, {\n            duration: 0.5,\n            delay: 0.3\n          }]\n        }\n      });\n    }\n    // resolve on y finish\n    i.transition('alpha').on('finish', () => {\n      resolve();\n    });\n  });\n};\nconst moveOnAxes = (axis, direction, i, o) => {\n  const bounds = axis === 'x' ? 1920 : 1080;\n  return new Promise(resolve => {\n    i.patch({\n      [\"\".concat(axis)]: direction ? bounds * -1 : bounds,\n      visible: true,\n      smooth: {\n        [\"\".concat(axis)]: [0, {\n          duration: 0.4,\n          delay: 0.2\n        }]\n      }\n    });\n    // out is optional\n    if (o) {\n      o.patch({\n        [\"\".concat(axis)]: 0,\n        smooth: {\n          [\"\".concat(axis)]: [direction ? bounds : bounds * -1, {\n            duration: 0.4,\n            delay: 0.2\n          }]\n        }\n      });\n    }\n    // resolve on y finish\n    i.transition(axis).on('finish', () => {\n      resolve();\n    });\n  });\n};\nconst up = (i, o) => {\n  return moveOnAxes('y', 0, i, o);\n};\nconst down = (i, o) => {\n  return moveOnAxes('y', 1, i, o);\n};\nconst left = (i, o) => {\n  return moveOnAxes('x', 0, i, o);\n};\nconst right = (i, o) => {\n  return moveOnAxes('x', 1, i, o);\n};\nexport default {\n  fade,\n  crossFade,\n  up,\n  down,\n  left,\n  right\n};", "/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { getRouterConfig } from './router';\nimport { isPromise, isString } from './helpers';\nimport Transitions from '../transitions';\n\n/**\n * execute transition between new / old page and\n * toggle the defined widgets\n * @todo: platform override default transition\n * @param pageIn\n * @param pageOut\n */\nexport const executeTransition = function (pageIn) {\n  let pageOut = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n  const transition = pageIn.pageTransition || pageIn.easing;\n  const hasCustomTransitions = !!(pageIn.smoothIn || pageIn.smoothInOut || transition);\n  const transitionsDisabled = getRouterConfig().get('disableTransitions');\n  if (pageIn.easing) {\n    console.warn('easing() method is deprecated and will be removed. Use pageTransition()');\n  }\n\n  // default behaviour is a visibility toggle\n  if (!hasCustomTransitions || transitionsDisabled) {\n    pageIn.visible = true;\n    if (pageOut) {\n      pageOut.visible = false;\n    }\n    return Promise.resolve();\n  }\n  if (transition) {\n    let type;\n    try {\n      type = transition.call(pageIn, pageIn, pageOut);\n    } catch (e) {\n      type = 'crossFade';\n    }\n    if (isPromise(type)) {\n      return type;\n    }\n    if (isString(type)) {\n      const fn = Transitions[type];\n      if (fn) {\n        return fn(pageIn, pageOut);\n      }\n    }\n\n    // keep backwards compatible for now\n    if (pageIn.smoothIn) {\n      // provide a smooth function that resolves itself\n      // on transition finish\n      const smooth = function (p, v) {\n        let args = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n        return new Promise(resolve => {\n          pageIn.visible = true;\n          pageIn.setSmooth(p, v, args);\n          pageIn.transition(p).on('finish', () => {\n            resolve();\n          });\n        });\n      };\n      return pageIn.smoothIn({\n        pageIn,\n        smooth\n      });\n    }\n  }\n  return Transitions.crossFade(pageIn, pageOut);\n};", "/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { app, getComponent, onRequestResolved, getLastHash, pagesHost, stage, getPreviousState, getActivePage, routerConfig, routeExists } from './router';\nimport Log from '../../Log';\nimport { isBoolean, isComponentConstructor, isFunction, symbols } from './helpers';\nimport { getProvider, hasProvider, isPageExpired, dataHooks, addPersistData } from './provider';\nimport { createComponent } from './components';\nimport { executeTransition } from './transition';\nimport { getActiveWidget } from './widgets';\nimport emit from './emit';\nimport { getOption } from './route';\nimport { navigate } from '../index';\nimport { setHistory, updateHistory } from './history';\nimport { isWildcard } from './regex';\n\n/**\n * The actual loading of the component\n * */\nexport const load = async request => {\n  let expired = false;\n  try {\n    request = await loader(request);\n    if (request && !request.isCancelled) {\n      // in case of on() providing we need to reset\n      // app state;\n      if (app.state === 'Loading') {\n        if (getPreviousState() === 'Widgets') {\n          app._setState('Widgets', [getActiveWidget()]);\n        } else {\n          app._setState('');\n        }\n      }\n      // Do page transition if instance\n      // is not shared between the routes\n      if (!request.isSharedInstance && !request.isCancelled) {\n        await executeTransition(request.page, getActivePage());\n      }\n    } else {\n      expired = true;\n    }\n    // on expired we only cleanup\n    if (expired || request.isCancelled) {\n      Log.debug('[router]:', \"Rejected \".concat(request.hash, \" because route to \").concat(getLastHash(), \" started\"));\n      if (request.isCreated && !request.isSharedInstance) {\n        // remove from render-tree\n        pagesHost.remove(request.page);\n      }\n    } else {\n      onRequestResolved(request);\n      // resolve promise\n      return request.page;\n    }\n  } catch (request) {\n    if (!request.route) {\n      console.error(request);\n    } else if (!expired) {\n      // @todo: revisit\n      const {\n        route\n      } = request;\n      // clean up history if modifier is set\n      if (getOption(route.options, 'clearHistory')) {\n        setHistory([]);\n      } else if (!isWildcard.test(route.path)) {\n        updateHistory(request);\n      }\n      if (request.isCreated && !request.isSharedInstance) {\n        // remove from render-tree\n        pagesHost.remove(request.page);\n      }\n      handleError(request);\n    }\n  }\n};\nconst loader = async request => {\n  const route = request.route;\n  const hash = request.hash;\n  const register = request.register;\n\n  // todo: grab from Route instance\n  let type = getComponent(route.path);\n  let isConstruct = isComponentConstructor(type);\n  let provide = false;\n\n  // if it's an instance bt we're not coming back from\n  // history we test if we can re-use this instance\n  if (!isConstruct && !register.get(symbols.backtrack)) {\n    if (!mustReuse(route)) {\n      type = type.constructor;\n      isConstruct = true;\n    }\n  }\n\n  // If page is Lightning Component instance\n  if (!isConstruct) {\n    request.page = type;\n    // if we have have a data route for current page\n    if (hasProvider(route.path)) {\n      if (isPageExpired(type) || type[symbols.hash] !== hash) {\n        provide = true;\n      }\n    }\n    let currentRoute = getActivePage() && getActivePage()[symbols.route];\n    // if the new route is equal to the current route it means that both\n    // route share the Component instance and stack location / since this case\n    // is conflicting with the way before() and after() loading works we flag it,\n    // and check platform settings in we want to re-use instance\n    if (route.path === currentRoute) {\n      request.isSharedInstance = true;\n      // since we're re-using the instance we must attach\n      // historyState to the request to prevent it from\n      // being overridden.\n      if (isFunction(request.page.historyState)) {\n        request.copiedHistoryState = request.page.historyState();\n      }\n    }\n  } else {\n    request.page = createComponent(stage, type);\n    pagesHost.a(request.page);\n    // test if need to request data provider\n    if (hasProvider(route.path)) {\n      provide = true;\n    }\n    request.isCreated = true;\n  }\n\n  // we store hash and route as properties on the page instance\n  // that way we can easily calculate new behaviour on page reload\n  request.page[symbols.hash] = hash;\n  request.page[symbols.route] = route.path;\n  try {\n    if (provide) {\n      // extract attached data-provider for route\n      // we're processing\n      const {\n        type: loadType,\n        provider\n      } = getProvider(route);\n\n      // update running request\n      request.provider = provider;\n      request.providerType = loadType;\n      await dataHooks[loadType](request);\n\n      // we early exit if the current request is expired\n      if (hash !== getLastHash()) {\n        return false;\n      } else {\n        if (request.providerType !== 'after') {\n          emit(request.page, 'dataProvided');\n        }\n        // resolve promise\n        return request;\n      }\n    } else {\n      addPersistData(request);\n      return request;\n    }\n  } catch (e) {\n    request.error = e;\n    return Promise.reject(request);\n  }\n};\nconst handleError = request => {\n  if (request && request.error) {\n    console.error(request.error);\n  } else if (request) {\n    Log.error(request);\n  }\n  if (request.page && routeExists('!')) {\n    navigate('!', {\n      request\n    }, false);\n  }\n};\nexport const mustReuse = route => {\n  const opt = getOption(route.options, 'reuseInstance');\n  const config = routerConfig.get('reuseInstance');\n\n  // route always has final decision\n  if (isBoolean(opt)) {\n    return opt;\n  }\n  return !(isBoolean(config) && config === false);\n};", "/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Lightning from '../Lightning';\nimport { default as Router } from './index';\nimport { routerConfig } from './utils/router.js';\nimport { isBoolean } from './utils/helpers';\nexport class RoutedApp extends Lightning.Component {\n  static _template() {\n    return {\n      Pages: {\n        forceZIndexContext: true\n      },\n      /**\n       * This is a default Loading page that will be made visible\n       * during data-provider on() you CAN override in child-class\n       */\n      Loading: {\n        rect: true,\n        w: 1920,\n        h: 1080,\n        color: 0xff000000,\n        visible: false,\n        zIndex: 99,\n        Label: {\n          mount: 0.5,\n          x: 960,\n          y: 540,\n          text: {\n            text: 'Loading..'\n          }\n        }\n      }\n    };\n  }\n  static _states() {\n    return [class Loading extends this {\n      $enter() {\n        this.tag('Loading').visible = true;\n      }\n      $exit() {\n        this.tag('Loading').visible = false;\n      }\n    }, class Widgets extends this {\n      $enter(args, widget) {\n        // store widget reference\n        this._widget = widget;\n\n        // since it's possible that this behaviour\n        // is non-remote driven we force a recalculation\n        // of the focuspath\n        this._refocus();\n      }\n      _getFocused() {\n        // we delegate focus to selected widget\n        // so it can consume remotecontrol presses\n        return this._widget;\n      }\n\n      // if we want to widget to widget focus delegation\n      reload(widget) {\n        this._widget = widget;\n        this._refocus();\n      }\n      _handleKey() {\n        const restoreFocus = routerConfig.get('autoRestoreRemote');\n        /**\n         * The Router used to delegate focus back to the page instance on\n         * every unhandled key. This is barely usefull in any situation\n         * so for now we offer the option to explicity turn that behaviour off\n         * so we don't don't introduce a breaking change.\n         */\n        if (!isBoolean(restoreFocus) || restoreFocus === true) {\n          Router.focusPage();\n        }\n      }\n    }];\n  }\n\n  /**\n   * Return location where pages need to be stored\n   */\n  get pages() {\n    return this.tag('Pages');\n  }\n\n  /**\n   * Tell router where widgets are stored\n   */\n  get widgets() {\n    return this.tag('Widgets');\n  }\n\n  /**\n   * we MUST register _handleBack method so the Router\n   * can override it\n   * @private\n   */\n  _handleBack() {}\n\n  /**\n   * We MUST return Router.activePage() so the new Page\n   * can listen to the remote-control.\n   */\n  _getFocused() {\n    return Router.getActivePage();\n  }\n}", "/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { isFunction, isPage, isObject, isBoolean, isString, getQueryStringParams, symbols, cleanHash } from './utils/helpers';\nimport { bootRouter, routeExists, getRootHash, getBootRequest, mustUpdateLocationHash, getComponent, storeComponent, stage, app, routerConfig, setLastHash, getActivePage, beforeEachRoute, getActiveHash, getActiveRoute } from './utils/router';\nimport { focusWidget, getActiveWidget, restoreFocus } from './utils/widgets';\nimport { getHistory, setHistory, getHistoryState, replaceHistoryState } from './utils/history';\nimport { createRequest, getRouteByHash, getValuesFromHash, getFloor, getHashByName, keepActivePageAlive } from './utils/route';\nimport { load } from './utils/loader';\nimport { stripRegex, isWildcard } from './utils/regex';\nimport { RoutedApp } from './base';\nimport Registry from '../Registry';\n\n/*\nrouThor ==[x]\n */\nexport let navigateQueue = new Map();\nlet forcedHash = '';\nlet resumeHash = '';\n\n/**\n * Start routing the app\n * @param config - route config object\n * @param instance - instance of the app\n */\nconst startRouter = (config, instance) => {\n  bootRouter(config, instance);\n  registerListener();\n  start();\n};\n\n// start translating url\nconst start = () => {\n  let hash = (getHash() || '').replace(/^#/, '');\n  const bootKey = '$';\n  const params = getQueryStringParams(hash);\n  const bootRequest = getBootRequest();\n  const rootHash = getRootHash();\n  const isDirectLoad = hash.indexOf(bootKey) !== -1;\n\n  // prevent direct reload of wildcard routes\n  // expect bootComponent\n  if (isWildcard.test(hash) && hash !== bootKey) {\n    hash = '';\n  }\n\n  // store resume point for manual resume\n  resumeHash = isDirectLoad ? rootHash : hash || rootHash;\n  const ready = () => {\n    if (!hash && rootHash) {\n      if (isString(rootHash)) {\n        navigate(rootHash);\n      } else if (isFunction(rootHash)) {\n        rootHash().then(res => {\n          if (isObject(res)) {\n            navigate(res.path, res.params);\n          } else {\n            navigate(res);\n          }\n        });\n      }\n    } else {\n      queue(hash);\n      handleHashChange().then(() => {\n        app._refocus();\n      }).catch(e => {\n        console.error(e);\n      });\n    }\n  };\n  if (routeExists(bootKey)) {\n    if (hash && !isDirectLoad) {\n      if (!getRouteByHash(hash)) {\n        navigate('*', {\n          failedHash: hash\n        });\n        return;\n      }\n    }\n    navigate(bootKey, {\n      resume: resumeHash,\n      reload: bootKey === hash\n    }, false);\n  } else if (isFunction(bootRequest)) {\n    bootRequest(params).then(() => {\n      ready();\n    }).catch(e => {\n      handleBootError(e);\n    });\n  } else {\n    ready();\n  }\n};\nconst handleBootError = e => {\n  if (routeExists('!')) {\n    navigate('!', {\n      request: {\n        error: e\n      }\n    });\n  } else {\n    console.error(e);\n  }\n};\n\n/**\n * start a new request\n * @param url\n * @param args\n * @param store\n */\nexport const navigate = function (url) {\n  let args = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  let store = arguments.length > 2 ? arguments[2] : undefined;\n  if (isObject(url)) {\n    url = getHashByName(url);\n    if (!url) {\n      return;\n    }\n  }\n  let hash = getHash();\n  if (!mustUpdateLocationHash() && forcedHash) {\n    hash = forcedHash;\n  }\n  if (hash.replace(/^#/, '') !== url) {\n    // push request in the queue\n    queue(url, args, store);\n    setHash(url);\n    if (!mustUpdateLocationHash()) {\n      forcedHash = url;\n      handleHashChange(url).then(() => {\n        app._refocus();\n      }).catch(e => {\n        console.error(e);\n      });\n    }\n  } else if (args.reload) {\n    // push request in the queue\n    queue(url, args, store);\n    handleHashChange(url).then(() => {\n      app._refocus();\n    }).catch(e => {\n      console.error(e);\n    });\n  }\n};\nconst queue = function (hash) {\n  let args = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  let store = arguments.length > 2 ? arguments[2] : undefined;\n  hash = cleanHash(hash);\n  if (!navigateQueue.has(hash)) {\n    for (let request of navigateQueue.values()) {\n      request.cancel();\n    }\n    const request = createRequest(hash, args, store);\n    navigateQueue.set(decodeURIComponent(hash), request);\n    return request;\n  }\n  return false;\n};\n\n/**\n * Handle change of hash\n * @param override\n * @returns {Promise<void>}\n */\nconst handleHashChange = async override => {\n  const hash = cleanHash(override || getHash());\n  const queueId = decodeURIComponent(hash);\n  let request = navigateQueue.get(queueId);\n\n  // handle hash updated manually\n  if (!request && !navigateQueue.size) {\n    request = queue(hash);\n  }\n  const route = getRouteByHash(hash);\n  if (!route) {\n    if (routeExists('*')) {\n      navigate('*', {\n        failedHash: hash\n      });\n    } else {\n      console.error(\"Unable to navigate to: \".concat(hash));\n    }\n    return;\n  }\n\n  // update current processed request\n  request.hash = hash;\n  request.route = route;\n  let result = await beforeEachRoute(getActiveHash(), request);\n\n  // test if a local hook is configured for the route\n  if (route.beforeNavigate) {\n    result = await route.beforeNavigate(getActiveHash(), request);\n  }\n  if (isBoolean(result)) {\n    // only if resolve value is explicitly true\n    // we continue the current route request\n    if (result) {\n      return resolveHashChange(request);\n    }\n  } else {\n    // if navigation guard didn't return true\n    // we cancel the current request\n    request.cancel();\n    navigateQueue.delete(queueId);\n    if (isString(result)) {\n      navigate(result);\n    } else if (isObject(result)) {\n      let store = true;\n      if (isBoolean(result.store)) {\n        store = result.store;\n      }\n      navigate(result.path, result.params, store);\n    }\n  }\n};\n\n/**\n * Continue processing the hash change if not blocked\n * by global or local hook\n * @param request - {}\n */\nconst resolveHashChange = request => {\n  const hash = request.hash;\n  const route = request.route;\n  const queueId = decodeURIComponent(hash);\n  // store last requested hash so we can\n  // prevent a route that resolved later\n  // from displaying itself\n  setLastHash(hash);\n  if (route.path) {\n    const component = getComponent(route.path);\n    // if a hook is provided for the current route\n    if (isFunction(route.hook)) {\n      const urlParams = getValuesFromHash(hash, route.path);\n      const params = {};\n      for (const key of urlParams.keys()) {\n        params[key] = urlParams.get(key);\n      }\n      route.hook(app, {\n        ...params\n      });\n    }\n    // if there is a component attached to the route\n    if (component) {\n      // force page to root state to prevent shared state issues\n      const activePage = getActivePage();\n      if (activePage) {\n        const keepAlive = keepActivePageAlive(getActiveRoute(), request);\n        if (activePage && route.path === getActiveRoute() && !keepAlive) {\n          activePage._setState('');\n        }\n      }\n      if (isPage(component, stage)) {\n        load(request).then(() => {\n          app._refocus();\n          navigateQueue.delete(queueId);\n        });\n      } else {\n        // of the component is not a constructor\n        // or a Component instance we can assume\n        // that it's a dynamic import\n        component().then(contents => {\n          return contents.default;\n        }).then(module => {\n          storeComponent(route.path, module);\n          return load(request);\n        }).then(() => {\n          app._refocus();\n          navigateQueue.delete(queueId);\n        });\n      }\n    } else {\n      navigateQueue.delete(queueId);\n    }\n  }\n};\n\n/**\n * Directional step in history\n * @param direction\n */\nexport const step = function () {\n  let level = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n  if (!level || isNaN(level)) {\n    return false;\n  }\n  const history = getHistory();\n  // for now we only support negative numbers\n  level = Math.abs(level);\n\n  // we can't step back past the amount\n  // of history entries\n  if (level > history.length) {\n    if (isFunction(app._handleAppClose)) {\n      return app._handleAppClose();\n    }\n    return false;\n  } else if (history.length) {\n    // for now we only support history back\n    const route = history.splice(history.length - level, level)[0];\n    // store changed history\n    setHistory(history);\n    return navigate(route.hash, {\n      [symbols.backtrack]: true,\n      [symbols.historyState]: route.state\n    }, false);\n  } else if (routerConfig.get('backtrack')) {\n    const hashLastPart = /(\\/:?[\\w%\\s-]+)$/;\n    let hash = stripRegex(getHash());\n    let floor = getFloor(hash);\n\n    // test if we got deep-linked\n    if (floor > 1) {\n      while (floor--) {\n        // strip of last part\n        hash = hash.replace(hashLastPart, '');\n        // if we have a configured route\n        // we navigate to it\n        if (getRouteByHash(hash)) {\n          return navigate(hash, {\n            [symbols.backtrack]: true\n          }, false);\n        }\n      }\n    }\n  }\n  return false;\n};\n\n/**\n * Resume Router's page loading process after\n * the BootComponent became visible;\n */\nconst resume = () => {\n  if (isString(resumeHash)) {\n    navigate(resumeHash, false);\n    resumeHash = '';\n  } else if (isFunction(resumeHash)) {\n    resumeHash().then(res => {\n      resumeHash = '';\n      if (isObject(res)) {\n        navigate(res.path, res.params);\n      } else {\n        navigate(res);\n      }\n    });\n  } else {\n    console.warn('[Router]: resume() called but no hash found');\n  }\n};\n\n/**\n * Force reload active hash\n */\nconst reload = () => {\n  if (!isNavigating()) {\n    const hash = getActiveHash();\n    navigate(hash, {\n      reload: true\n    }, false);\n  }\n};\n\n/**\n * Query if the Router is still processing a Request\n * @returns {boolean}\n */\nconst isNavigating = () => {\n  if (navigateQueue.size) {\n    let isProcessing = false;\n    for (let request of navigateQueue.values()) {\n      if (!request.isCancelled) {\n        isProcessing = true;\n      }\n    }\n    return isProcessing;\n  }\n  return false;\n};\nexport const getResumeHash = () => {\n  return resumeHash;\n};\n\n/**\n * By default we return the location hash\n * @returns {string}\n */\nlet getHash = () => {\n  return document.location.hash;\n};\n\n/**\n * Update location hash\n * @param url\n */\nlet setHash = url => {\n  document.location.hash = url;\n};\n\n/**\n * This can be called from the platform / bootstrapper to override\n * the default getting and setting of the hash\n * @param config\n */\nexport const initRouter = config => {\n  if (config.getHash) {\n    getHash = config.getHash;\n  }\n  if (config.setHash) {\n    setHash = config.setHash;\n  }\n};\n\n/**\n * On hash change we start processing\n */\nconst registerListener = () => {\n  Registry.addEventListener(window, 'hashchange', async () => {\n    if (mustUpdateLocationHash()) {\n      try {\n        await handleHashChange();\n      } catch (e) {\n        console.error(e);\n      }\n    }\n  });\n};\n\n/**\n * Navigate to root hash\n */\nconst root = () => {\n  const rootHash = getRootHash();\n  if (isString(rootHash)) {\n    navigate(rootHash);\n  } else if (isFunction(rootHash)) {\n    rootHash().then(res => {\n      if (isObject(res)) {\n        navigate(res.path, res.params);\n      } else {\n        navigate(res);\n      }\n    });\n  }\n};\n\n// export API\nexport default {\n  startRouter,\n  navigate,\n  resume,\n  step,\n  go: step,\n  back: step.bind(null, -1),\n  activePage: getActivePage,\n  getActivePage() {\n    // warning\n    return getActivePage();\n  },\n  getActiveRoute,\n  getActiveHash,\n  focusWidget,\n  getActiveWidget,\n  restoreFocus,\n  isNavigating,\n  getHistory,\n  setHistory,\n  getHistoryState,\n  replaceHistoryState,\n  getQueryStringParams,\n  reload,\n  symbols,\n  App: RoutedApp,\n  // keep backwards compatible\n  focusPage: restoreFocus,\n  root: root,\n  /**\n   * Deprecated api methods\n   */\n  setupRoutes() {\n    console.warn('Router: setupRoutes is deprecated, consolidate your configuration');\n    console.warn('https://rdkcentral.github.io/Lightning-SDK/#/plugins/router/configuration');\n  },\n  on() {\n    console.warn('Router.on() is deprecated, consolidate your configuration');\n    console.warn('https://rdkcentral.github.io/Lightning-SDK/#/plugins/router/configuration');\n  },\n  before() {\n    console.warn('Router.before() is deprecated, consolidate your configuration');\n    console.warn('https://rdkcentral.github.io/Lightning-SDK/#/plugins/router/configuration');\n  },\n  after() {\n    console.warn('Router.after() is deprecated, consolidate your configuration');\n    console.warn('https://rdkcentral.github.io/Lightning-SDK/#/plugins/router/configuration');\n  }\n};", "/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Settings from '../Settings';\nconst defaultChannels = [{\n  number: 1,\n  name: 'Metro News 1',\n  description: 'New York Cable News Channel',\n  entitled: true,\n  program: {\n    title: 'The Morning Show',\n    description: \"New York's best morning show\",\n    startTime: new Date(new Date() - 60 * 5 * 1000).toUTCString(),\n    // started 5 minutes ago\n    duration: 60 * 30,\n    // 30 minutes\n    ageRating: 0\n  }\n}, {\n  number: 2,\n  name: 'MTV',\n  description: 'Music Television',\n  entitled: true,\n  program: {\n    title: 'Beavis and Butthead',\n    description: 'American adult animated sitcom created by Mike Judge',\n    startTime: new Date(new Date() - 60 * 20 * 1000).toUTCString(),\n    // started 20 minutes ago\n    duration: 60 * 45,\n    // 45 minutes\n    ageRating: 18\n  }\n}, {\n  number: 3,\n  name: 'NBC',\n  description: 'NBC TV Network',\n  entitled: false,\n  program: {\n    title: 'The Tonight Show Starring Jimmy Fallon',\n    description: 'Late-night talk show hosted by Jimmy Fallon on NBC',\n    startTime: new Date(new Date() - 60 * 10 * 1000).toUTCString(),\n    // started 10 minutes ago\n    duration: 60 * 60,\n    // 1 hour\n    ageRating: 10\n  }\n}];\nexport const channels = () => Settings.get('platform', 'tv', defaultChannels);\nexport const randomChannel = () => channels()[~~(channels.length * Math.random())];", "/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Log from '../Log';\nimport { channels, randomChannel } from './defaults';\nlet currentChannel;\nconst callbacks = {};\nconst emit = function (event) {\n  for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    args[_key - 1] = arguments[_key];\n  }\n  callbacks[event] && callbacks[event].forEach(cb => {\n    cb.apply(null, args);\n  });\n};\n\n// local mock methods\nlet methods = {\n  getChannel() {\n    if (!currentChannel) currentChannel = randomChannel();\n    return new Promise((resolve, reject) => {\n      if (currentChannel) {\n        const channel = {\n          ...currentChannel\n        };\n        delete channel.program;\n        resolve(channel);\n      } else {\n        reject('No channel found');\n      }\n    });\n  },\n  getProgram() {\n    if (!currentChannel) currentChannel = randomChannel();\n    return new Promise((resolve, reject) => {\n      currentChannel.program ? resolve(currentChannel.program) : reject('No program found');\n    });\n  },\n  setChannel(number) {\n    return new Promise((resolve, reject) => {\n      if (number) {\n        const newChannel = channels().find(c => c.number === number);\n        if (newChannel) {\n          currentChannel = newChannel;\n          const channel = {\n            ...currentChannel\n          };\n          delete channel.program;\n          emit('channelChange', channel);\n          resolve(channel);\n        } else {\n          reject('Channel not found');\n        }\n      } else {\n        reject('No channel number supplied');\n      }\n    });\n  }\n};\nexport const initTV = config => {\n  methods = {};\n  if (config.getChannel && typeof config.getChannel === 'function') {\n    methods.getChannel = config.getChannel;\n  }\n  if (config.getProgram && typeof config.getProgram === 'function') {\n    methods.getProgram = config.getProgram;\n  }\n  if (config.setChannel && typeof config.setChannel === 'function') {\n    methods.setChannel = config.setChannel;\n  }\n  if (config.emit && typeof config.emit === 'function') {\n    config.emit(emit);\n  }\n};\n\n// public API\nexport default {\n  channel() {\n    let number = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    return new Promise((resolve, reject) => {\n      try {\n        // call setChannel when number argument is passed, otherwise getChannel\n        methods[number ? 'setChannel' : 'getChannel'](number).then(channel => {\n          // to do: ensure consistent formatting of channel info here?\n          resolve(channel);\n        }).catch(reject);\n      } catch (e) {\n        reject(e);\n      }\n    });\n  },\n  program() {\n    return new Promise((resolve, reject) => {\n      try {\n        methods.getProgram().then(program => {\n          // to do: ensure consistent formatting of program info here?\n          resolve(program);\n        }).catch(reject);\n      } catch (e) {\n        reject(e);\n      }\n    });\n  },\n  entitled() {\n    return new Promise((resolve, reject) => {\n      try {\n        methods.getChannel().then(channel => {\n          'entitled' in channel ? resolve(!!channel.entitled) : reject();\n        }).catch(reject);\n      } catch (e) {\n        reject(e);\n      }\n    });\n  },\n  addEventListener(event, cb) {\n    if (typeof cb === 'function') {\n      callbacks[event] = callbacks[event] || [];\n      callbacks[event].push(cb);\n    } else {\n      Log.error('Please provide a function as a callback');\n    }\n  },\n  removeEventListener(event) {\n    let cb = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    if (callbacks[event] && callbacks[event].length) {\n      callbacks[event] = cb ? callbacks[event].filter(_cb => _cb === cb) : [];\n    }\n  }\n};", "/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Profile from '../Profile';\nimport Settings from '../Settings';\nimport sequence from '../helpers/sequence';\nlet cspUrl = 'http://payment-csp-example.metrological.com:8080/';\nlet billingUrl = 'https://payment-sdk.metrological.com/';\nlet cspEndpoints = {\n  assets: {\n    uri: '/assets',\n    method: 'GET'\n  },\n  asset: {\n    uri: '/assets/:id',\n    method: 'GET'\n  },\n  signature: {\n    uri: '/assets/:id/signature',\n    method: 'POST'\n  },\n  subscribe: {\n    uri: '/assets/:id/subscribe',\n    method: 'POST'\n  },\n  unsubscribe: {\n    uri: '/assets/:id/unsubscribe',\n    method: 'POST'\n  }\n};\nexport const initPurchase = config => {\n  if (config.billingUrl) billingUrl = config.billingUrl;\n};\nconst createUrl = function (uri, baseUrl) {\n  let params = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  return new URL(\n  // sprinkle in the params\n  Object.keys(params).reduce((res, key) => res.replace(new RegExp(':' + key, 'g'), params[key]), uri)\n  // remove any leading slash from uri\n  .replace(/^\\//, ''),\n  // make sure baseUrl always has a trailing slash\n  /\\/$/.test(baseUrl) ? baseUrl : baseUrl.replace(/$/, '/'));\n};\nconst request = function (url) {\n  let method = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'GET';\n  let data = arguments.length > 2 ? arguments[2] : undefined;\n  let headers = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  if (method === 'GET' && data) {\n    url.search = new URLSearchParams(data);\n  }\n  return new Promise((resolve, reject) => {\n    fetch(url, {\n      headers: {\n        ...{\n          Accept: 'application/json',\n          'Content-Type': 'application/json'\n        },\n        ...headers\n      },\n      method: method,\n      body: method !== 'GET' && data ? JSON.stringify(data) : null\n    }).then(response => response.ok ? resolve(response.json()) : reject(response.statusText)).catch(reject);\n  });\n};\nconst cspRequest = function (type) {\n  let data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n  let params = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  return new Promise((resolve, reject) => {\n    const endpoint = cspEndpoints[type];\n    if (!endpoint) {\n      reject('No endpoint found for \"' + type + '\" call');\n    } else {\n      if (endpoint.callback && typeof endpoint.callback === 'function') {\n        endpoint.callback(data, params).then(resolve).catch(reject);\n      } else {\n        request(createUrl(endpoint.uri, cspUrl, params), endpoint.method, {\n          ...(endpoint.data || {}),\n          ...data\n        }, endpoint.headers || {}).then(resolve).catch(reject);\n      }\n    }\n  });\n};\nconst billingRequest = function (uri, data) {\n  let method = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'POST';\n  return new Promise((resolve, reject) => {\n    request(createUrl(uri, billingUrl), method, data).then(resolve).catch(reject);\n  });\n};\nexport default {\n  setup(config) {\n    if (config.cspUrl) cspUrl = config.cspUrl;\n    if (config.endpoints) cspEndpoints = {\n      cspEndpoints,\n      ...config.endpoints\n    };\n  },\n  assets() {\n    return new Promise((resolve, reject) => {\n      Profile.household().then(household => {\n        cspRequest('assets', {\n          household\n        }).then(resolve).catch(reject);\n      });\n    });\n  },\n  asset(id) {\n    return new Promise((resolve, reject) => {\n      Profile.household().then(household => {\n        cspRequest('asset', {\n          household\n        }, {\n          id\n        }).then(resolve).catch(reject);\n      });\n    });\n  },\n  signature(id) {\n    return new Promise((resolve, reject) => {\n      Promise.all([Profile.household()]).then(_ref => {\n        let [household] = _ref;\n        cspRequest('signature', {\n          household\n        }, {\n          id\n        }).then(resolve).catch(reject);\n      });\n    });\n  },\n  subscribe(id, transaction) {\n    return new Promise((resolve, reject) => {\n      cspRequest('subscribe', {\n        ...transaction\n      }, {\n        id\n      }).then(resolve).catch(reject);\n    });\n  },\n  unsubscribe(id) {\n    return new Promise((resolve, reject) => {\n      Profile.household().then(household => {\n        cspRequest('unsubscribe', {\n          household\n        }, {\n          id\n        }).then(resolve).catch(reject);\n      });\n    });\n  },\n  payment() {\n    let signature = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    let type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'in-app';\n    return new Promise((resolve, reject) => {\n      Promise.all([Profile.household(), Profile.countryCode(), Profile.operator(), Profile.mac(), Profile.uid()]).then(_ref2 => {\n        let [household, country, operator, mac, uid] = _ref2;\n        billingRequest('/', {\n          purchase: signature,\n          identifier: Settings.get('app', 'id'),\n          name: Settings.get('app', 'id'),\n          household,\n          country,\n          operator,\n          mac,\n          uid,\n          type\n        }).then(resolve).catch(reject);\n      }).catch(reject);\n    });\n  },\n  confirm(transactionId) {\n    return new Promise((resolve, reject) => {\n      billingRequest('/confirm', {\n        transactionId\n      }).then(resolve).catch(reject);\n    });\n  },\n  buy(assetId, type) {\n    return new Promise((resolve, reject) => {\n      let transactionId;\n      sequence([() => this.signature(assetId), signature => this.payment(signature, type), transaction => {\n        transactionId = transaction.transactionId;\n        return this.subscribe(assetId, transaction);\n      }, () => this.confirm(transactionId)]).then(resolve).catch(reject);\n    });\n  }\n};", "/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Lightning from '../Lightning';\nimport Pin from '../Pin';\nclass PinInput extends Lightning.Component {\n  static _template() {\n    return {\n      w: 120,\n      h: 150,\n      rect: true,\n      color: 0xff949393,\n      alpha: 0.5,\n      shader: {\n        type: Lightning.shaders.RoundedRectangle,\n        radius: 10\n      },\n      Nr: {\n        w: w => w,\n        y: 24,\n        text: {\n          text: '',\n          textColor: 0xff333333,\n          fontSize: 80,\n          textAlign: 'center',\n          verticalAlign: 'middle'\n        }\n      }\n    };\n  }\n  set index(v) {\n    this.x = v * (120 + 24);\n  }\n  set nr(v) {\n    this._timeout && clearTimeout(this._timeout);\n    if (v) {\n      this.setSmooth('alpha', 1);\n    } else {\n      this.setSmooth('alpha', 0.5);\n    }\n    this.tag('Nr').patch({\n      text: {\n        text: v && v.toString() || '',\n        fontSize: v === '*' ? 120 : 80\n      }\n    });\n    if (v && v !== '*') {\n      this._timeout = setTimeout(() => {\n        this._timeout = null;\n        this.nr = '*';\n      }, 750);\n    }\n  }\n}\nexport default class PinDialog extends Lightning.Component {\n  static _template() {\n    return {\n      zIndex: 1,\n      w: w => w,\n      h: h => h,\n      rect: true,\n      color: 0xdd000000,\n      alpha: 0.000001,\n      Dialog: {\n        w: 648,\n        h: 320,\n        y: h => (h - 320) / 2,\n        x: w => (w - 648) / 2,\n        rect: true,\n        color: 0xdd333333,\n        shader: {\n          type: Lightning.shaders.RoundedRectangle,\n          radius: 10\n        },\n        Info: {\n          y: 24,\n          x: 48,\n          text: {\n            text: 'Please enter your PIN',\n            fontSize: 32\n          }\n        },\n        Msg: {\n          y: 260,\n          x: 48,\n          text: {\n            text: '',\n            fontSize: 28,\n            textColor: 0xffffffff\n          }\n        },\n        Code: {\n          x: 48,\n          y: 96\n        }\n      }\n    };\n  }\n  _init() {\n    const children = [];\n    for (let i = 0; i < 4; i++) {\n      children.push({\n        type: PinInput,\n        index: i\n      });\n    }\n    this.tag('Code').children = children;\n  }\n  get pin() {\n    if (!this._pin) this._pin = '';\n    return this._pin;\n  }\n  set pin(v) {\n    if (v.length <= 4) {\n      const maskedPin = new Array(Math.max(v.length - 1, 0)).fill('*', 0, v.length - 1);\n      v.length && maskedPin.push(v.length > this._pin.length ? v.slice(-1) : '*');\n      for (let i = 0; i < 4; i++) {\n        this.tag('Code').children[i].nr = maskedPin[i] || '';\n      }\n      this._pin = v;\n    }\n  }\n  get msg() {\n    if (!this._msg) this._msg = '';\n    return this._msg;\n  }\n  set msg(v) {\n    this._timeout && clearTimeout(this._timeout);\n    this._msg = v;\n    if (this._msg) {\n      this.tag('Msg').text = this._msg;\n      this.tag('Info').setSmooth('alpha', 0.5);\n      this.tag('Code').setSmooth('alpha', 0.5);\n    } else {\n      this.tag('Msg').text = '';\n      this.tag('Info').setSmooth('alpha', 1);\n      this.tag('Code').setSmooth('alpha', 1);\n    }\n    this._timeout = setTimeout(() => {\n      this.msg = '';\n    }, 2000);\n  }\n  _firstActive() {\n    this.setSmooth('alpha', 1);\n  }\n  _handleKey(event) {\n    if (this.msg) {\n      this.msg = false;\n    } else {\n      const val = parseInt(event.key);\n      if (val > -1) {\n        this.pin += val;\n      }\n    }\n  }\n  _handleBack() {\n    if (this.msg) {\n      this.msg = false;\n    } else {\n      if (this.pin.length) {\n        this.pin = this.pin.slice(0, this.pin.length - 1);\n      } else {\n        Pin.hide();\n        this.resolve(false);\n      }\n    }\n  }\n  _handleEnter() {\n    if (this.msg) {\n      this.msg = false;\n    } else {\n      Pin.submit(this.pin).then(val => {\n        this.msg = 'Unlocking ...';\n        setTimeout(() => {\n          Pin.hide();\n        }, 1000);\n        this.resolve(val);\n      }).catch(e => {\n        this.msg = e;\n        this.reject(e);\n      });\n    }\n  }\n}", "/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Settings from '../Settings';\nimport PinDialog from './dialog';\nimport { ApplicationInstance } from '../Launch';\nimport { Log } from '../../index';\n\n// only used during local development\nlet unlocked = false;\nconst contextItems = ['purchase', 'parental'];\nlet submit = (pin, context) => {\n  return new Promise((resolve, reject) => {\n    if (pin.toString() === Settings.get('platform', 'pin', '0000').toString()) {\n      unlocked = true;\n      resolve(unlocked);\n    } else {\n      reject('Incorrect pin');\n    }\n  });\n};\nlet check = context => {\n  return new Promise(resolve => {\n    resolve(unlocked);\n  });\n};\nexport const initPin = config => {\n  if (config.submit && typeof config.submit === 'function') {\n    submit = config.submit;\n  }\n  if (config.check && typeof config.check === 'function') {\n    check = config.check;\n  }\n};\nlet pinDialog = null;\nconst contextCheck = context => {\n  if (context === undefined) {\n    Log.info('Please provide context explicitly');\n    return contextItems[0];\n  } else if (!contextItems.includes(context)) {\n    Log.warn('Incorrect context provided');\n    return false;\n  }\n  return context;\n};\n\n// Public API\nexport default {\n  show() {\n    return new Promise((resolve, reject) => {\n      pinDialog = ApplicationInstance.stage.c({\n        ref: 'PinDialog',\n        type: PinDialog,\n        resolve,\n        reject\n      });\n      ApplicationInstance.childList.a(pinDialog);\n      ApplicationInstance.focus = pinDialog;\n    });\n  },\n  hide() {\n    ApplicationInstance.focus = null;\n    ApplicationInstance.children = ApplicationInstance.children.map(child => child !== pinDialog && child);\n    pinDialog = null;\n  },\n  submit(pin, context) {\n    return new Promise((resolve, reject) => {\n      try {\n        context = contextCheck(context);\n        if (context) {\n          submit(pin, context).then(resolve).catch(reject);\n        } else {\n          reject('Incorrect Context provided');\n        }\n      } catch (e) {\n        reject(e);\n      }\n    });\n  },\n  unlocked(context) {\n    return new Promise((resolve, reject) => {\n      try {\n        context = contextCheck(context);\n        if (context) {\n          check(context).then(resolve).catch(reject);\n        } else {\n          reject('Incorrect Context provided');\n        }\n      } catch (e) {\n        reject(e);\n      }\n    });\n  },\n  locked(context) {\n    return new Promise((resolve, reject) => {\n      try {\n        context = contextCheck(context);\n        if (context) {\n          check(context).then(unlocked => resolve(!!!unlocked)).catch(reject);\n        } else {\n          reject('Incorrect Context provided');\n        }\n      } catch (e) {\n        reject(e);\n      }\n    });\n  }\n};", "/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nlet metadata = {};\nexport const initMetadata = metadataObj => {\n  metadata = metadataObj;\n};\nexport default {\n  get(key) {\n    let fallback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n    return key in metadata ? metadata[key] : fallback;\n  },\n  appId() {\n    return this.get('id');\n  },\n  safeAppId() {\n    return this.get('id').replace(/[^0-9a-zA-Z_$]/g, '_');\n  },\n  appName() {\n    return this.get('name');\n  },\n  appVersion() {\n    return (this.get('version') || '').split('-').shift();\n  },\n  appIcon() {\n    return this.get('icon');\n  },\n  // Version from app store (with commit hash)\n  appFullVersion() {\n    return this.get('version');\n  }\n};", "/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { initUtils } from '../Utils';\nimport { initProfile } from '../Profile';\nimport { initMetrics } from '../Metrics';\nimport { initSettings } from '../Settings';\nimport { initMediaPlayer } from '../MediaPlayer';\nimport { initVideoPlayer } from '../VideoPlayer';\nimport { initStorage } from '../Storage';\nimport { initAds } from '../Ads';\nimport { initRouter } from '../Router';\nimport { initTV } from '../TV';\nimport { initPurchase } from '../Purchase';\nimport { initPin } from '../Pin';\nimport { initMetadata } from '../Metadata';\nimport Application from '../Application';\nexport let ApplicationInstance;\nexport default (App, appSettings, platformSettings, appData) => {\n  initSettings(appSettings, platformSettings);\n  initMetadata(appSettings);\n  initUtils(platformSettings);\n  initStorage();\n  // Initialize plugins\n  if (platformSettings.plugins) {\n    platformSettings.plugins.profile && initProfile(platformSettings.plugins.profile);\n    platformSettings.plugins.metrics && initMetrics(platformSettings.plugins.metrics);\n    platformSettings.plugins.mediaPlayer && initMediaPlayer(platformSettings.plugins.mediaPlayer);\n    platformSettings.plugins.mediaPlayer && initVideoPlayer(platformSettings.plugins.mediaPlayer);\n    platformSettings.plugins.ads && initAds(platformSettings.plugins.ads);\n    platformSettings.plugins.router && initRouter(platformSettings.plugins.router);\n    platformSettings.plugins.tv && initTV(platformSettings.plugins.tv);\n    platformSettings.plugins.purchase && initPurchase(platformSettings.plugins.purchase);\n    platformSettings.plugins.pin && initPin(platformSettings.plugins.pin);\n  }\n  const app = Application(App, appData, platformSettings);\n  ApplicationInstance = new app(appSettings);\n  return ApplicationInstance;\n};", "/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Lightning from '../Lightning';\nimport Log from '../Log';\nexport default class VideoTexture extends Lightning.Component {\n  static _template() {\n    return {\n      Video: {\n        alpha: 1,\n        visible: false,\n        pivot: 0.5,\n        texture: {\n          type: Lightning.textures.StaticTexture,\n          options: {}\n        }\n      }\n    };\n  }\n  set videoEl(v) {\n    this._videoEl = v;\n  }\n  get videoEl() {\n    return this._videoEl;\n  }\n  get videoView() {\n    return this.tag('Video');\n  }\n  get videoTexture() {\n    return this.videoView.texture;\n  }\n  get isVisible() {\n    return this.videoView.alpha === 1 && this.videoView.visible === true;\n  }\n  _init() {\n    this._createVideoTexture();\n  }\n  _createVideoTexture() {\n    const stage = this.stage;\n    const gl = stage.gl;\n    const glTexture = gl.createTexture();\n    gl.bindTexture(gl.TEXTURE_2D, glTexture);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n    this.videoTexture.options = {\n      source: glTexture,\n      w: this.videoEl.width,\n      h: this.videoEl.height\n    };\n    this.videoView.w = this.videoEl.width / this.stage.getRenderPrecision();\n    this.videoView.h = this.videoEl.height / this.stage.getRenderPrecision();\n  }\n  start() {\n    const stage = this.stage;\n    this._lastTime = 0;\n    if (!this._updateVideoTexture) {\n      this._updateVideoTexture = () => {\n        if (this.videoTexture.options.source && this.videoEl.videoWidth && this.active) {\n          const gl = stage.gl;\n          const currentTime = new Date().getTime();\n          const getVideoPlaybackQuality = this.videoEl.getVideoPlaybackQuality();\n\n          // When BR2_PACKAGE_GST1_PLUGINS_BAD_PLUGIN_DEBUGUTILS is not set in WPE, webkitDecodedFrameCount will not be available.\n          // We'll fallback to fixed 30fps in this case.\n          // As 'webkitDecodedFrameCount' is about to deprecate, check for the 'totalVideoFrames'\n          const frameCount = getVideoPlaybackQuality ? getVideoPlaybackQuality.totalVideoFrames : this.videoEl.webkitDecodedFrameCount;\n          const mustUpdate = frameCount ? this._lastFrame !== frameCount : this._lastTime < currentTime - 30;\n          if (mustUpdate) {\n            this._lastTime = currentTime;\n            this._lastFrame = frameCount;\n            try {\n              gl.bindTexture(gl.TEXTURE_2D, this.videoTexture.options.source);\n              gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, false);\n              gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, this.videoEl);\n              this._lastFrame = this.videoEl.webkitDecodedFrameCount;\n              this.videoView.visible = true;\n              this.videoTexture.options.w = this.videoEl.width;\n              this.videoTexture.options.h = this.videoEl.height;\n              const expectedAspectRatio = this.videoView.w / this.videoView.h;\n              const realAspectRatio = this.videoEl.width / this.videoEl.height;\n              if (expectedAspectRatio > realAspectRatio) {\n                this.videoView.scaleX = realAspectRatio / expectedAspectRatio;\n                this.videoView.scaleY = 1;\n              } else {\n                this.videoView.scaleY = expectedAspectRatio / realAspectRatio;\n                this.videoView.scaleX = 1;\n              }\n            } catch (e) {\n              Log.error('texImage2d video', e);\n              this.stop();\n            }\n            this.videoTexture.source.forceRenderUpdate();\n          }\n        }\n      };\n    }\n    if (!this._updatingVideoTexture) {\n      stage.on('frameStart', this._updateVideoTexture);\n      this._updatingVideoTexture = true;\n    }\n  }\n  stop() {\n    const stage = this.stage;\n    stage.removeListener('frameStart', this._updateVideoTexture);\n    this._updatingVideoTexture = false;\n    this.videoView.visible = false;\n    if (this.videoTexture.options.source) {\n      const gl = stage.gl;\n      gl.bindTexture(gl.TEXTURE_2D, this.videoTexture.options.source);\n      gl.clearColor(0, 0, 0, 1);\n      gl.clear(gl.COLOR_BUFFER_BIT);\n    }\n  }\n  position(top, left) {\n    this.videoView.patch({\n      smooth: {\n        x: left,\n        y: top\n      }\n    });\n  }\n  size(width, height) {\n    this.videoView.patch({\n      smooth: {\n        w: width,\n        h: height\n      }\n    });\n  }\n  show() {\n    this.videoView.setSmooth('alpha', 1);\n  }\n  hide() {\n    this.videoView.setSmooth('alpha', 0);\n  }\n}", "/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport executeAsPromise from '@michieljs/execute-as-promise';\nimport Metrics from '../Metrics';\nimport Log from '../Log';\nimport Ads from '../Ads';\nimport events from './events';\nimport autoSetupMixin from '../helpers/autoSetupMixin';\nimport easeExecution from '../helpers/easeExecution';\nimport { ApplicationInstance } from '../Launch';\nimport Settings from '../Settings';\nimport VideoTexture from './VideoTexture';\nexport let mediaUrl = url => url;\nlet videoEl;\nlet videoTexture;\nlet metrics;\nlet consumer;\nlet precision = 1;\nlet textureMode = false;\nexport const initVideoPlayer = config => {\n  if (config.mediaUrl) {\n    mediaUrl = config.mediaUrl;\n  }\n};\n\n// todo: add this in a 'Registry' plugin\n// to be able to always clean this up on app close\nlet eventHandlers = {};\nconst state = {\n  adsEnabled: false,\n  playing: false,\n  _playingAds: false,\n  get playingAds() {\n    return this._playingAds;\n  },\n  set playingAds(val) {\n    if (this._playingAds !== val) {\n      this._playingAds = val;\n      fireOnConsumer(val === true ? 'AdStart' : 'AdEnd');\n    }\n  },\n  skipTime: false,\n  playAfterSeek: null\n};\nconst hooks = {\n  play() {\n    state.playing = true;\n  },\n  pause() {\n    state.playing = false;\n  },\n  seeked() {\n    state.playAfterSeek === true && videoPlayerPlugin.play();\n    state.playAfterSeek = null;\n  },\n  abort() {\n    deregisterEventListeners();\n  }\n};\nconst withPrecision = val => Math.round(precision * val) + 'px';\nconst fireOnConsumer = (event, args) => {\n  if (consumer) {\n    consumer.fire('$videoPlayer' + event, args, videoEl.currentTime);\n    consumer.fire('$videoPlayerEvent', event, args, videoEl.currentTime);\n  }\n};\nconst fireHook = (event, args) => {\n  hooks[event] && typeof hooks[event] === 'function' && hooks[event].call(null, event, args);\n};\nlet customLoader = null;\nlet customUnloader = null;\nconst loader = (url, videoEl, config) => {\n  return customLoader && typeof customLoader === 'function' ? customLoader(url, videoEl, config) : new Promise(resolve => {\n    url = mediaUrl(url);\n    videoEl.setAttribute('src', url);\n    videoEl.load();\n    resolve();\n  });\n};\nconst unloader = videoEl => {\n  return customUnloader && typeof customUnloader === 'function' ? customUnloader(videoEl) : new Promise(resolve => {\n    videoEl.removeAttribute('src');\n    videoEl.load();\n    resolve();\n  });\n};\nexport const setupVideoTag = () => {\n  const videoEls = document.getElementsByTagName('video');\n  if (videoEls && videoEls.length) {\n    return videoEls[0];\n  } else {\n    const videoEl = document.createElement('video');\n    const platformSettingsWidth = Settings.get('platform', 'width') ? Settings.get('platform', 'width') : 1920;\n    const platformSettingsHeight = Settings.get('platform', 'height') ? Settings.get('platform', 'height') : 1080;\n    videoEl.setAttribute('id', 'video-player');\n    videoEl.setAttribute('width', withPrecision(platformSettingsWidth));\n    videoEl.setAttribute('height', withPrecision(platformSettingsHeight));\n    videoEl.style.position = 'absolute';\n    videoEl.style.zIndex = '1';\n    videoEl.style.display = 'none';\n    videoEl.style.visibility = 'hidden';\n    videoEl.style.top = withPrecision(0);\n    videoEl.style.left = withPrecision(0);\n    videoEl.style.width = withPrecision(platformSettingsWidth);\n    videoEl.style.height = withPrecision(platformSettingsHeight);\n    document.body.appendChild(videoEl);\n    return videoEl;\n  }\n};\nexport const setUpVideoTexture = () => {\n  if (!ApplicationInstance.tag('VideoTexture')) {\n    const el = ApplicationInstance.stage.c({\n      type: VideoTexture,\n      ref: 'VideoTexture',\n      zIndex: 0,\n      videoEl\n    });\n    ApplicationInstance.childList.addAt(el, 0);\n  }\n  return ApplicationInstance.tag('VideoTexture');\n};\nconst registerEventListeners = () => {\n  Log.info('VideoPlayer', 'Registering event listeners');\n  Object.keys(events).forEach(event => {\n    const handler = e => {\n      // Fire a metric for each event (if it exists on the metrics object)\n      if (metrics && metrics[event] && typeof metrics[event] === 'function') {\n        metrics[event]({\n          currentTime: videoEl.currentTime\n        });\n      }\n      // fire an internal hook\n      fireHook(event, {\n        videoElement: videoEl,\n        event: e\n      });\n\n      // fire the event (with human friendly event name) to the consumer of the VideoPlayer\n      fireOnConsumer(events[event], {\n        videoElement: videoEl,\n        event: e\n      });\n    };\n    eventHandlers[event] = handler;\n    videoEl.addEventListener(event, handler);\n  });\n};\nconst deregisterEventListeners = () => {\n  Log.info('VideoPlayer', 'Deregistering event listeners');\n  Object.keys(eventHandlers).forEach(event => {\n    videoEl.removeEventListener(event, eventHandlers[event]);\n  });\n  eventHandlers = {};\n};\nconst videoPlayerPlugin = {\n  consumer(component) {\n    consumer = component;\n  },\n  loader(loaderFn) {\n    customLoader = loaderFn;\n  },\n  unloader(unloaderFn) {\n    customUnloader = unloaderFn;\n  },\n  position() {\n    let top = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    let left = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    videoEl.style.left = withPrecision(left);\n    videoEl.style.top = withPrecision(top);\n    if (textureMode === true) {\n      videoTexture.position(top, left);\n    }\n  },\n  size() {\n    let width = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1920;\n    let height = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1080;\n    videoEl.style.width = withPrecision(width);\n    videoEl.style.height = withPrecision(height);\n    videoEl.width = parseFloat(videoEl.style.width);\n    videoEl.height = parseFloat(videoEl.style.height);\n    if (textureMode === true) {\n      videoTexture.size(width, height);\n    }\n  },\n  area() {\n    let top = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    let right = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1920;\n    let bottom = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1080;\n    let left = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n    this.position(top, left);\n    this.size(right - left, bottom - top);\n  },\n  open(url) {\n    let config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    if (!this.canInteract) return;\n    metrics = Metrics.media(url);\n    this.hide();\n    deregisterEventListeners();\n    if (this.src == url) {\n      this.clear().then(this.open(url, config));\n    } else {\n      const adConfig = {\n        enabled: state.adsEnabled,\n        duration: 300\n      };\n      if (config.videoId) {\n        adConfig.caid = config.videoId;\n      }\n      Ads.get(adConfig, consumer).then(ads => {\n        state.playingAds = true;\n        ads.prerolls().then(() => {\n          state.playingAds = false;\n          loader(url, videoEl, config).then(() => {\n            registerEventListeners();\n            this.show();\n            this.play();\n          }).catch(e => {\n            fireOnConsumer('error', {\n              videoElement: videoEl,\n              event: e\n            });\n          });\n        });\n      });\n    }\n  },\n  reload() {\n    if (!this.canInteract) return;\n    const url = videoEl.getAttribute('src');\n    this.close();\n    this.open(url);\n  },\n  close() {\n    Ads.cancel();\n    if (state.playingAds) {\n      state.playingAds = false;\n      Ads.stop();\n      // call self in next tick\n      setTimeout(() => {\n        this.close();\n      });\n    }\n    if (!this.canInteract) return;\n    this.clear();\n    this.hide();\n    deregisterEventListeners();\n  },\n  clear() {\n    if (!this.canInteract) return;\n    // pause the video first to disable sound\n    this.pause();\n    if (textureMode === true) videoTexture.stop();\n    return unloader(videoEl).then(() => {\n      fireOnConsumer('Clear', {\n        videoElement: videoEl\n      });\n    });\n  },\n  play() {\n    if (!this.canInteract) return;\n    if (textureMode === true) videoTexture.start();\n    executeAsPromise(videoEl.play, null, videoEl).catch(e => {\n      fireOnConsumer('error', {\n        videoElement: videoEl,\n        event: e\n      });\n    });\n  },\n  pause() {\n    if (!this.canInteract) return;\n    videoEl.pause();\n  },\n  playPause() {\n    if (!this.canInteract) return;\n    this.playing === true ? this.pause() : this.play();\n  },\n  mute() {\n    let muted = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    if (!this.canInteract) return;\n    videoEl.muted = muted;\n  },\n  loop() {\n    let looped = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    videoEl.loop = looped;\n  },\n  seek(time) {\n    if (!this.canInteract) return;\n    if (!this.src) return;\n    // define whether should continue to play after seek is complete (in seeked hook)\n    if (state.playAfterSeek === null) {\n      state.playAfterSeek = !!state.playing;\n    }\n    // pause before actually seeking\n    this.pause();\n    // currentTime always between 0 and the duration of the video (minus 0.1s to not set to the final frame and stall the video)\n    videoEl.currentTime = Math.max(0, Math.min(time, this.duration - 0.1));\n  },\n  skip(seconds) {\n    if (!this.canInteract) return;\n    if (!this.src) return;\n    state.skipTime = (state.skipTime || videoEl.currentTime) + seconds;\n    easeExecution(() => {\n      this.seek(state.skipTime);\n      state.skipTime = false;\n    }, 300);\n  },\n  show() {\n    if (!this.canInteract) return;\n    if (textureMode === true) {\n      videoTexture.show();\n    } else {\n      videoEl.style.display = 'block';\n      videoEl.style.visibility = 'visible';\n    }\n  },\n  hide() {\n    if (!this.canInteract) return;\n    if (textureMode === true) {\n      videoTexture.hide();\n    } else {\n      videoEl.style.display = 'none';\n      videoEl.style.visibility = 'hidden';\n    }\n  },\n  enableAds() {\n    let enabled = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    state.adsEnabled = enabled;\n  },\n  /* Public getters */\n  get duration() {\n    return videoEl && (isNaN(videoEl.duration) ? Infinity : videoEl.duration);\n  },\n  get currentTime() {\n    return videoEl && videoEl.currentTime;\n  },\n  get muted() {\n    return videoEl && videoEl.muted;\n  },\n  get looped() {\n    return videoEl && videoEl.loop;\n  },\n  get src() {\n    return videoEl && videoEl.getAttribute('src');\n  },\n  get playing() {\n    return state.playing;\n  },\n  get playingAds() {\n    return state.playingAds;\n  },\n  get canInteract() {\n    // todo: perhaps add an extra flag wether we allow interactions (i.e. pauze, mute, etc.) during ad playback\n    return state.playingAds === false;\n  },\n  get top() {\n    return videoEl && parseFloat(videoEl.style.top);\n  },\n  get left() {\n    return videoEl && parseFloat(videoEl.style.left);\n  },\n  get bottom() {\n    return videoEl && parseFloat(videoEl.style.top - videoEl.style.height);\n  },\n  get right() {\n    return videoEl && parseFloat(videoEl.style.left - videoEl.style.width);\n  },\n  get width() {\n    return videoEl && parseFloat(videoEl.style.width);\n  },\n  get height() {\n    return videoEl && parseFloat(videoEl.style.height);\n  },\n  get visible() {\n    if (textureMode === true) {\n      return videoTexture.isVisible;\n    } else {\n      return videoEl && videoEl.style.display === 'block';\n    }\n  },\n  get adsEnabled() {\n    return state.adsEnabled;\n  },\n  // prefixed with underscore to indicate 'semi-private'\n  // because it's not recommended to interact directly with the video element\n  get _videoEl() {\n    return videoEl;\n  },\n  get _consumer() {\n    return consumer;\n  }\n};\nexport default autoSetupMixin(videoPlayerPlugin, () => {\n  precision = ApplicationInstance && ApplicationInstance.stage && ApplicationInstance.stage.getRenderPrecision() || precision;\n  videoEl = setupVideoTag();\n  textureMode = Settings.get('platform', 'textureMode', false);\n  if (textureMode === true) {\n    videoEl.setAttribute('crossorigin', 'anonymous');\n    videoTexture = setUpVideoTexture();\n  }\n});", "/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Log from '../Log';\nimport { mediaUrl } from '../VideoPlayer';\nlet consumer;\nlet getAds = () => {\n  // todo: enable some default ads during development, maybe from the settings.json\n  return Promise.resolve({\n    prerolls: [],\n    midrolls: [],\n    postrolls: []\n  });\n};\nexport const initAds = config => {\n  if (config.getAds) {\n    getAds = config.getAds;\n  }\n};\nconst state = {\n  active: false\n};\nconst playSlot = function () {\n  let slot = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  return slot.reduce((promise, ad) => {\n    return promise.then(() => {\n      return playAd(ad);\n    });\n  }, Promise.resolve(null));\n};\nconst playAd = ad => {\n  return new Promise(resolve => {\n    if (state.active === false) {\n      Log.info('Ad', 'Skipping add due to inactive state');\n      return resolve();\n    }\n    // is it safe to rely on videoplayer plugin already created the video tag?\n    const videoEl = document.getElementsByTagName('video')[0];\n    videoEl.style.display = 'block';\n    videoEl.style.visibility = 'visible';\n    videoEl.src = mediaUrl(ad.url);\n    videoEl.load();\n    let timeEvents = null;\n    let timeout;\n    const cleanup = () => {\n      // remove all listeners\n      Object.keys(handlers).forEach(handler => videoEl.removeEventListener(handler, handlers[handler]));\n      resolve();\n    };\n    const handlers = {\n      play() {\n        Log.info('Ad', 'Play ad', ad.url);\n        fireOnConsumer('Play', ad);\n        sendBeacon(ad.callbacks, 'defaultImpression');\n      },\n      ended() {\n        fireOnConsumer('Ended', ad);\n        sendBeacon(ad.callbacks, 'complete');\n        cleanup();\n      },\n      timeupdate() {\n        if (!timeEvents && videoEl.duration) {\n          // calculate when to fire the time based events (now that duration is known)\n          timeEvents = {\n            firstQuartile: videoEl.duration / 4,\n            midPoint: videoEl.duration / 2,\n            thirdQuartile: videoEl.duration / 4 * 3\n          };\n          Log.info('Ad', 'Calculated quartiles times', {\n            timeEvents\n          });\n        }\n        if (timeEvents && timeEvents.firstQuartile && videoEl.currentTime >= timeEvents.firstQuartile) {\n          fireOnConsumer('FirstQuartile', ad);\n          delete timeEvents.firstQuartile;\n          sendBeacon(ad.callbacks, 'firstQuartile');\n        }\n        if (timeEvents && timeEvents.midPoint && videoEl.currentTime >= timeEvents.midPoint) {\n          fireOnConsumer('MidPoint', ad);\n          delete timeEvents.midPoint;\n          sendBeacon(ad.callbacks, 'midPoint');\n        }\n        if (timeEvents && timeEvents.thirdQuartile && videoEl.currentTime >= timeEvents.thirdQuartile) {\n          fireOnConsumer('ThirdQuartile', ad);\n          delete timeEvents.thirdQuartile;\n          sendBeacon(ad.callbacks, 'thirdQuartile');\n        }\n      },\n      stalled() {\n        fireOnConsumer('Stalled', ad);\n        timeout = setTimeout(() => {\n          cleanup();\n        }, 5000); // make timeout configurable\n      },\n      canplay() {\n        timeout && clearTimeout(timeout);\n      },\n      error() {\n        fireOnConsumer('Error', ad);\n        cleanup();\n      },\n      // this doesn't work reliably on sky box, moved logic to timeUpdate event\n      // loadedmetadata() {\n      //   // calculate when to fire the time based events (now that duration is known)\n      //   timeEvents = {\n      //     firstQuartile: videoEl.duration / 4,\n      //     midPoint: videoEl.duration / 2,\n      //     thirdQuartile: (videoEl.duration / 4) * 3,\n      //   }\n      // },\n      abort() {\n        cleanup();\n      }\n      // todo: pause, resume, mute, unmute beacons\n    };\n    // add all listeners\n    Object.keys(handlers).forEach(handler => videoEl.addEventListener(handler, handlers[handler]));\n    videoEl.play();\n  });\n};\nconst sendBeacon = (callbacks, event) => {\n  if (callbacks && callbacks[event]) {\n    Log.info('Ad', 'Sending beacon', event, callbacks[event]);\n    return callbacks[event].reduce((promise, url) => {\n      return promise.then(() => fetch(url)\n      // always resolve, also in case of a fetch error (so we don't block firing the rest of the beacons for this event)\n      // note: for fetch failed http responses don't throw an Error :)\n      .then(response => {\n        if (response.status === 200) {\n          fireOnConsumer('Beacon' + event + 'Sent');\n        } else {\n          fireOnConsumer('Beacon' + event + 'Failed' + response.status);\n        }\n        Promise.resolve(null);\n      }).catch(() => {\n        Promise.resolve(null);\n      }));\n    }, Promise.resolve(null));\n  } else {\n    Log.info('Ad', 'No callback found for ' + event);\n  }\n};\nconst fireOnConsumer = (event, args) => {\n  if (consumer) {\n    consumer.fire('$ad' + event, args);\n    consumer.fire('$adEvent', event, args);\n  }\n};\nexport default {\n  get(config, videoPlayerConsumer) {\n    if (config.enabled === false) {\n      return Promise.resolve({\n        prerolls() {\n          return Promise.resolve();\n        }\n      });\n    }\n    consumer = videoPlayerConsumer;\n    return new Promise(resolve => {\n      Log.info('Ad', 'Starting session');\n      getAds(config).then(ads => {\n        Log.info('Ad', 'API result', ads);\n        resolve({\n          prerolls() {\n            if (ads.preroll) {\n              state.active = true;\n              fireOnConsumer('PrerollSlotImpression', ads);\n              sendBeacon(ads.preroll.callbacks, 'slotImpression');\n              return playSlot(ads.preroll.ads).then(() => {\n                fireOnConsumer('PrerollSlotEnd', ads);\n                sendBeacon(ads.preroll.callbacks, 'slotEnd');\n                state.active = false;\n              });\n            }\n            return Promise.resolve();\n          },\n          midrolls() {\n            return Promise.resolve();\n          },\n          postrolls() {\n            return Promise.resolve();\n          }\n        });\n      });\n    });\n  },\n  cancel() {\n    Log.info('Ad', 'Cancel Ad');\n    state.active = false;\n  },\n  stop() {\n    Log.info('Ad', 'Stop Ad');\n    state.active = false;\n    // fixme: duplication\n    const videoEl = document.getElementsByTagName('video')[0];\n    videoEl.pause();\n    videoEl.removeAttribute('src');\n  }\n};", "/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Lightning from '../Lightning';\nexport default class ScaledImageTexture extends Lightning.textures.ImageTexture {\n  constructor(stage) {\n    super(stage);\n    this._scalingOptions = undefined;\n  }\n  set options(options) {\n    this.resizeMode = this._scalingOptions = options;\n  }\n  _getLookupId() {\n    return \"\".concat(this._src, \"-\").concat(this._scalingOptions.type, \"-\").concat(this._scalingOptions.w, \"-\").concat(this._scalingOptions.h);\n  }\n  getNonDefaults() {\n    const obj = super.getNonDefaults();\n    if (this._src) {\n      obj.src = this._src;\n    }\n    return obj;\n  }\n}", "/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Utils from '../Utils';\nimport Settings from '../Settings';\nimport ScaledImageTexture from './ScaledImageTexture';\nexport default (imageUrl, options) => {\n  const imageServerUrl = Settings.get('platform', 'imageServerUrl');\n\n  // make and return ScaledImageTexture\n  const make = options => {\n    // local asset, wrap it in Utils.asset()\n    if (!/^(?:https?:)?\\/\\//i.test(imageUrl)) {\n      imageUrl = Utils.asset(imageUrl);\n    }\n\n    // only pass to image server if imageServerUrl is configured\n    // and if the asset isn't local to the app (i.e. has same origin)\n    if (imageServerUrl && imageUrl.indexOf(window.location.origin) === -1) {\n      imageUrl = Utils.ensureUrlWithProtocol(imageServerUrl + '?' + Utils.makeQueryString(imageUrl, options));\n    } else {\n      // Lightning will handle the resizing and has only 2 flavours (cover and contain)\n      if (options.type === 'crop') options.type = 'cover';else options.type = 'contain';\n    }\n    return {\n      type: ScaledImageTexture,\n      src: imageUrl,\n      options: options\n    };\n  };\n\n  // merge options with default\n  const setOptions = options => {\n    options = {\n      ...{\n        type: 'contain',\n        w: 0,\n        h: 0\n      },\n      ...options\n    };\n    const imageQuality = Math.max(0.1, Math.min(1, (parseFloat(Settings.get('platform', 'image.quality')) || 100) / 100));\n    options.w = options.w * imageQuality;\n    options.h = options.h * imageQuality;\n    return options;\n  };\n\n  // if options are passed, return scaled image right away\n  if (options) {\n    return make(setOptions(options));\n  }\n\n  // otherwise return 'chained' functions\n  return {\n    // official api\n    exact: (w, h) => make(setOptions({\n      type: 'exact',\n      w,\n      h\n    })),\n    landscape: w => make(setOptions({\n      type: 'landscape',\n      w\n    })),\n    portrait: h => make(setOptions({\n      type: 'portrait',\n      h\n    })),\n    cover: (w, h) => make(setOptions({\n      type: 'cover',\n      w,\n      h\n    })),\n    contain: (w, h) => make(setOptions({\n      type: 'contain',\n      w,\n      h\n    })),\n    original: () => make(setOptions({\n      type: 'contain'\n    }))\n\n    // todo: add positioning - i.e. top, bottom, center, left etc.\n  };\n};", "const apiKey = '66683917a94e703e14ca150023f4ea7c';\nconst base = 'https://api.themoviedb.org/3';\nexport const getPopularUrls = async type => {\n  return [\"genre/\".concat(type, \"/list\"), \"discover/\".concat(type)].map(url => {\n    return fetch(\"\".concat(base, \"/\").concat(url, \"?api_key=\").concat(apiKey, \"&with_companies=7|33&vote_average.gte=7\"));\n  });\n};\nexport const getDetailUrl = async (type, id) => {\n  return fetch(\"\".concat(base, \"/\").concat(type, \"/\").concat(id, \"?api_key=\").concat(apiKey));\n};\nexport const getCreditsUrl = async (type, id) => {\n  return fetch(\"\".concat(base, \"/\").concat(type, \"/\").concat(id, \"/credits?api_key=\").concat(apiKey));\n};\nexport const getSimilarUrls = async (type, id) => {\n  return [\"genre/\".concat(type, \"/list\"), \"\".concat(type, \"/\").concat(id, \"/similar\")].map(url => {\n    return fetch(\"\".concat(base, \"/\").concat(url, \"?api_key=\").concat(apiKey));\n  });\n};\nexport const getPeopleUrl = async id => {\n  return fetch(\"\".concat(base, \"/person/\").concat(id, \"?api_key=\").concat(apiKey));\n};\nexport const getCreditsUrls = async (type, id) => {\n  return [\"genre/\".concat(type, \"/list\"), \"person/\".concat(id, \"/\").concat(type, \"_credits\")].map(url => {\n    return fetch(\"\".concat(base, \"/\").concat(url, \"?api_key=\").concat(apiKey));\n  });\n};", "export const getImgUrl = function (imgPath) {\n  let width = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 185;\n  return \"//image.tmdb.org/t/p/w\".concat(width).concat(imgPath);\n};", "import { Lightning } from '@lightningjs/sdk';\nexport default class PerspectiveShader extends Lightning.shaders.WebGLDefaultShader {\n  constructor(context) {\n    super(context);\n    this._fudge = 0.2;\n    this._rx = 0;\n    this._ry = 0;\n    this._z = 1.0;\n  }\n  setupUniforms(operation) {\n    super.setupUniforms(operation);\n    const vr = operation.shaderOwner;\n    const element = vr.element;\n    const pivotX = element.pivotX * vr.w;\n    const pivotY = element.pivotY * vr.h;\n    const coords = vr.getRenderTextureCoords(pivotX, pivotY);\n\n    // Counter normal rotation.\n    const rz = -Math.atan2(vr._renderContext.tc, vr._renderContext.ta);\n    const gl = this.gl;\n    this._setUniform(\"pivot\", new Float32Array([coords[0], coords[1], 0]), gl.uniform3fv);\n    this._setUniform(\"rot\", new Float32Array([this._rx, this._ry, rz]), gl.uniform3fv);\n    this._setUniform(\"z\", this._z, gl.uniform1f);\n    this._setUniform(\"fudge\", this._fudge, gl.uniform1f);\n  }\n  set fudge(v) {\n    this._fudge = v;\n    this.redraw();\n  }\n  get fudge() {\n    return this._fudge;\n  }\n  get rx() {\n    return this._rx;\n  }\n  set rx(v) {\n    this._rx = v;\n    this.redraw();\n  }\n  get ry() {\n    return this._ry;\n  }\n  set ry(v) {\n    this._ry = v;\n    this.redraw();\n  }\n  get z() {\n    return this._z;\n  }\n  set z(v) {\n    this._z = v;\n    this.redraw();\n  }\n  useDefault() {\n    return this._rx === 0 && this._ry === 0 && this._z === 0;\n  }\n}\nPerspectiveShader.vertexShaderSource = \"\\n    #ifdef GL_ES\\n    precision lowp float;\\n    #endif\\n    attribute vec2 aVertexPosition;\\n    attribute vec2 aTextureCoord;\\n    attribute vec4 aColor;\\n    uniform vec2 projection;\\n    varying vec2 vTextureCoord;\\n    varying vec4 vColor;\\n\\n    uniform float z;\\n    uniform vec3 pivot;\\n    uniform vec3 rot;\\n    varying vec3 pos;\\n\\n    void main(void) {\\n        pos = vec3(aVertexPosition.xy, z);\\n        \\n        pos -= pivot;\\n        \\n        // Undo XY rotation\\n        mat2 iRotXy = mat2( cos(rot.z), sin(rot.z), \\n                           -sin(rot.z), cos(rot.z));\\n        pos.xy = iRotXy * pos.xy;\\n        \\n        // Perform 3d rotations\\n        gl_Position.x = cos(rot.x) * pos.x - sin(rot.x) * pos.z;\\n        gl_Position.y = pos.y;\\n        gl_Position.z = sin(rot.x) * pos.x + cos(rot.x) * pos.z;\\n        \\n        pos.x = gl_Position.x;\\n        pos.y = cos(rot.y) * gl_Position.y - sin(rot.y) * gl_Position.z;\\n        pos.z = sin(rot.y) * gl_Position.y + cos(rot.y) * gl_Position.z;\\n        \\n        // Redo XY rotation\\n        iRotXy[0][1] = -iRotXy[0][1];\\n        iRotXy[1][0] = -iRotXy[1][0];\\n        pos.xy = iRotXy * pos.xy; \\n\\n        // Undo translate to pivot position\\n        pos.xyz += pivot;\\n\\n        pos = vec3(pos.x * projection.x - 1.0, pos.y * -abs(projection.y) + 1.0, pos.z * projection.x);\\n        \\n        // Map coords to gl coordinate space.\\n        // Set z to 0 because we don't want to perform z-clipping\\n        gl_Position = vec4(pos.xy, 0.0, z);\\n\\n        vTextureCoord = aTextureCoord;\\n        vColor = aColor;\\n        \\n        gl_Position.y = -sign(projection.y) * gl_Position.y;\\n    }\\n\";\nPerspectiveShader.fragmentShaderSource = \"\\n    #ifdef GL_ES\\n    precision lowp float;\\n    #endif\\n    varying vec2 vTextureCoord;\\n    varying vec4 vColor;\\n    uniform sampler2D uSampler;\\n\\n    uniform vec3 rot;\\n    uniform float fudge;\\n\\n    void main(void) {\\n        vec2 coords = vTextureCoord;\\n\\n        coords.xy -= vec2(0.5);\\n        coords.y = coords.y + (sign(rot[0]) * 0.5 - coords.x) * sin(rot[0]) * fudge * coords.y;\\n        coords.x = coords.x + (sign(rot[1]) * 0.5 - coords.y) * sin(rot[1]) * fudge * coords.x;\\n        coords.xy += vec2(0.5);\\n\\n        if (coords.x < 0.0 || coords.x > 1.0 || coords.y < 0.0 || coords.y > 1.0) {\\n            gl_FragColor = vec4(0.0);\\n        } else {\\n            gl_FragColor = texture2D(uSampler, coords) * vColor;\\n        }\\n    }\\n\";", "export const ITEM_CONFIGS = [{\n  amount: 1,\n  rx: {\n    s: 0.3,\n    e: 0\n  },\n  scale: 0.8,\n  zIndex: 3,\n  alpha: 0.001,\n  x: 0,\n  y: 200,\n  color: 0xff757575\n}, {\n  amount: 0,\n  rx: {\n    s: 0.6,\n    e: 0.3\n  },\n  scale: 1,\n  zIndex: 4,\n  alpha: 1,\n  x: 0,\n  y: 0,\n  color: 0xffffffff\n}, {\n  amount: 1,\n  rx: {\n    s: 0.8,\n    e: 0.6\n  },\n  scale: 0.6,\n  zIndex: 3,\n  alpha: 1,\n  x: 200,\n  y: 0,\n  color: 0xff757575\n}, {\n  amount: 1.5,\n  rx: {\n    s: 1,\n    e: 0.8\n  },\n  scale: 0.45,\n  zIndex: 2,\n  alpha: 1,\n  x: 300,\n  y: 0,\n  color: 0xff757575\n}, {\n  amount: 2,\n  rx: {\n    s: 1,\n    e: 1\n  },\n  scale: 0.45,\n  zIndex: 1,\n  alpha: 0.001,\n  x: 400,\n  y: 0,\n  color: 0xff757575\n}, {\n  amount: 2,\n  rx: {\n    s: 1,\n    e: 1\n  },\n  scale: 0.45,\n  zIndex: 1,\n  alpha: 0,\n  x: 400,\n  y: 0,\n  color: 0xff757575\n}];", "import { Img, Lightning, Router, Utils } from \"@lightningjs/sdk\";\nimport { getImgUrl } from \"../../lib/tools\";\nimport PerspectiveShader from \"../../shader/PerspectiveShader\";\nimport { ITEM_CONFIGS } from \"./ItemConfigs\";\nexport default class Item extends Lightning.Component {\n  static _template() {\n    return {\n      w: Item.width,\n      h: Item.height,\n      alpha: 0,\n      transitions: {\n        alpha: {\n          duration: 0.3,\n          timingFunction: 'cubic-bezier(0.20, 1.00, 0.80, 1.00)'\n        }\n      },\n      Blur: {\n        w: Item.width,\n        h: Item.height,\n        rtt: true,\n        type: Lightning.components.FastBlurComponent,\n        amount: 0,\n        transitions: {\n          amount: {\n            duration: 0.3,\n            timingFunction: 'cubic-bezier(0.20, 1.00, 0.80, 1.00)'\n          },\n          zIndex: {\n            duration: 0.3,\n            timingFunction: 'cubic-bezier(0.20, 1.00, 0.80, 1.00)'\n          },\n          x: {\n            duration: 0.3,\n            timingFunction: 'cubic-bezier(0.20, 1.00, 0.80, 1.00)'\n          },\n          y: {\n            duration: 0.3,\n            timingFunction: 'cubic-bezier(0.20, 1.00, 0.80, 1.00)'\n          }\n        },\n        content: {\n          Perspective: {\n            w: Item.width,\n            h: Item.height,\n            rtt: true,\n            shader: {\n              type: PerspectiveShader,\n              rx: 0,\n              ry: 0\n            },\n            Poster: {\n              w: Item.width,\n              h: Item.height,\n              rtt: true,\n              alpha: 0.001,\n              transitions: {\n                scale: {\n                  duration: 0.3,\n                  timingFunction: 'cubic-bezier(0.20, 1.00, 0.80, 1.00)'\n                }\n              },\n              shader: {\n                type: Lightning.shaders.RoundedRectangle,\n                radius: 18\n              },\n              Image: {\n                w: w => w,\n                h: h => h,\n                transitions: {\n                  alpha: {\n                    duration: 0.3\n                  }\n                }\n              },\n              Border: {\n                x: -4,\n                y: -4,\n                colorBottom: 0xff121212,\n                colorTop: 0xff434343,\n                texture: Lightning.Tools.getRoundRect(Item.width, Item.height, 18, 3, 0xffffffff, false, 0xffffffff)\n              }\n            }\n          }\n        }\n      }\n    };\n  }\n  _init() {\n    this._perspectiveAnimation = this.tag(\"Blur\").content.animation({\n      duration: 0.3,\n      timingFunction: 'cubic-bezier(0.20, 1.00, 0.80, 1.00)',\n      actions: [{\n        t: 'Perspective',\n        p: 'shader.rx',\n        v: e => {\n          const {\n            rx\n          } = ITEM_CONFIGS[this.configIndex];\n          return e * (rx.e - rx.s) + rx.s;\n        }\n      }]\n    });\n    this.tag(\"Blur\").transition(\"zIndex\").on(\"finish\", () => {\n      if (this._focusedItem) {\n        this.application.emit(\"itemAnimationEnded\");\n      }\n    });\n    this.tag(\"Blur\").content.tag(\"Image\").on(\"txLoaded\", () => {\n      this.tag(\"Blur\").content.tag(\"Poster\").alpha = 1;\n    });\n    this.tag(\"Blur\").content.tag(\"Image\").on(\"txUnloaded\", () => {\n      this.tag(\"Blur\").content.tag(\"Poster\").alpha = 0.001;\n    });\n    this._resetPosition();\n  }\n  set focusedItem(v) {\n    this._focusedItem = v;\n  }\n  set item(v) {\n    this._item = v;\n    const content = this.tag(\"Blur\").content;\n    if (this._item.poster !== null) {\n      const image = getImgUrl(this._item.poster, 500);\n      content.tag(\"Image\").texture = Img(image).contain(342, 513);\n    } else {\n      content.tag(\"Image\").src = Utils.asset(\"images/placeholder.png\");\n    }\n  }\n  set index(v) {\n    this._index = v;\n  }\n  get configIndex() {\n    return this.parent.configIndex;\n  }\n  animatePosition() {\n    const {\n      alpha,\n      scale,\n      x,\n      y,\n      color,\n      amount,\n      zIndex\n    } = ITEM_CONFIGS[this.configIndex];\n    this.patch({\n      alpha,\n      Blur: {\n        amount,\n        smooth: {\n          zIndex,\n          x,\n          y\n        },\n        content: {\n          Perspective: {\n            Poster: {\n              smooth: {\n                scale\n              },\n              Image: {\n                color\n              }\n            }\n          }\n        }\n      }\n    });\n    this._perspectiveAnimation.start();\n  }\n  _resetPosition() {\n    const {\n      alpha,\n      scale,\n      x,\n      y,\n      color,\n      amount,\n      zIndex,\n      rx\n    } = ITEM_CONFIGS[this.configIndex];\n    this.patch({\n      alpha,\n      Blur: {\n        amount,\n        zIndex,\n        x,\n        y,\n        content: {\n          Perspective: {\n            shader: {\n              type: PerspectiveShader,\n              rx: rx.e,\n              ry: 0.05\n            },\n            Poster: {\n              scale,\n              Image: {\n                color\n              }\n            }\n          }\n        }\n      }\n    });\n    this.application.emit(\"itemAnimationEnded\");\n  }\n  _handleEnter() {\n    this.fireAncestors(\"$selectItem\", {\n      item: this._item\n    });\n  }\n  static get width() {\n    return 342;\n  }\n  static get height() {\n    return 513;\n  }\n  static get offset() {\n    return 0;\n  }\n}", "import { Img, Lightning, Router, Utils } from \"@lightningjs/sdk\";\nimport { getImgUrl } from \"../../lib/tools\";\nexport default class Actor extends Lightning.Component {\n  static _template() {\n    return {\n      Actor: {\n        w: Actor.width,\n        h: Actor.height,\n        rtt: true,\n        mount: 0.5,\n        x: Actor.width / 2,\n        y: Actor.height / 2,\n        scale: 0.98,\n        shader: {\n          type: Lightning.shaders.RoundedRectangle,\n          radius: 18\n        },\n        transitions: {\n          scale: {\n            duration: 0.3,\n            timingFunction: 'cubic-bezier(0.20, 1.00, 0.80, 1.00)'\n          }\n        },\n        Image: {\n          w: 300,\n          h: 451,\n          mount: 0.5,\n          x: Actor.width / 2,\n          y: Actor.height / 2,\n          shader: {\n            type: Lightning.shaders.Grayscale,\n            amount: 1\n          },\n          transitions: {\n            color: {\n              duration: 0.3,\n              timingFunction: 'cubic-bezier(0.20, 1.00, 0.80, 1.00)'\n            }\n          }\n        }\n      },\n      ActorInfo: {\n        flex: {\n          direction: \"column\"\n        },\n        y: Actor.height + 6,\n        transitions: {\n          y: {\n            duration: 0.3,\n            timingFunction: 'cubic-bezier(0.20, 1.00, 0.80, 1.00)'\n          }\n        },\n        Name: {\n          x: Actor.width / 2,\n          mountX: 0.5,\n          text: {\n            fontFace: \"Bold\",\n            fontSize: 24,\n            wordWrapWidth: Actor.width,\n            textAlign: \"center\",\n            textColor: 0xffc3c3c3\n          }\n        },\n        Character: {\n          x: Actor.width / 2,\n          mountX: 0.5,\n          text: {\n            fontFace: \"Regular\",\n            fontSize: 21,\n            textAlign: \"center\",\n            textColor: 0xff9f9f9f,\n            wordWrapWidth: Actor.width,\n            lineHeight: 31,\n            maxLines: 2\n          }\n        }\n      }\n    };\n  }\n  set item(v) {\n    this._item = v;\n    if (this._item.profile_path !== null) {\n      const image = getImgUrl(this._item.profile_path, 300);\n      this.tag(\"Image\").texture = Img(image).landscape(Actor.width);\n    } else {\n      this.tag(\"Image\").src = Utils.asset(\"images/placeholder.png\");\n    }\n    this.tag(\"Name\").text = this._item.name;\n    this.tag(\"Character\").text = this._item.character;\n  }\n  _focus() {\n    this.patch({\n      Actor: {\n        smooth: {\n          scale: 1\n        },\n        Image: {\n          smooth: {\n            \"shader.amount\": 0\n          }\n        }\n      },\n      ActorInfo: {\n        smooth: {\n          y: Actor.height + 16\n        },\n        Name: {\n          smooth: {\n            \"text.textColor\": 0xffffffff\n          }\n        },\n        Character: {\n          smooth: {\n            \"text.textColor\": 0xffc3c3c3\n          }\n        }\n      }\n    });\n  }\n  _unfocus() {\n    this.patch({\n      Actor: {\n        smooth: {\n          scale: 0.98\n        },\n        Image: {\n          smooth: {\n            \"shader.amount\": 1\n          }\n        }\n      },\n      ActorInfo: {\n        smooth: {\n          y: Actor.height + 6\n        },\n        Name: {\n          smooth: {\n            \"text.textColor\": 0xffc3c3c3\n          }\n        },\n        Character: {\n          smooth: {\n            \"text.textColor\": 0xff9f9f9f\n          }\n        }\n      }\n    });\n  }\n  _handleEnter() {\n    Router.navigate(\"people/\".concat(this._item.id), true);\n  }\n  static get width() {\n    return 300;\n  }\n  static get height() {\n    return 451;\n  }\n  static get offset() {\n    return 40;\n  }\n}", "import { Lightning } from '@lightningjs/sdk';\nexport default class ItemWrapper extends Lightning.Component {\n  static _template() {\n    return {\n      clipbox: true\n    };\n  }\n  set index(v) {\n    this._index = v;\n  }\n  get index() {\n    return this._index;\n  }\n  get configIndex() {\n    return this._configIndex;\n  }\n  set configIndex(v) {\n    this._configIndex = v;\n  }\n  set construct(v) {\n    this._construct = v;\n  }\n  get construct() {\n    return this._construct;\n  }\n  set item(obj) {\n    this._item = obj;\n  }\n  get item() {\n    return this._item;\n  }\n  get child() {\n    return this.children[0];\n  }\n  create() {\n    const item = this._item;\n    this.children = [{\n      type: this._construct,\n      item,\n      index: this._index\n    }];\n\n    // if item is flagged and has focus, notify parent\n    // that focuspath can be recalculated\n    if (this._notifyOnItemCreation && this.hasFocus()) {\n      this.fireAncestors(\"$itemCreated\");\n      this._refocus();\n    }\n  }\n  _firstActive() {\n    this.create();\n    if (!ItemWrapper.FIRST_CREATED) {\n      this.fireAncestors(\"$firstItemCreated\");\n      ItemWrapper.FIRST_CREATED = true;\n    }\n  }\n  _getFocused() {\n    // due to lazy creation there is the possibility that\n    // an component receives focus before the actual item\n    // is created, therefore we set a flag\n    if (!this.child) {\n      this._notifyOnItemCreation = true;\n    } else {\n      return this.child;\n    }\n  }\n}\nItemWrapper.FIRST_CREATED = false;", "import { Lightning, Router } from '@lightningjs/sdk';\nimport { ItemWrapper } from \"../\";\nexport default class FlipList extends Lightning.Component {\n  static _template() {\n    return {\n      Items: {\n        alpha: 0,\n        x: 1320,\n        y: 300,\n        forceZIndexContext: true,\n        boundsMargin: [0, 0, 200, 0],\n        transitions: {\n          alpha: {\n            duration: 0.3,\n            timingFunction: 'cubic-bezier(0.20, 1.00, 0.80, 1.00)'\n          },\n          x: {\n            duration: 0.3,\n            timingFunction: 'cubic-bezier(0.20, 1.00, 0.80, 1.00)'\n          }\n        }\n      },\n      Pagination: {\n        flex: {},\n        mount: 1,\n        x: 1830,\n        y: 1005,\n        Current: {\n          text: {\n            fontSize: 28,\n            fontFace: \"SemiBold\"\n          }\n        },\n        Total: {\n          flexItem: {\n            marginTop: 7\n          },\n          text: {\n            fontSize: 21,\n            fontFace: \"Regular\",\n            textColor: 0xff626262\n          }\n        }\n      }\n    };\n  }\n  _construct() {\n    this._index = 0;\n  }\n  get activeItem() {\n    return this.tag(\"Items\").children[this._index];\n  }\n  get index() {\n    return this._index;\n  }\n  set index(v) {\n    this._index = v;\n  }\n  set container(v) {\n    this._container = v;\n  }\n  get container() {\n    return this._container;\n  }\n  set itemConstruct(v) {\n    this._itemConstruct = v;\n  }\n  get itemConstruct() {\n    return this._itemConstruct;\n  }\n  get getRealComponent() {\n    return this.activeItem.child;\n  }\n  set items(v) {\n    let construct = this._itemConstruct;\n    this._items = v;\n\n    //@warn: since we lazy create all the items\n    // we need to set the itemWrapper flag to false\n    // so it can notify that the first item is created\n    ItemWrapper.FIRST_CREATED = false;\n    this.tag(\"Items\").patch({\n      children: this._createItems({\n        items: this._items,\n        construct\n      })\n    });\n  }\n  get items() {\n    return this._items;\n  }\n  _createItems(_ref) {\n    let {\n      items,\n      construct\n    } = _ref;\n    return items.map((item, idx) => {\n      const configIndex = idx > 3 ? 4 : idx + 1;\n      return {\n        type: ItemWrapper,\n        construct,\n        index: idx,\n        item: item,\n        configIndex,\n        w: construct.width,\n        h: construct.height,\n        visible: idx <= 3\n      };\n    });\n  }\n  resetConfigIndex() {\n    const children = this.tag(\"Items\").children;\n    children.forEach((child, idx) => {\n      child.visible = false;\n      if (idx === this._index - 1) {\n        child.visible = true;\n        child.configIndex = 0;\n        if (child.child) {\n          child.child.focusedItem = false;\n          child.child.animatePosition();\n        }\n      } else if (idx === this._index) {\n        child.visible = true;\n        child.configIndex = 1;\n        if (child.child) {\n          child.child.focusedItem = true;\n          child.child.animatePosition();\n        }\n      } else if (idx === this._index + 1) {\n        child.visible = true;\n        child.configIndex = 2;\n        if (child.child) {\n          child.child.focusedItem = false;\n          child.child.animatePosition();\n        }\n      } else if (idx === this._index + 2) {\n        child.visible = true;\n        child.configIndex = 3;\n        if (child.child) {\n          child.child.animatePosition();\n        }\n      } else if (idx === this._index + 3) {\n        child.visible = true;\n        child.configIndex = 4;\n        if (child.child) {\n          child.child.animatePosition();\n        }\n      }\n    });\n  }\n  _animateToSelected() {\n    const index = this._index;\n    const children = this.tag(\"Items\").children;\n    if (children[index - 1]) {\n      children[index - 1].configIndex = 0;\n      if (children[index - 1].child) {\n        children[index - 1].child.focusedItem = false;\n        children[index - 1].child.animatePosition();\n      }\n    }\n    if (children[index]) {\n      children[index].visible = true;\n      children[index].configIndex = 1;\n      if (children[index].child) {\n        children[index].child.focusedItem = true;\n        children[index].child.animatePosition();\n      }\n    }\n    if (children[index + 1]) {\n      children[index + 1].visible = true;\n      children[index + 1].configIndex = 2;\n      if (children[index + 1].child) {\n        children[index + 1].child.focusedItem = false;\n        children[index + 1].child.animatePosition();\n      }\n    }\n    if (children[index + 2]) {\n      children[index + 2].visible = true;\n      children[index + 2].configIndex = 3;\n      if (children[index + 2].child) {\n        children[index + 2].child.animatePosition();\n      }\n    }\n    if (children[index + 3]) {\n      children[index + 3].configIndex = 4;\n      if (children[index + 3].child) {\n        children[index + 3].child.animatePosition();\n      }\n    }\n    if (index === this.tag(\"Items\").children.length - 1) {\n      this.tag(\"Items\").setSmooth(\"x\", 1490);\n    } else if (index === this.tag(\"Items\").children.length - 2) {\n      this.tag(\"Items\").setSmooth(\"x\", 1420);\n    } else if (index === this.tag(\"Items\").children.length - 3) {\n      this.tag(\"Items\").setSmooth(\"x\", 1320);\n    }\n    const item = this._items[this._index];\n    this.application.emit(\"setItem\", {\n      item\n    });\n    this.tag(\"Current\").text = \"\".concat(index + 1);\n    this.tag(\"Total\").text = \" / \".concat(this.tag(\"Items\").children.length);\n  }\n  _focus() {\n    this.tag(\"Items\").patch({\n      smooth: {\n        alpha: 1\n      }\n    });\n    this.tag(\"Items\").children.forEach((item, index) => {\n      if (index < 3) {\n        item.setSmooth(\"x\", 0);\n      }\n    });\n    this._animateToSelected();\n  }\n  _unfocus() {\n    this.stage.gc();\n  }\n  _handleLeft() {\n    if (this._index > 0) {\n      this.select({\n        direction: -1\n      });\n    } else {\n      return false;\n    }\n  }\n  _handleRight() {\n    if (this._index < this.tag(\"Items\").children.length - 1) {\n      this.select({\n        direction: 1\n      });\n    } else {\n      return false;\n    }\n  }\n  select(_ref2) {\n    let {\n      direction\n    } = _ref2;\n    this._direction = direction;\n    this._index += direction;\n    this._animateToSelected();\n  }\n  _getFocused() {\n    return this.activeItem;\n  }\n  static get height() {\n    return 560;\n  }\n}", "import { Lightning, Router } from '@lightningjs/sdk';\nimport { ItemWrapper } from \"../index\";\nexport default class List extends Lightning.Component {\n  static _template() {\n    return {\n      h: List.height,\n      Items: {\n        forceZIndexContext: true,\n        boundsMargin: [500, 100, 500, 100],\n        transitions: {\n          x: {\n            duration: 0.3,\n            timingFunction: 'cubic-bezier(0.20, 1.00, 0.80, 1.00)'\n          }\n        }\n      }\n    };\n  }\n  _construct() {\n    this._index = 0;\n  }\n  get activeItem() {\n    return this.tag(\"Items\").children[this._index];\n  }\n  set container(v) {\n    this._container = v;\n  }\n  get container() {\n    return this._container;\n  }\n  set itemConstruct(v) {\n    this._itemConstruct = v;\n  }\n  get itemConstruct() {\n    return this._itemConstruct;\n  }\n  get getRealComponent() {\n    return this.activeItem.child;\n  }\n  set items(v) {\n    let construct = this._itemConstruct;\n    this._items = v;\n\n    //@warn: since we lazy create all the items\n    // we need to set the itemWrapper flag to false\n    // so it can notify that the first item is created\n    ItemWrapper.FIRST_CREATED = false;\n    this.tag(\"Items\").patch({\n      children: this._createItems({\n        items: this._items,\n        construct\n      })\n    });\n  }\n  get items() {\n    return this._items;\n  }\n  _createItems(_ref) {\n    let {\n      items,\n      construct\n    } = _ref;\n    return items.map((item, index) => {\n      return {\n        type: ItemWrapper,\n        construct,\n        index: index,\n        item: item,\n        x: index * (construct.width + construct.offset),\n        w: construct.width,\n        h: construct.height\n      };\n    });\n  }\n  _animateToSelected() {\n    let index = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this._index;\n    if (index > 4) {\n      this.tag(\"Items\").setSmooth(\"x\", -this.activeItem.finalX + this.activeItem.w * 4);\n    } else {\n      this.tag(\"Items\").setSmooth(\"x\", 0);\n    }\n  }\n  _focus() {\n    this._animateToSelected();\n  }\n  _unfocus() {\n    this.stage.gc();\n  }\n  _handleLeft() {\n    if (this._index > 0) {\n      this.select({\n        direction: -1\n      });\n    } else {\n      return false;\n    }\n  }\n  _handleRight() {\n    if (this._index < this.tag(\"Items\").children.length - 1) {\n      this.select({\n        direction: 1\n      });\n    } else {\n      return false;\n    }\n  }\n  setIndex(index) {\n    this._index = index;\n    this._animateToSelected();\n    this._refocus();\n  }\n  select(_ref2) {\n    let {\n      direction\n    } = _ref2;\n    this._index += direction;\n    this._animateToSelected();\n  }\n  $itemCreatedForFocus() {\n    this.application.updateFocusPath();\n  }\n  _getFocused() {\n    return this.activeItem;\n  }\n  static get height() {\n    return 451;\n  }\n}", "import { Lightning } from \"@lightningjs/sdk\";\nexport default class Title extends Lightning.Component {\n  static _template() {\n    return {};\n  }\n  _init() {\n    this.on(\"txLoaded\", () => {\n      if (!this._skip) {\n        this.application.emit(\"titleLoaded\");\n      }\n    });\n  }\n  set skip(v) {\n    this._skip = v;\n  }\n  set label(v) {\n    let fontSize = 128;\n    let lineHeight = 128;\n    if (v.length > 12 && v.length < 24) {\n      fontSize = 108;\n      lineHeight = 118;\n    } else if (v.length >= 24) {\n      fontSize = 88;\n      lineHeight = 98;\n    }\n    this.patch({\n      text: {\n        fontFace: \"Black\",\n        fontSize,\n        lineHeight,\n        wordWrapWidth: 1000,\n        text: v\n      }\n    });\n  }\n}", "import { Lightning } from \"@lightningjs/sdk\";\nexport default class CircleProgressShader extends Lightning.shaders.WebGLDefaultShader {\n  constructor(ctx) {\n    super(ctx);\n    this._radius = 100;\n    this._width = 50;\n    this._period = 1;\n    this._angle = 0.5;\n    this._smooth = 0.005;\n    this._color = 0xffffffff;\n    this._backgroundColor = 0xff000000;\n  }\n  set radius(v) {\n    this._radius = v;\n    this.redraw();\n  }\n  set width(v) {\n    this._width = v;\n    this.redraw();\n  }\n  set period(v) {\n    this._period = v;\n    this.redraw();\n  }\n  set angle(v) {\n    this._angle = v;\n    this.redraw();\n  }\n  set smooth(v) {\n    this._smooth = v;\n    this.redraw();\n  }\n  set color(v) {\n    this._color = v;\n    this.redraw();\n  }\n  set backgroundColor(v) {\n    this._backgroundColor = v;\n    this.redraw();\n  }\n  setupUniforms(operation) {\n    super.setupUniforms(operation);\n    const owner = operation.shaderOwner;\n    this._setUniform('radius', this._radius, this.gl.uniform1f);\n    this._setUniform('width', this._width, this.gl.uniform1f);\n    this._setUniform('period', this._period, this.gl.uniform1f);\n    this._setUniform('angle', this._angle, this.gl.uniform1f);\n    this._setUniform('smooth', this._smooth, this.gl.uniform1f);\n    this._setUniform('color', new Float32Array(lng.StageUtils.getRgbaComponentsNormalized(this._color)), this.gl.uniform4fv);\n    this._setUniform('backgroundColor', new Float32Array(lng.StageUtils.getRgbaComponentsNormalized(this._backgroundColor)), this.gl.uniform4fv);\n    this._setUniform('resolution', new Float32Array([owner._w, owner._h]), this.gl.uniform2fv);\n    this.redraw();\n  }\n}\nCircleProgressShader.fragmentShaderSource = \"\\n\\n    #ifdef GL_ES\\n    precision lowp float;\\n    #endif\\n    varying vec2 vTextureCoord;\\n    varying vec4 vColor;\\n    uniform sampler2D uSampler;\\n\\n    uniform float radius;\\n    uniform float width;\\n    uniform float period;\\n    uniform float angle;\\n    uniform float smooth;\\n    uniform vec2 resolution;\\n\\n    uniform vec4 color;\\n    uniform vec4 backgroundColor;\\n\\n    float ratio = resolution.y / resolution.x;\\n\\n    vec2 transpose_pos(vec2 pos) {\\n        if (ratio < 1.) {\\n            float diff = 0.5 - pos.x;\\n            pos.x = 0.5 - diff / ratio;\\n        } else {\\n            float diff = 0.5 - pos.y;\\n            pos.y = 0.5 - diff * ratio;\\n        }\\n        return pos;\\n    }\\n\\n    float get_angle(vec2 pos) {\\n        pos = transpose_pos(pos);\\n        float a = atan(pos.y - 0.5, pos.x - 0.5);\\n        a = (1.0+a/3.14159)/2.0;\\n        \\n        return a;\\n    }\\n\\n    float dist(vec2 pos1, vec2 pos2) {\\n        pos1 = transpose_pos(pos1);\\n        return distance(pos1, pos2);\\n    }\\n\\n    void main()\\n    {\\n        vec2 fragCoord = vTextureCoord;\\n        vec4 fragColor = vColor;\\n        \\n        vec2 st = vTextureCoord;\\n        float pct = dist(st, vec2(0.5));\\n\\n        float a = get_angle(st);\\n        float t = period;\\n\\n        float inner = max((radius - width) / resolution.x, (radius - width) / resolution.y);\\n        float outer = max(radius / resolution.x, radius / resolution.y);\\n\\n        float x1 = mod(t, 1.0);\\n        float x2 = mod(t + angle, 1.0);\\n\\n        if (x1 < x2) {\\n            if (a > x1 && a < x2) {\\n                float val = (1.0 - (x2 - a) / angle) * smoothstep(0.0, 3. * smooth, (x2 - a));\\n                fragColor = mix(backgroundColor, color, 1.0);\\n            } else {\\n                fragColor = backgroundColor;\\n            }\\n        } else {\\n            if (a < x2) {\\n                float val = (1.0 - (x2 - a) / angle) * smoothstep(0.0, 3. * smooth, (x2 - a));\\n                fragColor = mix(backgroundColor, color, val);\\n            } else if (a > x1) {\\n                float val = (1.0 - (1.0 + x2 - a) / angle) * smoothstep(0.0, 3. * smooth, (1.0 + x2 - a));\\n                fragColor = mix(backgroundColor, color, val);\\n            } else {\\n                fragColor = backgroundColor;\\n            }\\n        }\\n\\n        float s = smoothstep(inner, inner + smooth + 0.00001, pct) * (1.0 - smoothstep(outer, outer + smooth + 0.00001, pct));\\n        gl_FragColor = texture2D(uSampler, fragCoord) * (1. - s * fragColor.a) + fragColor * s;\\n    }\\n\";", "import { Lightning } from \"@lightningjs/sdk\";\nimport CircleProgressShader from \"../../shader/CircleProgressShader\";\nexport default class Rating extends Lightning.Component {\n  static _template() {\n    return {\n      texture: Lightning.Tools.getRoundRect(100, 100, 50, 0, 0x00ffffff, true, 0xff081C22),\n      rtt: true,\n      RatingNumber: {\n        mount: .5,\n        x: w => w / 2 - 2,\n        y: h => h / 2 + 4,\n        Number: {\n          text: {\n            text: '0',\n            fontSize: 34,\n            fontFace: \"SemiBold\"\n          }\n        },\n        Percentage: {\n          y: 6,\n          text: {\n            text: '%',\n            fontSize: 12,\n            fontFace: \"SemiBold\"\n          }\n        }\n      },\n      RatingCircle: {\n        rect: true,\n        rtt: true,\n        color: 0x00ffffff,\n        mount: .5,\n        x: 51,\n        y: 51,\n        w: 90,\n        h: 90,\n        rotation: Math.PI * .5,\n        shader: {\n          type: CircleProgressShader,\n          radius: 45,\n          width: 5,\n          angle: 0,\n          smooth: 0.007,\n          color: 0xffd1215c,\n          backgroundColor: 0xff204529\n        }\n      }\n    };\n  }\n  _init() {\n    this._voteAverage = 0;\n    this.tag(\"Number\").on(\"txLoaded\", () => {\n      this.tag(\"RatingNumber\").w = this.tag(\"Number\").renderWidth;\n      this.tag(\"RatingNumber\").h = this.tag(\"Number\").renderHeight;\n      this.tag(\"Percentage\").x = this.tag(\"Number\").renderWidth;\n    });\n    this._ratingAnimation = this.animation({\n      duration: 0.6,\n      timingFunction: 'cubic-bezier(.94,.42,.49,.99)',\n      actions: [{\n        t: 'RatingCircle',\n        p: 'shader.angle',\n        rv: 0.0001,\n        v: e => {\n          return this._voteAverage / 10 * e;\n        }\n      }, {\n        t: 'Number',\n        p: 'text.text',\n        rv: 0,\n        v: e => {\n          return \"\".concat(Math.floor(this._voteAverage * 10 * e));\n        }\n      }]\n    });\n  }\n  set voteAverage(v) {\n    this._voteAverage = v;\n    this._ratingColor();\n  }\n  startAnimation(skipAnimation) {\n    if (skipAnimation || this._voteAverage === 0) {\n      this.tag(\"RatingCircle\").shader.angle = this._voteAverage / 10;\n      this.tag(\"Number\").text = \"\".concat(this._voteAverage === 0 ? \"-\" : Math.floor(this._voteAverage * 10));\n      this.tag(\"Percentage\").visible = this._voteAverage !== 0;\n    } else {\n      this._ratingAnimation.start();\n    }\n  }\n  _ratingColor() {\n    let color = 0xff21d07a;\n    let backgroundColor = 0xff204529;\n    if (this._voteAverage === 0) {\n      color = 0xff21d07a;\n      backgroundColor = 0xff204529;\n    } else if (this._voteAverage / 10 < 0.4) {\n      color = 0xffd1215c;\n      backgroundColor = 0xff571435;\n    } else if (this._voteAverage / 10 >= 0.4 && this._voteAverage / 10 < 0.7) {\n      color = 0xffd2d531;\n      backgroundColor = 0xff423d0f;\n    }\n    this.tag(\"RatingCircle\").shader.color = color;\n    this.tag(\"RatingCircle\").shader.backgroundColor = backgroundColor;\n    this.application.emit(\"ratingColor\", color);\n  }\n}", "import { Lightning } from \"@lightningjs/sdk\";\nexport default class MovieInfo extends Lightning.Component {\n  static _template() {\n    return {\n      Date: {\n        y: 8,\n        text: {\n          fontFace: \"Regular\",\n          fontSize: 28,\n          textColor: 0xff767676\n        }\n      },\n      Genres: {\n        y: 50,\n        text: {\n          fontFace: \"Regular\",\n          fontSize: 24,\n          textColor: 0xff21d07a\n        }\n      }\n    };\n  }\n  _init() {\n    this.listeners = {\n      ratingColor: color => {\n        this.tag(\"Genres\").text.textColor = color;\n      }\n    };\n  }\n  _attach() {\n    [\"ratingColor\"].forEach(event => {\n      this.application.on(event, this.listeners[event]);\n    });\n  }\n  _detach() {\n    [\"ratingColor\"].forEach(event => {\n      this.application.off(event, this.listeners[event]);\n    });\n  }\n  set info(_ref) {\n    let {\n      date,\n      genres\n    } = _ref;\n    this.tag(\"Date\").text = date;\n    this.tag(\"Genres\").text = genres;\n  }\n}", "import { Lightning } from \"@lightningjs/sdk\";\nexport default class Button extends Lightning.Component {\n  static _template() {\n    return {\n      color: 0xff21d07a,\n      rtt: true,\n      texture: Lightning.Tools.getRoundRect(180, 60, 30, 0, 0xff21d07a, true, 0xffffffff),\n      transitions: {\n        alpha: {\n          duration: 0.3,\n          timingFunction: 'cubic-bezier(0.20, 1.00, 0.80, 1.00)'\n        },\n        y: {\n          duration: 0.3,\n          timingFunction: 'cubic-bezier(0.20, 1.00, 0.80, 1.00)'\n        }\n      },\n      Button: {\n        x: 5,\n        y: 5,\n        texture: Lightning.Tools.getRoundRect(50, 50, 25, 0, 0xff21d07a, true, 0xff081C22),\n        Ok: {\n          mount: 0.5,\n          x: 26,\n          y: 28,\n          text: {\n            text: \"OK\",\n            fontFace: \"Regular\",\n            fontSize: 19\n          }\n        }\n      },\n      Label: {\n        mount: 0.5,\n        x: 114,\n        y: 33,\n        text: {\n          text: \"Details\",\n          fontFace: \"Regular\",\n          fontSize: 24,\n          textColor: 0xff081C22\n        }\n      }\n    };\n  }\n  _init() {\n    this.listeners = {\n      ratingColor: color => {\n        this.color = color;\n      }\n    };\n  }\n  set label(v) {\n    this.tag(\"Label\").text = v;\n  }\n  _active() {\n    [\"ratingColor\"].forEach(event => {\n      this.application.on(event, this.listeners[event]);\n    });\n  }\n  _inactive() {\n    [\"ratingColor\"].forEach(event => {\n      this.application.off(event, this.listeners[event]);\n    });\n  }\n}", "import { Img, Lightning, Router, Utils } from \"@lightningjs/sdk\";\nimport { getImgUrl } from \"../lib/tools\";\nexport default class Background extends Lightning.Component {\n  static _template() {\n    return {\n      Backgrounds: {\n        w: 1920,\n        h: 1080,\n        BackgroundA: {\n          colorLeft: 0x50ffffff,\n          colorRight: 0x0090cea1\n        },\n        BackgroundB: {\n          colorLeft: 0x40ffffff,\n          colorRight: 0x0090cea1\n        }\n      }\n    };\n  }\n  _init() {\n    this._index = 0;\n    this.tag(\"BackgroundA\").on(\"txLoaded\", () => {\n      this.tag(\"BackgroundA\").setSmooth(\"alpha\", 1, {\n        duration: 0.6,\n        timingFunction: 'cubic-bezier(0.20, 1.00, 0.80, 1.00)'\n      });\n      this.tag(\"BackgroundB\").setSmooth(\"alpha\", 0, {\n        duration: 0.3,\n        timingFunction: 'cubic-bezier(0.20, 1.00, 0.80, 1.00)'\n      });\n    });\n    this.tag(\"BackgroundB\").on(\"txLoaded\", () => {\n      this.tag(\"BackgroundB\").setSmooth(\"alpha\", 1, {\n        duration: 0.6,\n        timingFunction: 'cubic-bezier(0.20, 1.00, 0.80, 1.00)'\n      });\n      this.tag(\"BackgroundA\").setSmooth(\"alpha\", 0, {\n        duration: 0.3,\n        timingFunction: 'cubic-bezier(0.20, 1.00, 0.80, 1.00)'\n      });\n    });\n    this.tag(\"BackgroundA\").transition(\"alpha\").on(\"finish\", () => {\n      if (this._index === 0) {\n        this.application.emit(\"backgroundLoaded\");\n      }\n    });\n    this.tag(\"BackgroundB\").transition(\"alpha\").on(\"finish\", () => {\n      if (this._index === 1) {\n        this.application.emit(\"backgroundLoaded\");\n      }\n    });\n    this.listeners = {\n      setBackground: _ref => {\n        let {\n          src\n        } = _ref;\n        this._item = null;\n        this._skip = false;\n        this._src = src;\n      },\n      readyForBackground: () => {\n        if (!this._skip) {\n          this._setBackground(this._src);\n        }\n      },\n      setItem: _ref2 => {\n        let {\n          item\n        } = _ref2;\n        if (this._item && item.background === this._item.background) {\n          this._skip = true;\n          return;\n        }\n        this._skip = false;\n        this._item = item;\n        let src = Utils.asset(\"images/background.png\");\n        if (this._item.background) {\n          src = getImgUrl(this._item.background, 1280);\n        }\n        this._src = src;\n      }\n    };\n  }\n  _attach() {\n    [\"setBackground\", \"setItem\", \"readyForBackground\"].forEach(event => {\n      this.application.on(event, this.listeners[event]);\n    });\n  }\n  _detach() {\n    [\"setBackground\", \"setItem\", \"readyForBackground\"].forEach(event => {\n      this.application.off(event, this.listeners[event]);\n    });\n  }\n  _setBackground(src) {\n    if (src === this._lastSrc) return;\n    this._lastSrc = src;\n    this.tag(\"Backgrounds\").children[this._index].patch({\n      texture: Img(src).contain(1920, 1080),\n      alpha: 0.001\n    });\n    this._index ^= 1;\n  }\n}", "import { Lightning } from \"@lightningjs/sdk\";\nimport { Button, MovieInfo, Rating, Title } from \"../../components\";\nexport default class Content extends Lightning.Component {\n  static _template() {\n    return {\n      alpha: 0.001,\n      Title: {\n        type: Title\n      },\n      Details: {\n        Rating: {\n          type: Rating\n        },\n        MovieInfo: {\n          x: 120,\n          y: 4,\n          type: MovieInfo\n        }\n      },\n      Button: {\n        type: Button,\n        label: \"Details\"\n      }\n    };\n  }\n  _init() {\n    this._detailAnimation = this.animation({\n      duration: 0.6,\n      actions: [{\n        t: '',\n        p: 'alpha',\n        rv: 0,\n        v: {\n          0: {\n            v: 0\n          },\n          1: {\n            v: 1\n          }\n        }\n      }, {\n        t: '',\n        p: 'x',\n        rv: 90,\n        v: {\n          0: {\n            v: 130\n          },\n          1: {\n            v: 90\n          }\n        }\n      }]\n    });\n    this._detailAnimation.on(\"finish\", () => {\n      this.application.emit(\"readyForBackground\");\n    });\n    this.listeners = {\n      titleLoaded: () => {\n        this._detailAnimation.start();\n        this.application.emit(\"contentHeight\", this.tag(\"Title\").renderHeight + 200);\n        this.tag(\"Rating\").startAnimation();\n        this.h = this.tag(\"Title\").renderHeight + 160;\n        this.tag(\"Details\").y = this.tag(\"Title\").renderHeight - 20;\n        this.tag(\"Button\").y = this.tag(\"Title\").renderHeight + 120;\n        this._refocus();\n      },\n      setItem: _ref => {\n        let {\n          item\n        } = _ref;\n        this._item = item;\n      },\n      itemAnimationEnded: () => {\n        this._setDetails(this._item);\n      }\n    };\n    this.transition(\"alpha\").on(\"finish\", () => {\n      this.application.emit(\"contentHidden\");\n    });\n  }\n  _attach() {\n    [\"titleLoaded\", \"setItem\", \"itemAnimationEnded\"].forEach(event => {\n      this.application.on(event, this.listeners[event]);\n    });\n  }\n  _detach() {\n    [\"titleLoaded\", \"setItem\", \"itemAnimationEnded\"].forEach(event => {\n      this.application.off(event, this.listeners[event]);\n    });\n  }\n  _setDetails(item) {\n    if (this._details === item) return;\n    this._details = item;\n    this._item = item;\n    this.alpha = 0.001;\n    this.tag(\"Rating\").voteAverage = item.voteAverage;\n    this.tag(\"Title\").label = item.title;\n    this.tag(\"MovieInfo\").info = {\n      date: item.formattedReleaseDate,\n      genres: item.genresAsString\n    };\n  }\n  hide() {\n    this.patch({\n      smooth: {\n        alpha: 0,\n        x: 40\n      },\n      Button: {\n        smooth: {\n          alpha: 0,\n          y: 60\n        }\n      }\n    });\n    [\"titleLoaded\", \"setItem\"].forEach(event => {\n      this.application.off(event, this.listeners[event]);\n    });\n  }\n}", "import { Lightning, Router } from '@lightningjs/sdk';\nimport Content from \"./Content\";\nexport default class Popular extends Lightning.Component {\n  static _template() {\n    return {\n      Content: {\n        mountY: 0.5,\n        y: 540,\n        x: 90,\n        type: Content\n      },\n      List: {}\n    };\n  }\n  _init() {\n    this._index = 0;\n    this.listeners = {\n      contentHidden: () => {\n        this.widgets.menu.hide();\n        Router.navigate(\"details/\".concat(this._item.type, \"/\").concat(this._item.id), true);\n      }\n    };\n  }\n  _attach() {\n    [\"contentHidden\", \"readyForNavigate\"].forEach(event => {\n      this.application.on(event, this.listeners[event]);\n    });\n  }\n  _detach() {\n    [\"contentHidden\", \"readyForNavigate\"].forEach(event => {\n      this.application.off(event, this.listeners[event]);\n    });\n  }\n  _active() {\n    this.widgets.menu.show();\n  }\n  set content(v) {\n    if (v) {\n      this.tag(\"List\").childList.add(v);\n    }\n  }\n  $firstItemCreated() {\n    this._refocus();\n  }\n  _getFocused() {\n    return this.selectedList;\n  }\n  get selectedList() {\n    return this.tag(\"List\").children[this._index];\n  }\n  $selectItem(_ref) {\n    let {\n      item\n    } = _ref;\n    this._item = item;\n    Router.navigate(\"details/\".concat(this._item.type, \"/\").concat(this._item.id), true);\n  }\n  historyState(params) {\n    if (params) {\n      this.selectedList.index = params.listIndex;\n      this.selectedList.resetConfigIndex();\n    } else {\n      if (this.tag(\"List\").children[this._index]) {\n        return {\n          listIndex: this.tag(\"List\").children[this._index].index\n        };\n      }\n    }\n  }\n}", "import { Router } from \"@lightningjs/sdk\";\nimport Popular from \"./index\";\nexport default class Movie extends Popular {\n  _active() {\n    this.widgets.menu.select(\"movie\", true);\n  }\n  _handleDown() {\n    this.widgets.menu.select(\"tv\");\n    Router.navigate(\"tv\");\n  }\n}", "import { Router } from \"@lightningjs/sdk\";\nimport Popular from \"./index\";\nexport default class Tv extends Popular {\n  _active() {\n    this.widgets.menu.select(\"tv\", true);\n  }\n  _handleUp() {\n    this.widgets.menu.select(\"movie\");\n    Router.navigate(\"movie\");\n  }\n  _handleDown() {\n    this.widgets.menu.select(\"accessibility\");\n    Router.navigate(\"accessibility\");\n  }\n}", "import { Img, Lightning } from \"@lightningjs/sdk\";\nexport default class Logo extends Lightning.Component {\n  static _template() {\n    return {\n      colorTop: 0xffc3c3c3,\n      colorBottom: 0xffffffff,\n      texture: Lightning.Tools.getRoundRect(120, 120, 60, 0, 0xffffffff, true, 0xffffffff),\n      mountX: 1,\n      rtt: true,\n      Logo: {\n        mount: 0.5,\n        x: 60,\n        y: 60\n      }\n    };\n  }\n  set logo(v) {\n    this.tag(\"Logo\").texture = Img(\"https://image.tmdb.org/t/p/w300/\".concat(v)).contain(80, 60);\n  }\n}", "import { Lightning, Router } from \"@lightningjs/sdk\";\nimport { MovieInfo, Rating, Title } from \"../../components\";\nimport Logo from \"./Logo\";\nexport default class Details extends Lightning.Component {\n  static _template() {\n    return {\n      Item: {\n        x: 90,\n        mountY: 0.5,\n        y: 514,\n        transitions: {\n          alpha: {\n            duration: 0.3,\n            delay: 0.1,\n            timingFunction: 'cubic-bezier(0.20, 1.00, 0.80, 1.00)'\n          },\n          mountY: {\n            duration: 0.3,\n            delay: 0.1,\n            timingFunction: 'cubic-bezier(0.20, 1.00, 0.80, 1.00)'\n          },\n          y: {\n            duration: 0.3,\n            delay: 0.1,\n            timingFunction: 'cubic-bezier(0.20, 1.00, 0.80, 1.00)'\n          },\n          x: {\n            duration: 0.6,\n            delay: 0.4,\n            timingFunction: 'cubic-bezier(0.20, 1.00, 0.80, 1.00)'\n          }\n        },\n        Title: {\n          type: Title\n        },\n        Details: {\n          Rating: {\n            type: Rating\n          },\n          MovieInfo: {\n            x: 120,\n            y: 4,\n            type: MovieInfo\n          }\n        },\n        Holder: {\n          alpha: 0,\n          transitions: {\n            alpha: {\n              duration: 0.6,\n              timingFunction: 'cubic-bezier(0.20, 1.00, 0.80, 1.00)'\n            },\n            y: {\n              duration: 0.6,\n              timingFunction: 'cubic-bezier(0.20, 1.00, 0.80, 1.00)'\n            }\n          },\n          Overview: {\n            text: {\n              fontFace: \"Regular\",\n              fontSize: 24,\n              lineHeight: 44,\n              textColor: 0xffc3c3c3,\n              wordWrapWidth: 1000\n            }\n          }\n        }\n      },\n      LogosHolder: {\n        y: 120,\n        Logos: {\n          mountX: 1,\n          x: 1830\n        }\n      }\n    };\n  }\n  _init() {\n    this.tag(\"Item\").transition(\"y\").on(\"finish\", () => {\n      this.tag(\"Holder\").y = this.tag(\"Holder\").y + 30;\n      this.tag(\"Holder\").patch({\n        smooth: {\n          alpha: 1,\n          y: this.tag(\"Holder\").y - 30\n        }\n      });\n    });\n    this.tag(\"Holder\").transition(\"y\").on(\"finish\", () => {\n      this.application.emit(\"readyForBackground\");\n    });\n    this.transition(\"alpha\").on(\"finish\", () => {\n      this.widgets.detailsmenu.select(\"cast\");\n      Router.navigate(\"cast/\".concat(this._detailsType, \"/\").concat(this._item.id), true);\n    });\n    this.listeners = {\n      titleLoaded: () => {\n        this.tag(\"Rating\").startAnimation(true);\n        this.h = this.tag(\"Title\").renderHeight + 160;\n        this.tag(\"Details\").y = this.tag(\"Title\").renderHeight - 20;\n        this.tag(\"Holder\").y = this.tag(\"Title\").renderHeight + 100;\n        this.application.emit(\"contentHeight\", 0);\n      },\n      backgroundLoaded: () => {\n        this.tag(\"Logos\").children.forEach(logo => {\n          logo.setSmooth(\"x\", 0);\n          logo.setSmooth(\"alpha\", 1);\n        });\n      }\n    };\n  }\n  _attach() {\n    [\"titleLoaded\", \"backgroundLoaded\"].forEach(event => {\n      this.application.on(event, this.listeners[event]);\n    });\n  }\n  _detach() {\n    [\"titleLoaded\", \"backgroundLoaded\"].forEach(event => {\n      this.application.off(event, this.listeners[event]);\n    });\n  }\n  _active() {\n    this.patch({\n      Item: {\n        smooth: {\n          y: 110,\n          x: 110,\n          mountY: 0\n        }\n      }\n    });\n    this.widgets.detailsmenu.select(\"details\", true);\n  }\n  _inactive() {\n    this.patch({\n      Item: {\n        smooth: {\n          y: 514,\n          x: 90,\n          mountY: 0.5\n        }\n      }\n    });\n  }\n  set content(v) {\n    this._item = v;\n    this.tag(\"Title\").label = this._item.title;\n    this.tag(\"MovieInfo\").info = {\n      date: this._item.formattedReleaseDate,\n      genres: this._item.genresAsString\n    };\n    this.tag(\"Overview\").text = this._item.overview;\n    this.tag(\"Rating\").voteAverage = this._item.voteAverage;\n    let logoIndex = 0;\n    this._item.productionCompanies.forEach(company => {\n      if (company.logo_path !== null && logoIndex < 6) {\n        this.tag(\"Logos\").childList.a(this.stage.c({\n          type: Logo,\n          logo: company.logo_path,\n          y: logoIndex * 140,\n          x: 30,\n          alpha: 0.001,\n          transitions: {\n            alpha: {\n              duration: 0.6,\n              delay: 0.15 * logoIndex,\n              timingFunction: 'cubic-bezier(0.20, 1.00, 0.80, 1.00)'\n            },\n            x: {\n              duration: 0.6,\n              delay: 0.15 * logoIndex,\n              timingFunction: 'cubic-bezier(0.20, 1.00, 0.80, 1.00)'\n            }\n          }\n        }));\n        logoIndex++;\n      }\n    });\n    this.application.emit(\"setItem\", {\n      item: this._item\n    });\n  }\n  set detailsType(v) {\n    this._detailsType = v;\n  }\n  _handleDown() {\n    this.patch({\n      smooth: {\n        alpha: 0\n      }\n    });\n  }\n}", "import { Lightning, Router, Utils } from \"@lightningjs/sdk\";\nexport default class Cast extends Lightning.Component {\n  static _template() {\n    return {\n      List: {\n        alpha: 0.001,\n        x: 110,\n        mountY: 0.5,\n        y: 520,\n        h: 451,\n        transitions: {\n          x: {\n            duration: 0.6,\n            delay: 0.3,\n            timingFunction: 'cubic-bezier(0.20, 1.00, 0.80, 1.00)'\n          },\n          alpha: {\n            duration: 0.6,\n            delay: 0.3,\n            timingFunction: 'cubic-bezier(0.20, 1.00, 0.80, 1.00)'\n          }\n        }\n      }\n    };\n  }\n  _active() {\n    this.widgets.detailsmenu.select(\"cast\", true);\n    const src = Utils.asset(\"images/background.png\");\n    this.application.emit(\"setBackground\", {\n      src\n    });\n    this.application.emit(\"contentHeight\", 640);\n    this.tag(\"List\").transition(\"alpha\").on(\"finish\", () => {\n      this.application.emit(\"readyForBackground\");\n    });\n    this.tag(\"List\").patch({\n      smooth: {\n        alpha: 1,\n        x: 90\n      }\n    });\n  }\n  set content(v) {\n    if (v) {\n      this.tag(\"List\").childList.add(v);\n    }\n  }\n  set detailsType(v) {\n    this._detailsType = v;\n  }\n  set detailsId(v) {\n    this._detailsId = v;\n  }\n  _handleUp() {\n    Router.navigate(\"details/\".concat(this._detailsType, \"/\").concat(this._detailsId), true);\n    this.widgets.detailsmenu.select(\"details\");\n  }\n  _handleDown() {\n    Router.navigate(\"similar/\".concat(this._detailsType, \"/\").concat(this._detailsId), true);\n    this.widgets.detailsmenu.select(\"similar\");\n  }\n  _getFocused() {\n    return this.tag(\"List\").children[0];\n  }\n}", "import Popular from \"./popular\";\nimport { Router } from \"@lightningjs/sdk\";\nexport default class Similar extends Popular {\n  _active() {\n    this.widgets.detailsmenu.select(\"similar\", true);\n  }\n  set detailsType(v) {\n    this._detailsType = v;\n  }\n  set detailsId(v) {\n    this._detailsId = v;\n  }\n  _handleUp() {\n    this.widgets.detailsmenu.select(\"cast\");\n    Router.navigate(\"cast/\".concat(this._detailsType, \"/\").concat(this._detailsId), true);\n  }\n  _getFocused() {\n    return this.tag(\"List\").children[this._index];\n  }\n}", "import { Img, Lightning, Router, Utils } from \"@lightningjs/sdk\";\nimport { Button, Title } from \"../components\";\nimport { getImgUrl } from \"../lib/tools\";\nexport default class People extends Lightning.Component {\n  static _template() {\n    return {\n      Item: {\n        flex: {\n          direction: \"column\"\n        },\n        x: 90,\n        mountY: 0.5,\n        y: 514,\n        transitions: {\n          alpha: {\n            duration: 0.3,\n            delay: 0.1,\n            timingFunction: 'cubic-bezier(0.20, 1.00, 0.80, 1.00)'\n          },\n          mountY: {\n            duration: 0.3,\n            delay: 0.1,\n            timingFunction: 'cubic-bezier(0.20, 1.00, 0.80, 1.00)'\n          },\n          y: {\n            duration: 0.3,\n            delay: 0.1,\n            timingFunction: 'cubic-bezier(0.20, 1.00, 0.80, 1.00)'\n          },\n          x: {\n            duration: 0.6,\n            delay: 0.4,\n            timingFunction: 'cubic-bezier(0.20, 1.00, 0.80, 1.00)'\n          }\n        },\n        Title: {\n          type: Title,\n          skip: true\n        },\n        Birth: {\n          text: {\n            fontFace: \"Regular\",\n            fontSize: 24,\n            textColor: 0xff21d07a\n          }\n        },\n        Holder: {\n          flex: {\n            direction: \"column\"\n          },\n          flexItem: {\n            marginTop: 40\n          },\n          alpha: 0,\n          transitions: {\n            alpha: {\n              duration: 0.6,\n              timingFunction: 'cubic-bezier(0.20, 1.00, 0.80, 1.00)'\n            },\n            y: {\n              duration: 0.6,\n              timingFunction: 'cubic-bezier(0.20, 1.00, 0.80, 1.00)'\n            }\n          },\n          Biography: {\n            text: {\n              fontFace: \"Regular\",\n              fontSize: 24,\n              lineHeight: 44,\n              wordWrapWidth: 1480,\n              textColor: 0xffc3c3c3\n            }\n          }\n        }\n      }\n    };\n  }\n  _init() {\n    this.tag(\"Item\").transition(\"y\").on(\"finish\", () => {\n      this.tag(\"Holder\").y = 30;\n      this.tag(\"Holder\").patch({\n        smooth: {\n          alpha: 1,\n          y: 0\n        }\n      });\n    });\n  }\n  _active() {\n    this.application.emit(\"contentHeight\", 0);\n    this.patch({\n      Item: {\n        smooth: {\n          y: 110,\n          x: 110,\n          mountY: 0\n        }\n      }\n    });\n    this.tag(\"Item\").transition(\"y\").on(\"finish\", () => {\n      this.application.emit(\"readyForBackground\");\n    });\n    this.widgets.peoplemenu.select(\"details\", true);\n  }\n  _inactive() {\n    this.patch({\n      Item: {\n        smooth: {\n          y: 514,\n          x: 90,\n          mountY: 0.5\n        }\n      }\n    });\n  }\n  set content(v) {\n    this._item = v;\n    this.tag(\"Title\").label = this._item.name;\n    this.tag(\"Birth\").text = \"\".concat(this._item.birthday, \" | \").concat(this._item.placeOfBirth);\n    if (this._item._biography.length >= 600) {\n      this.tag(\"Biography\").text = this._truncateString(this._item._biography, 700);\n    } else {\n      this.tag(\"Biography\").text = this._item._biography;\n    }\n    let src = Utils.asset(\"images/background.png\");\n    if (this._item.profilePath) {\n      src = getImgUrl(this._item.profilePath, 780);\n    }\n    this.application.emit(\"setBackground\", {\n      src\n    });\n  }\n  _handleDown() {\n    this.widgets.peoplemenu.select(\"moviecredits\");\n    Router.navigate(\"movie_credits/movie/\".concat(this._item.id), true);\n  }\n  _truncateString(s, n) {\n    let cut = s.indexOf(' ', n);\n    if (cut === -1) return s;\n    return \"\".concat(s.substring(0, cut), \"...\");\n  }\n}", "import Popular from \"./popular\";\nimport { Router } from \"@lightningjs/sdk\";\nexport default class MovieCredits extends Popular {\n  _active() {\n    this.widgets.peoplemenu.select(\"moviecredits\", true);\n  }\n  set peopleId(v) {\n    this._peopleId = v;\n  }\n  _handleUp() {\n    Router.navigate(\"people/\".concat(this._peopleId), true);\n    this.widgets.peoplemenu.select(\"details\");\n  }\n  _handleDown() {\n    Router.navigate(\"tv_credits/tv/\".concat(this._peopleId), true);\n    this.widgets.peoplemenu.select(\"tvcredits\");\n  }\n  _getFocused() {\n    return this.tag(\"List\").children[this._index];\n  }\n}", "import { Lightning, Router } from \"@lightningjs/sdk\";\nexport default class Error extends Lightning.Component {\n  static _template() {\n    return {\n      rect: true,\n      w: 1920,\n      h: 1080,\n      color: 0xffb70606,\n      Label: {\n        x: 100,\n        y: 100,\n        text: {\n          text: 'Error',\n          fontSize: 22\n        }\n      }\n    };\n  }\n  _handleEnter() {\n    Router.navigate(\"main\");\n  }\n  _focus() {\n    console.log(\"focus error page\");\n  }\n  set error(obj) {\n    const {\n      page,\n      error\n    } = obj;\n    console.log(page, error);\n    const errorMessage = \"\\nerror while loading page: \".concat(page.constructor.name, \"\\npress enter to navigate to home\\n--\\nloaded via hash: \").concat(page[Symbol.for(\"hash\")], \"\\nresulted in route: \").concat(page[Symbol.for(\"route\")], \"\\n--\\n\").concat(error.toString());\n    this.tag(\"Label\").text = errorMessage;\n  }\n  easing() {\n    return \"up\";\n  }\n}", "import { Lightning } from '@lightningjs/sdk';\nexport default class NotFound extends Lightning.Component {\n  static _template() {\n    return {\n      Label: {\n        x: 960,\n        y: 530,\n        text: {\n          text: 'Page not found'\n        }\n      }\n    };\n  }\n}", "import { Lightning, Utils, Router } from \"@lightningjs/sdk\";\nexport default class Splash extends Lightning.Component {\n  static _template() {\n    return {\n      Background: {\n        w: 1920,\n        h: 1080,\n        colorBottom: 0xff000000,\n        scale: 1.2,\n        src: Utils.asset(\"images/background.png\"),\n        transitions: {\n          scale: {\n            duration: 1,\n            timingFunction: 'cubic-bezier(0.20, 1.00, 0.80, 1.00)'\n          }\n        }\n      },\n      Logo: {\n        src: Utils.asset(\"images/logo-large.png\"),\n        mount: .5,\n        x: 960,\n        y: 640,\n        alpha: 0.001,\n        transitions: {\n          alpha: {\n            duration: 1,\n            timingFunction: 'cubic-bezier(0.20, 1.00, 0.80, 1.00)'\n          },\n          y: {\n            duration: 1,\n            timingFunction: 'cubic-bezier(0.20, 1.00, 0.80, 1.00)'\n          }\n        }\n      },\n      Spinner: {\n        src: Utils.asset(\"images/spinner.png\"),\n        mountX: .5,\n        x: 960,\n        y: 920,\n        alpha: 0.001,\n        color: 0xaaffffff,\n        transitions: {\n          alpha: {\n            duration: 1,\n            timingFunction: 'cubic-bezier(0.20, 1.00, 0.80, 1.00)'\n          }\n        }\n      }\n    };\n  }\n  _init() {\n    this.tag(\"Logo\").on(\"txLoaded\", () => {\n      this.tag(\"Logo\").setSmooth(\"alpha\", 1);\n      this.tag(\"Logo\").setSmooth(\"y\", 540);\n      this.tag(\"Background\").setSmooth(\"scale\", 1);\n    });\n    this.tag(\"Spinner\").on(\"txLoaded\", () => {\n      this.tag(\"Spinner\").setSmooth(\"alpha\", 1);\n      this._spinnerAnimation.start();\n    });\n    this.application.on(\"booted\", () => {\n      Router.navigate(\"movies\", false);\n    });\n    this._spinnerAnimation = this.animation({\n      duration: 1,\n      repeat: -1,\n      actions: [{\n        t: 'Spinner',\n        p: \"rotation\",\n        sm: 0,\n        v: function (t) {\n          if (t < .125) {\n            return 45 * (Math.PI / 180);\n          } else if (t < .250) {\n            return 90 * (Math.PI / 180);\n          } else if (t < .375) {\n            return 135 * (Math.PI / 180);\n          } else if (t < .500) {\n            return 180 * (Math.PI / 180);\n          } else if (t < .625) {\n            return 225 * (Math.PI / 180);\n          } else if (t < .750) {\n            return 270 * (Math.PI / 180);\n          } else if (t < .875) {\n            return 315 * (Math.PI / 180);\n          } else if (t < 1) {\n            return 360 * (Math.PI / 180);\n          }\n        }\n      }]\n    });\n    setTimeout(() => {\n      Router.navigate(\"movie\", false);\n    }, 3000);\n  }\n  _inactive() {\n    this._spinnerAnimation.stop();\n  }\n}", "import { Movie, Tv } from \"./\";\nexport default class Container {\n  constructor(obj, type, genres) {\n    this._page = obj.page;\n    this._total_results = obj.total_results;\n    this._type = type;\n    this._items = obj.results.map(item => {\n      switch (type) {\n        case \"movie\":\n          return new Movie(item, genres);\n        case \"tv\":\n          return new Tv(item, genres);\n      }\n    });\n  }\n  get page() {\n    return this._page;\n  }\n  get total() {\n    return this._total_results;\n  }\n  get type() {\n    return this._type;\n  }\n  get items() {\n    return this._items;\n  }\n}", "export default class Movie {\n  constructor(obj, genres) {\n    this._adult = obj.adult;\n    this._backdrop_path = obj.backdrop_path;\n    this._genres = obj.genre_ids.map(id => {\n      return genres.find(genre => {\n        return genre.id === id;\n      });\n    }).filter(item => item);\n    this._id = obj.id;\n    this._original_language = obj.original_language;\n    this._overview = obj.overview;\n    this._popularity = obj.popularity;\n    this._poster_path = obj.poster_path;\n    this._release_date = obj.release_date;\n    this._title = obj.title;\n    this._type = \"movie\";\n    this._video = obj.video;\n    this._vote_average = obj.vote_average;\n    this._vote_count = obj.vote_count;\n  }\n  get adult() {\n    return this._adult;\n  }\n  get background() {\n    return this._backdrop_path;\n  }\n  get genres() {\n    return this._genres;\n  }\n  get genresAsString() {\n    let genres = \"\";\n    this._genres.forEach((genre, index) => {\n      if (index > 0) {\n        genres += \" | \".concat(genre.name);\n      } else {\n        genres += \"\".concat(genre.name);\n      }\n    });\n    return genres === '' ? \"-\" : genres;\n  }\n  get id() {\n    return this._id;\n  }\n  get originalLanguage() {\n    return this._original_language;\n  }\n  get overview() {\n    return this._overview;\n  }\n  get popularity() {\n    return this._popularity;\n  }\n  get poster() {\n    return this._poster_path;\n  }\n  get releaseDate() {\n    return this._release_date;\n  }\n  get formattedReleaseDate() {\n    if (!this._release_date) {\n      return \"Date not available\";\n    } else {\n      const date = new Date(this._release_date);\n      return \"\".concat(date.toLocaleString('default', {\n        month: 'long'\n      }), \" \").concat(date.getDate(), \" \").concat(date.getFullYear());\n    }\n  }\n  get title() {\n    return this._title;\n  }\n  get type() {\n    return this._type;\n  }\n  get video() {\n    return this._video;\n  }\n  get voteAverage() {\n    return this._vote_average;\n  }\n  get voteCount() {\n    return this._vote_count;\n  }\n}", "export default class Tv {\n  constructor(obj, genres) {\n    this._backdrop_path = obj.backdrop_path;\n    this._first_air_date = obj.first_air_date;\n    this._genres = obj.genre_ids.map(id => {\n      return genres.find(genre => {\n        return genre.id === id;\n      });\n    }).filter(item => item);\n    this._id = obj.id;\n    this._name = obj.name;\n    this._origin_country = obj.origin_country;\n    this._original_language = obj.original_language;\n    this._original_name = obj.original_name;\n    this._overview = obj.overview;\n    this._popularity = obj.popularity;\n    this._poster_path = obj.poster_path;\n    this._title = obj.name;\n    this._type = \"tv\";\n    this._vote_average = obj.vote_average;\n    this._vote_count = obj.vote_count;\n  }\n  get background() {\n    return this._backdrop_path;\n  }\n  get firstAirDate() {\n    return this._first_air_date;\n  }\n  get formattedReleaseDate() {\n    if (!this._first_air_date) {\n      return \"Date not available\";\n    } else {\n      const date = new Date(this._first_air_date);\n      return \"\".concat(date.toLocaleString('default', {\n        month: 'long'\n      }), \" \").concat(date.getDate(), \", \").concat(date.getFullYear());\n    }\n  }\n  get genres() {\n    return this._genres;\n  }\n  get genresAsString() {\n    let genres = \"\";\n    this._genres.forEach((genre, index) => {\n      if (index > 0) {\n        genres += \" | \".concat(genre.name);\n      } else {\n        genres += \"\".concat(genre.name);\n      }\n    });\n    return genres === '' ? \"-\" : genres;\n  }\n  get id() {\n    return this._id;\n  }\n  get name() {\n    return this._name;\n  }\n  get originalCountry() {\n    return this._origin_country;\n  }\n  get originalLanguage() {\n    return this._original_language;\n  }\n  get originalName() {\n    return this._original_name;\n  }\n  get overview() {\n    return this._overview;\n  }\n  get title() {\n    return this._title;\n  }\n  get type() {\n    return this._type;\n  }\n  get popularity() {\n    return this._popularity;\n  }\n  get poster() {\n    return this._poster_path;\n  }\n  get voteAverage() {\n    return this._vote_average;\n  }\n  get voteCount() {\n    return this._vote_count;\n  }\n}", "export default class Details {\n  constructor(obj) {\n    this._adult = obj.adult;\n    this._backdrop_path = obj.backdrop_path;\n    this._belong_to_collection = obj.belongs_to_collection;\n    this._budget = obj.budget;\n    this._genres = obj.genres;\n    this._homepage = obj.homepage;\n    this._id = obj.id;\n    this._imdb_id = obj.imdb_id;\n    this._original_language = obj.original_language;\n    this._original_title = obj.original_title;\n    this._overview = obj.overview;\n    this._popularity = obj.popularity;\n    this._poster_path = obj.poster_path;\n    this._production_companies = obj.production_companies;\n    this._production_countries = obj.production_countries;\n    this._release_date = obj.release_date || obj.first_air_date;\n    this._revenue = obj.revenue;\n    this._runtime = obj.runtime;\n    this._spoken_languages = obj.spoken_languages;\n    this._status = obj.status;\n    this._tagline = obj.tagline;\n    this._title = obj.title || obj.name;\n    this._video = obj._video;\n    this._vote_average = obj.vote_average;\n    this._vote_count = obj.vote_count;\n  }\n  get adult() {\n    return this._adult;\n  }\n  get background() {\n    return this._backdrop_path;\n  }\n  get belongToCollection() {\n    return this._belong_to_collection;\n  }\n  get budget() {\n    return this._budget;\n  }\n  get genres() {\n    return this._genres;\n  }\n  get genresAsString() {\n    let genres = \"\";\n    this._genres.forEach((genre, index) => {\n      if (index > 0) {\n        genres += \" | \".concat(genre.name);\n      } else {\n        genres += \"\".concat(genre.name);\n      }\n    });\n    return genres === '' ? \"-\" : genres;\n  }\n  get homepage() {\n    return this._homepage;\n  }\n  get id() {\n    return this._id;\n  }\n  get imdbId() {\n    return this._imdb_id;\n  }\n  get originalLanguage() {\n    return this._original_language;\n  }\n  get originalTitle() {\n    return this._original_title;\n  }\n  get overview() {\n    return this._overview;\n  }\n  get popularity() {\n    return this._popularity;\n  }\n  get poster() {\n    return this._poster_path;\n  }\n  get productionCompanies() {\n    return this._production_companies;\n  }\n  get productionCountries() {\n    return this._production_countries;\n  }\n  get releaseDate() {\n    return this._release_date;\n  }\n  get formattedReleaseDate() {\n    if (!this._release_date) {\n      return \"Date not available\";\n    } else {\n      const date = new Date(this._release_date);\n      return \"\".concat(date.toLocaleString('default', {\n        month: 'long'\n      }), \" \").concat(date.getDate(), \" \").concat(date.getFullYear());\n    }\n  }\n  get revenue() {\n    return this._revenue;\n  }\n  get runtime() {\n    return this._runtime;\n  }\n  get spokenLanguages() {\n    return this._spoken_languages;\n  }\n  get status() {\n    return this._status;\n  }\n  get tagline() {\n    return this._tagline;\n  }\n  get title() {\n    return this._title;\n  }\n  get video() {\n    return this._video;\n  }\n  get voteAverage() {\n    return this._vote_average;\n  }\n  get voteCount() {\n    return this._vote_count;\n  }\n}", "export default class Cast {\n  constructor(obj, type) {\n    this._cast = obj.cast;\n    this._crew = obj.crew;\n    this._id = obj.id;\n    this._type = type;\n  }\n  get items() {\n    return this._cast;\n  }\n  get type() {\n    return this._type;\n  }\n  get cast() {\n    return this._cast;\n  }\n  get crew() {\n    return this._crew;\n  }\n  get id() {\n    return this._id;\n  }\n}", "export default class People {\n  constructor(obj) {\n    this._adult = obj.adult;\n    this._also_known_as = obj.also_known_as;\n    this._biography = obj.biography;\n    this._birthday = obj.birthday;\n    this._deathday = obj.deathday;\n    this._gender = obj.gender;\n    this._homepage = obj.homepage;\n    this._id = obj.id;\n    this._imdb_id = obj.id;\n    this._known_for_department = obj.known_for_department;\n    this._name = obj.name;\n    this._place_of_birth = obj.place_of_birth;\n    this._popularity = obj.popularity;\n    this._profile_path = obj.profile_path;\n  }\n  get adult() {\n    return this._adult;\n  }\n  get alsoKnownAs() {\n    return this._also_known_as;\n  }\n  get biography() {\n    return this._biography;\n  }\n  get birthday() {\n    const date = new Date(this._birthday);\n    return \"\".concat(date.toLocaleString('default', {\n      month: 'long'\n    }), \" \").concat(date.getDate(), \", \").concat(date.getFullYear());\n  }\n  get deathday() {\n    return this._deathday;\n  }\n  get gender() {\n    return this._gender;\n  }\n  get homepage() {\n    return this._homepage;\n  }\n  get id() {\n    return this._id;\n  }\n  get imdbId() {\n    return this._imdb_id;\n  }\n  get knowForDepartment() {\n    return this._known_for_department;\n  }\n  get name() {\n    return this._name;\n  }\n  get placeOfBirth() {\n    return this._place_of_birth;\n  }\n  get popularity() {\n    return this._popularity;\n  }\n  get profilePath() {\n    return this._profile_path;\n  }\n}", "import { Item, FlipList, Actor, List } from \"../components\";\nimport { Container, Details, Cast, People } from \"./models\";\nlet stage;\nconst models = new Map();\nconst listComponents = new Map();\nconst itemComponents = new Map();\nmodels.set(\"movie\", Container);\nmodels.set(\"tv\", Container);\nmodels.set(\"cast\", Cast);\nlistComponents.set(\"movie\", FlipList);\nlistComponents.set(\"tv\", FlipList);\nlistComponents.set(\"cast\", List);\nitemComponents.set(\"movie\", Item);\nitemComponents.set(\"tv\", Item);\nitemComponents.set(\"cast\", Actor);\nexport const init = stageInstance => {\n  stage = stageInstance;\n};\nexport const list = (type, data, genres) => {\n  const container = models.get(type);\n  const model = new container(data, type, genres);\n  if (model.items.length === 0) {\n    return null;\n  } else {\n    return stage.c({\n      type: listComponents.get(type),\n      itemConstruct: itemComponents.get(type),\n      items: model.items\n    });\n  }\n};\nexport const details = data => {\n  return new Details(data);\n};\nexport const people = data => {\n  return new People(data);\n};", "import Popular from \"./popular\";\nimport { Router } from \"@lightningjs/sdk\";\nexport default class TvCredits extends Popular {\n  _active() {\n    this.widgets.peoplemenu.select(\"tvcredits\", true);\n  }\n  set peopleId(v) {\n    this._peopleId = v;\n  }\n  _handleUp() {\n    this.widgets.peoplemenu.select(\"moviecredits\");\n    Router.navigate(\"movie_credits/movie/\".concat(this._peopleId), true);\n  }\n  _getFocused() {\n    return this.tag(\"List\").children[this._index];\n  }\n}", "import { Lightning, Router, Utils } from \"@lightningjs/sdk\";\nconst settings = {\n  b: 0,\n  c: 100,\n  s: null,\n  i: 1\n};\nexport default class Accessibility extends Lightning.Component {\n  static _template() {\n    return {\n      x: 110,\n      alpha: 0.001,\n      transitions: {\n        x: {\n          duration: 0.6,\n          delay: 0.3,\n          timingFunction: 'cubic-bezier(0.20, 1.00, 0.80, 1.00)'\n        },\n        alpha: {\n          duration: 0.6,\n          delay: 0.3,\n          timingFunction: 'cubic-bezier(0.20, 1.00, 0.80, 1.00)'\n        }\n      },\n      Example: {\n        y: 300,\n        src: Utils.asset(\"images/example.png\")\n      },\n      Options: {\n        y: 780,\n        Filter: {\n          type: OptionItem,\n          index: 0,\n          label: \"Color correction\",\n          options: [\"Trichromacy (normal)\", \"Protanopia\", \"Deuteranopia\", \"Tritanopia\", \"Achromatopsia\"],\n          onChange: function (selected) {\n            settings.s = selected;\n            this.stage.emit('correctColor', {\n              settings\n            });\n          }\n        }\n      }\n    };\n  }\n  _init() {\n    this._index = 0;\n    this._optionsIndex = 0;\n  }\n  _active() {\n    const state = Router.getHistoryState(\"accessibility\");\n    if (state) {\n      this.selectedOption.index = state.optionsIndex || 0;\n      this.selectedOption.update();\n    }\n    this.widgets.menu.select(\"accessibility\", true);\n    const src = Utils.asset(\"images/background.png\");\n    this.application.emit(\"setBackground\", {\n      src\n    });\n    this.application.emit(\"contentHeight\", 580);\n    this.transition(\"alpha\").on(\"finish\", () => {\n      this.application.emit(\"readyForBackground\");\n    });\n    this.patch({\n      smooth: {\n        alpha: 1,\n        x: 90\n      }\n    });\n  }\n  _handleUp() {\n    this.widgets.menu.select(\"tv\");\n    Router.navigate(\"tv\");\n  }\n  _handleLeft() {\n    this.selectedOption.toggle(-1);\n  }\n  _handleRight() {\n    this.selectedOption.toggle(1);\n  }\n  get selectedOption() {\n    return this.tag(\"Options\").children[this._optionsIndex];\n  }\n  _getFocused() {\n    return this.selectedOption;\n  }\n  historyState() {\n    return {\n      optionsIndex: this.selectedOption.index\n    };\n  }\n}\nclass OptionItem extends Lightning.Component {\n  static _template() {\n    return {\n      Label: {\n        color: 0xff767676,\n        text: {\n          fontSize: 36,\n          fontFace: \"Regular\"\n        }\n      },\n      SelectedOption: {\n        flex: {},\n        x: 800,\n        mountX: 1,\n        Left: {\n          alpha: 0,\n          flexItem: {\n            marginRight: 20,\n            marginTop: 10\n          },\n          src: Utils.asset(\"images/arrow.png\"),\n          rotation: Math.PI\n        },\n        Option: {\n          text: {\n            fontSize: 36,\n            fontFace: \"Regular\"\n          }\n        },\n        Right: {\n          alpha: 0,\n          flexItem: {\n            marginLeft: 20,\n            marginTop: 10\n          },\n          src: Utils.asset(\"images/arrow.png\")\n        }\n      }\n    };\n  }\n  _init() {\n    this._index = 0;\n  }\n  set label(v) {\n    this._label = v;\n    this.tag(\"Label\").text = v;\n  }\n  set index(v) {\n    this._index = v;\n  }\n  get index() {\n    return this._index;\n  }\n  set options(v) {\n    this._options = v;\n    this.tag(\"Option\").text = v[this._index];\n  }\n  set onChange(f) {\n    this._onChange = f;\n  }\n  update() {\n    this.tag(\"Option\").text = this.selectedOption;\n  }\n  toggle(direction) {\n    this._index += direction;\n    if (this._index < 0) {\n      this._index = this._options.length - 1;\n    } else if (this._index > this._options.length - 1) {\n      this._index = 0;\n    }\n    this.tag(\"Option\").text = this.selectedOption;\n    if (typeof this._onChange === \"function\") {\n      this._onChange.call(this, this.selectedOption);\n    }\n  }\n  _focus() {\n    this.patch({\n      SelectedOption: {\n        Left: {\n          alpha: 1\n        },\n        Right: {\n          alpha: 1\n        }\n      }\n    });\n  }\n  _unfocus() {\n    this.patch({\n      SelectedOption: {\n        Left: {\n          alpha: 0\n        },\n        Right: {\n          alpha: 0\n        }\n      }\n    });\n  }\n  get selectedOption() {\n    return this._options[this._index];\n  }\n}", "import { getCreditsUrl, getCreditsUrls, getDetailUrl, getPeopleUrl, getPopularUrls, getSimilarUrls } from \"./endpoints\";\nimport { NotFound, Error, Splash, Movie, Tv, Details, Cast, Similar, People, MovieCredits } from '../pages';\nimport { details, list, people } from \"./factory\";\nimport TvCredits from \"../pages/TvCredits\";\nimport Accessibility from \"../pages/Accessibility\";\nconst getPopularContent = async type => {\n  try {\n    const urls = await getPopularUrls(type);\n    const response = await Promise.all(urls);\n    const [g, data] = await Promise.all(response.map(d => d.json()));\n    return list(type, data, g.genres);\n  } catch (e) {\n    console.log(e);\n  }\n};\nexport default {\n  root: \"splash\",\n  routes: [{\n    path: 'splash',\n    component: Splash\n  }, {\n    path: 'movie',\n    component: Movie,\n    before: async page => {\n      page.content = await getPopularContent(\"movie\");\n    },\n    widgets: [\"menu\"]\n  }, {\n    path: 'tv',\n    component: Tv,\n    before: async page => {\n      page.content = await getPopularContent(\"tv\");\n    },\n    widgets: [\"menu\"]\n  }, {\n    path: 'accessibility',\n    component: Accessibility,\n    widgets: [\"menu\"]\n  }, {\n    path: 'details/:type/:id',\n    component: Details,\n    before: async (page, _ref) => {\n      let {\n        type,\n        id\n      } = _ref;\n      return getDetailUrl(type, id).then(response => {\n        return response.json();\n      }).then(function (data) {\n        page.detailsType = type;\n        page.content = details(data);\n      }).catch(function (error) {\n        console.log(error);\n      });\n    },\n    widgets: [\"detailsmenu\"]\n  }, {\n    path: 'cast/:type/:id',\n    component: Cast,\n    before: async (page, _ref2) => {\n      let {\n        type,\n        id\n      } = _ref2;\n      return getCreditsUrl(type, id).then(response => {\n        return response.json();\n      }).then(function (data) {\n        page.detailsType = type;\n        page.detailsId = id;\n        page.content = list(\"cast\", data);\n      }).catch(function (error) {\n        console.log(error);\n      });\n    },\n    widgets: [\"detailsmenu\"]\n  }, {\n    path: 'similar/:type/:id',\n    component: Similar,\n    before: async (page, _ref3) => {\n      let {\n        type,\n        id\n      } = _ref3;\n      return getSimilarUrls(type, id).then(response => {\n        return Promise.all(response).then(function (responses) {\n          return Promise.all(responses.map(function (response) {\n            return response.json();\n          }));\n        }).then(function (response) {\n          const genres = response[0].genres;\n          const data = response[1];\n          page.detailsType = type;\n          page.detailsId = id;\n          page.content = list(type, data, genres);\n        }).catch(function (error) {\n          console.log(\"error\", error);\n        });\n      });\n    },\n    widgets: [\"detailsmenu\"]\n  }, {\n    path: 'people/:id',\n    component: People,\n    before: async (page, _ref4) => {\n      let {\n        id\n      } = _ref4;\n      return getPeopleUrl(id).then(response => {\n        return response.json();\n      }).then(function (data) {\n        page.content = people(data);\n      }).catch(function (error) {\n        console.log(error);\n      });\n    },\n    widgets: [\"peoplemenu\"]\n  }, {\n    path: 'movie_credits/:type/:id',\n    component: MovieCredits,\n    before: async (page, _ref5) => {\n      let {\n        type,\n        id\n      } = _ref5;\n      return getCreditsUrls(type, id).then(response => {\n        return Promise.all(response).then(function (responses) {\n          return Promise.all(responses.map(function (response) {\n            return response.json();\n          }));\n        }).then(function (response) {\n          const genres = response[0].genres;\n          const data = {\n            results: response[1].cast\n          };\n          page.peopleId = id;\n          page.content = list(type, data, genres);\n        }).catch(function (error) {\n          console.log(\"error\", error);\n        });\n      });\n    },\n    widgets: [\"peoplemenu\"]\n  }, {\n    path: 'tv_credits/:type/:id',\n    component: TvCredits,\n    before: async (page, _ref6) => {\n      let {\n        type,\n        id\n      } = _ref6;\n      return getCreditsUrls(type, id).then(response => {\n        return Promise.all(response).then(function (responses) {\n          return Promise.all(responses.map(function (response) {\n            return response.json();\n          }));\n        }).then(function (response) {\n          const genres = response[0].genres;\n          const data = {\n            results: response[1].cast\n          };\n          page.peopleId = id;\n          page.content = list(type, data, genres);\n        }).catch(function (error) {\n          console.log(\"error\", error);\n        });\n      });\n    },\n    widgets: [\"peoplemenu\"]\n  }, {\n    path: '*',\n    component: NotFound\n  }]\n};", "import { Lightning } from '@lightningjs/sdk';\nexport default class Menu extends Lightning.Component {\n  static _template() {\n    return {\n      Lines: {\n        Top: {\n          x: -12,\n          w: 2,\n          rect: true,\n          color: 0x50ffffff\n        },\n        Bottom: {\n          y: 790,\n          mountY: 1,\n          x: -12,\n          w: 2,\n          rect: true,\n          color: 0x50ffffff\n        }\n      },\n      Items: {}\n    };\n  }\n  _init() {\n    this._id = null;\n    this.application.on(\"contentHeight\", h => {\n      if (h === 0) {\n        this.tag(\"Top\").setSmooth(\"h\", 400, {\n          duration: 0.3,\n          timingFunction: 'cubic-bezier(.21,.5,.48,.93)'\n        });\n        this.tag(\"Bottom\").setSmooth(\"h\", 390, {\n          duration: 0.3,\n          timingFunction: 'cubic-bezier(.21,.5,.48,.93)'\n        });\n      } else {\n        this.tag(\"Top\").setSmooth(\"h\", 440 - this._lineOffset - h / 2 - this._currentIndex * 48, {\n          duration: 0.3,\n          timingFunction: 'cubic-bezier(.21,.5,.48,.93)'\n        });\n        this.tag(\"Bottom\").setSmooth(\"h\", 330 + this._lineOffset - h / 2 + this._currentIndex * 48, {\n          duration: 0.3,\n          timingFunction: 'cubic-bezier(.21,.5,.48,.93)'\n        });\n      }\n    });\n  }\n  set items(v) {\n    this.tag(\"Items\").children = v.map(_ref => {\n      let {\n        label,\n        id,\n        selected\n      } = _ref;\n      return {\n        type: MenuItem,\n        label,\n        id,\n        selected\n      };\n    });\n  }\n  select(id, fastForward) {\n    if (id === this._id) return;\n    this._id = id;\n    let y = 0;\n    this.tag(\"Items\").children.forEach((item, index) => {\n      item.setSmooth(\"y\", y, {\n        duration: fastForward ? 0 : 0.3\n      });\n      if (id === item.id) {\n        this._currentIndex = index;\n        this.tag(\"Lines\").setSmooth(\"y\", (index + 1) * 48, {\n          duration: fastForward ? 0 : 0.3,\n          timingFunction: 'cubic-bezier(.21,.5,.48,.93)'\n        });\n        y += 810;\n      }\n      y += 48;\n      item.selected = item.id === id;\n    });\n    this.tag(\"Top\").setSmooth(\"h\", 400, {\n      duration: 0.3,\n      timingFunction: 'cubic-bezier(.94,.42,.49,.99)'\n    });\n    this.tag(\"Bottom\").setSmooth(\"h\", 390, {\n      duration: 0.3,\n      timingFunction: 'cubic-bezier(.94,.42,.49,.99)'\n    });\n  }\n  set lineOffset(v) {\n    this._lineOffset = v;\n  }\n  show() {\n    this.patch({\n      smooth: {\n        alpha: 1,\n        x: 90\n      }\n    });\n  }\n  hide() {\n    this.patch({\n      smooth: {\n        alpha: 0,\n        x: 60\n      }\n    });\n  }\n}\nclass MenuItem extends Lightning.Component {\n  static _template() {\n    return {\n      Label: {\n        text: {\n          fontSize: 28,\n          fontFace: \"Regular\"\n        }\n      }\n    };\n  }\n  set label(v) {\n    this._label = v;\n    this.patch({\n      Label: {\n        text: {\n          text: this._label\n        }\n      }\n    });\n  }\n  set selected(v) {\n    this.tag(\"Label\").color = v ? 0xffffffff : 0xff767676;\n  }\n  set id(v) {\n    this._id = v;\n  }\n  get id() {\n    return this._id;\n  }\n}", "/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Lightning } from \"@lightningjs/sdk\";\nexport default class ColorShift extends Lightning.shaders.WebGLDefaultShader {\n  set brightness(v) {\n    this._brightness = v / 100;\n    this.redraw();\n  }\n  set contrast(v) {\n    this._contrast = v / 100;\n    this.redraw();\n  }\n  setupUniforms(operation) {\n    const gl = this.gl;\n    super.setupUniforms(operation);\n    this._setUniform(\"brightness\", this._brightness || 0.0, gl.uniform1f);\n    this._setUniform(\"contrast\", this._contrast || 1.0, gl.uniform1f);\n  }\n}\nColorShift.before = \"\\n    #ifdef GL_ES\\n    # ifdef GL_FRAGMENT_PRECISION_HIGH\\n    precision highp float;\\n    # else\\n    precision lowp float;\\n    # endif\\n    #endif\\n        \\n    varying vec2 vTextureCoord;\\n    varying vec4 vColor;\\n    uniform sampler2D uSampler;\\n    uniform float brightness;\\n    uniform float contrast;\\n    \\n    const mat3 RGBtoOpponentMat = mat3(0.2814, -0.0971, -0.0930, 0.6938, 0.1458,-0.2529, 0.0638, -0.0250, 0.4665);\\n    const mat3 OpponentToRGBMat = mat3(1.1677, 0.9014, 0.7214, -6.4315, 2.5970, 0.1257, -0.5044, 0.0159, 2.0517);    \\n\";\nColorShift.after = \"    \\n    vec3 brightnessContrast(vec3 value, float brightness, float contrast)\\n    {\\n        return (value - 0.5) * contrast + 0.5 + brightness;\\n    }    \\n       \\n    void main(void){\\n        vec4 fragColor = texture2D(uSampler, vTextureCoord);        \\n        vec4 color = vision(filter(fragColor)) * vColor;       \\n        \\n        vec3 bc = brightnessContrast(color.rgb,brightness,contrast);        \\n        gl_FragColor = vec4(bc.rgb, color.a);          \\n    }\\n    \\n\";", "/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ColorShift } from \"./index\";\nexport default class ProtanopiaShader extends ColorShift {}\nProtanopiaShader.fragmentShaderSource = \"    \\n    \".concat(ColorShift.before, \"\\n    vec4 filter( vec4 color )\\n    {   \\n        vec3 opponentColor = RGBtoOpponentMat * vec3(color.r, color.g, color.b);\\n        opponentColor.x -= opponentColor.y * 1.5; \\n        vec3 rgbColor = OpponentToRGBMat * opponentColor;\\n        return vec4(rgbColor.r, rgbColor.g, rgbColor.b, color.a);      \\n    }\\n    \\n    vec4 vision(vec4 color)\\n    {\\n        vec4 r = vec4( 0.20,  0.99, -0.19, 0.0);\\n        vec4 g = vec4( 0.16,  0.79,  0.04, 0.0);\\n        vec4 b = vec4( 0.01, -0.01,  1.00, 0.0);\\n       \\n        return vec4(dot(color, r), dot(color, g), dot(color, b), color.a);\\t\\n    }\\n    \").concat(ColorShift.after, \"    \\n\");", "/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ColorShift } from \"./index\";\nexport default class DeuteranopiaShader extends ColorShift {}\nDeuteranopiaShader.fragmentShaderSource = \"\\n    \".concat(ColorShift.before, \"\\n    vec4 filter( vec4 color )\\n    {   \\n        vec3 opponentColor = RGBtoOpponentMat * vec3(color.r, color.g, color.b);\\n        opponentColor.x -= opponentColor.y * 1.5; \\n        vec3 rgbColor = OpponentToRGBMat * opponentColor;\\n        return vec4(rgbColor.r, rgbColor.g, rgbColor.b, color.a);    \\n    }\\n    \\n    vec4 vision(vec4 color)\\n    {\\n        vec4 r = vec4( 0.43,  0.72, -0.15, 0.0 );\\n        vec4 g = vec4( 0.34,  0.57,  0.09, 0.0 );\\n        vec4 b = vec4(-0.02,  0.03,  1.00, 0.0 );\\n       \\n        return vec4(dot(color, r), dot(color, g), dot(color, b), color.a);\\t\\n    }\\n    \").concat(ColorShift.after, \"    \\n\");", "/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ColorShift } from \"./index\";\nexport default class TritanopiaShader extends ColorShift {}\nTritanopiaShader.fragmentShaderSource = \"    \\n    \".concat(ColorShift.before, \"    \\n    vec4 filter( vec4 color )\\n    {   \\n        vec3 opponentColor = RGBtoOpponentMat * vec3(color.r, color.g, color.b);\\n        opponentColor.x -= ((3.0 * opponentColor.z) - opponentColor.y) * 0.25;\\n        vec3 rgbColor = OpponentToRGBMat * opponentColor;\\n        return vec4(rgbColor.r, rgbColor.g, rgbColor.b, color.a);\\n    }\\n    \\n    vec4 vision(vec4 color)\\n    {\\n        vec4 r = vec4( 0.97,  0.11, -0.08, 0.0 );\\n        vec4 g = vec4( 0.02,  0.82,  0.16, 0.0 );\\n        vec4 b = vec4(-0.06,  0.88,  0.18, 0.0 );\\n       \\n        return vec4(dot(color, r), dot(color, g), dot(color, b), color.a);\\t\\n    }    \\n    \").concat(ColorShift.after, \"       \\n\");", "/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ColorShift } from \"./index\";\nexport default class AchromatopsiaShader extends ColorShift {}\nAchromatopsiaShader.fragmentShaderSource = \"    \\n    \".concat(ColorShift.before, \"\\n    vec4 filter( vec4 color )\\n    {   \\n        float grey = dot(color.rgb, vec3(0.299, 0.587, 0.114));\\n        return vec4(vec3(grey, grey, grey), 1.0 ); \\n    }\\n           \\n    vec4 vision(vec4 color)\\n    {\\n        return color; \\n    }\\n    \").concat(ColorShift.after, \"    \\n\");", "import { Utils, Router } from '@lightningjs/sdk';\nimport routes from \"./lib/routes\";\nimport { init as initFactory } from \"./lib/factory\";\nimport { Menu } from \"./widgets\";\nimport { Background } from \"./components\";\nimport { Protanopia, Deuteranopia, Tritanopia, ColorShift, Achromatopsia } from \"./shader\";\nconst correction = {\n  Protanopia,\n  Deuteranopia,\n  Tritanopia,\n  ColorShift,\n  Achromatopsia\n};\nexport default class App extends Router.App {\n  static getFonts() {\n    return [{\n      family: 'Light',\n      url: Utils.asset('fonts/Inter-Light.ttf'),\n      descriptors: {}\n    }, {\n      family: 'Regular',\n      url: Utils.asset('fonts/Inter-Regular.ttf'),\n      descriptors: {}\n    }, {\n      family: 'Black',\n      url: Utils.asset('fonts/Inter-Black.ttf'),\n      descriptors: {}\n    }, {\n      family: 'SemiBold',\n      url: Utils.asset('fonts/Inter-SemiBold.ttf'),\n      descriptors: {}\n    }, {\n      family: 'Bold',\n      url: Utils.asset('fonts/Inter-Bold.ttf'),\n      descriptors: {}\n    }];\n  }\n\n  // when App instance is initialized we call the routes\n  // this will setup all pages and attach them to there route\n  _setup() {\n    initFactory(this.stage);\n    Router.startRouter(routes, this);\n  }\n  _init() {\n    this.stage.on('correctColor', _ref => {\n      let {\n        settings: {\n          b,\n          c,\n          s,\n          i\n        }\n      } = _ref;\n      if (correction[s]) {\n        this.tag(\"ColorCorrection\").rtt = true;\n        this.tag(\"ColorCorrection\").shader = {\n          type: correction[s],\n          brightness: b,\n          contrast: c\n        };\n      } else {\n        this.tag(\"ColorCorrection\").shader = null;\n        this.tag(\"ColorCorrection\").rtt = false;\n      }\n    });\n    const times = [];\n    let fps;\n    let totalFps = 0;\n    let totalFrames = 0;\n    const refreshLoop = () => {\n      window.requestAnimationFrame(() => {\n        const now = performance.now();\n        while (times.length > 0 && times[0] <= now - 1000) {\n          times.shift();\n        }\n        times.push(now);\n        fps = times.length;\n        this.tag(\"Fps\").tag(\"Amount\").text = \"\".concat(fps);\n        totalFps += fps;\n        totalFrames++;\n        this.tag(\"Average\").tag(\"Amount\").text = \"\".concat(Math.round(totalFps / totalFrames));\n        refreshLoop();\n      });\n    };\n    refreshLoop();\n  }\n  static _template() {\n    return {\n      // we MUST spread the base-class template\n      // if we want to provide Widgets.\n      ColorCorrection: {\n        rtt: false,\n        w: 1920,\n        h: 1080,\n        Background: {\n          type: Background\n        },\n        ...super._template(),\n        Holder: {\n          zIndex: 9999,\n          Fps: {\n            mountX: 1,\n            x: 1760,\n            y: 40,\n            Amount: {\n              text: {\n                text: '-',\n                fontFace: \"regular\",\n                fontSize: 24\n              }\n            },\n            Unit: {\n              x: 54,\n              y: 6,\n              text: {\n                text: 'FPS',\n                fontFace: \"regular\",\n                textColor: 0xffc3c3c3,\n                fontSize: 14\n              }\n            }\n          },\n          Average: {\n            mountX: 1,\n            x: 1760,\n            y: 74,\n            Amount: {\n              text: {\n                text: '-',\n                fontFace: \"regular\",\n                fontSize: 24\n              }\n            },\n            Unit: {\n              x: 54,\n              y: 6,\n              text: {\n                text: 'Avg. FPS',\n                textColor: 0xffc3c3c3,\n                fontFace: \"regular\",\n                fontSize: 14\n              }\n            }\n          }\n        },\n        Widgets: {\n          Menu: {\n            type: Menu,\n            x: 90,\n            y: 90,\n            zIndex: 99,\n            visible: false,\n            lineOffset: 24,\n            items: [{\n              label: \"Movies\",\n              id: \"movie\",\n              selected: true\n            }, {\n              label: \"TV\",\n              id: \"tv\",\n              selected: false\n            }, {\n              label: \"Accessibility\",\n              id: \"accessibility\",\n              selected: false\n            }]\n          },\n          DetailsMenu: {\n            type: Menu,\n            x: 90,\n            y: 60,\n            zIndex: 99,\n            visible: false,\n            lineOffset: 0,\n            items: [{\n              label: \"About\",\n              id: \"details\",\n              selected: true\n            }, {\n              label: \"Cast\",\n              id: \"cast\",\n              selected: false\n            }, {\n              label: \"Similar\",\n              id: \"similar\",\n              selected: false\n            }]\n          },\n          PeopleMenu: {\n            type: Menu,\n            x: 90,\n            y: 60,\n            zIndex: 99,\n            visible: false,\n            lineOffset: 0,\n            items: [{\n              label: \"Biography\",\n              id: \"details\",\n              selected: true\n            }, {\n              label: \"Movie credits\",\n              id: \"moviecredits\",\n              selected: false\n            }, {\n              label: \"TV credits\",\n              id: \"tvcredits\",\n              selected: false\n            }]\n          }\n        },\n        Loading: {}\n      }\n    };\n  }\n\n  /**\n   * Show app close dialogue\n   * @private\n   */\n  _handleAppClose() {\n    console.log(\"Close app\");\n  }\n}"],
  "mappings": "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",
  "names": ["isMergeableObject", "colors", "events", "setup", "language", "stage", "settings", "precision", "e", "type", "routes", "events", "stage", "activeRoute", "routerConfig", "state", "language", "lng", "timeout", "isObject", "isString", "isObject", "isString", "url", "App", "Deepmerge", "language", "app", "routes", "request", "resumeHash", "previousState", "request", "restoreFocus", "bootRequest", "rootHash", "request", "activePage", "history", "unlocked", "App", "app", "stage", "left", "mediaUrl", "metrics", "loader", "videoEl", "left", "right", "consumer", "state", "videoEl", "mediaUrl", "timeout", "fireOnConsumer", "callbacks", "stage", "options", "Error", "Movie", "Tv", "Movie", "Tv", "Details", "Cast", "People", "stage", "Cast", "init", "Details", "People", "settings", "state", "response", "init"]
}
